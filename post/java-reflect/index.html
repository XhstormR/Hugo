<!doctype html><html lang=zh-cn manifest=https://blog.xhstormr.tk/offline.appcache><head><meta charset=utf-8><meta name=renderer content="webkit"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>Java Reflect &#183; XhstormR</title><link rel=alternate type=application/rss+xml title=XhstormR href><link rel=icon type=image/x-icon href=https://blog.xhstormr.tk/favicon.ico><link rel=stylesheet href=https://blog.xhstormr.tk/css/uno.min.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/monokai-sublime.min.css><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js></script><script src=https://blog.xhstormr.tk/js/main.min.js async defer></script></head><body><div id=scriptHeader><span class="mobile btn-mobile-menu"><i class="fa fa-bars btn-mobile-menu__icon"></i>
<i class="fa fa-times btn-mobile-close__icon hidden"></i></span><header class="panel-cover panel-cover--collapsed"><div class=panel-main><div class="panel-main__inner panel-inverted"><div class=panel-main__content><h1 class="panel-cover__title panel-title"><a href=https://blog.xhstormr.tk/ title="link to homepage for XhstormR">XhstormR</a></h1><hr class=panel-cover__divider><p class=panel-cover__description>On a dark desert highway, cool wind in my hair.</p><hr class="panel-cover__divider panel-cover__divider--secondary"><div class=navigation-wrapper><nav class="cover-navigation cover-navigation--primary"><ul class=navigation><li class=navigation__item><a href=https://blog.xhstormr.tk#blog title="link to XhstormR blog" class=blog-button>Blog</a></li></ul></nav></div></div></div><div class=panel-cover--overlay></div></div></header></div><div class=bodytop><div class=content-wrapper><div class=content-wrapper__inner><div class=post><h1>Java Reflect</h1><span class=post-date>2017-05-08</span><p>Updated on 2017-05-08</p><blockquote><p style=text-align:center><img data-src=/uploads/java-reflect.png alt title=Reflect data-action=zoom width></p><script>[].forEach.call(document.querySelectorAll("img[data-src]"),function(a){a.setAttribute("src",a.getAttribute("data-src")),a.onload=function(){a.removeAttribute("data-src")}})</script><p><a href=http://download.java.net/jdk/jdk-api-localizations/jdk-api-zh-cn/publish/1.6.0/html/zh_CN/api/java/lang/reflect/package-summary.html>反射 API</a></p></blockquote><h2 id=class-对象>Class 对象</h2><p>类是 java.lang.Class 的实例对象。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>package</span> a<span style=color:#f92672>;</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> ClassNotFoundException<span style=color:#f92672>,</span> IllegalAccessException<span style=color:#f92672>,</span> InstantiationException <span style=color:#f92672>{</span>
        编译时刻就加载类<span style=color:#960050;background-color:#1e0010>（</span>静态加载<span style=color:#960050;background-color:#1e0010>）</span>
        Class<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>extends</span> A<span style=color:#f92672>&gt;</span> c1 <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> A<span style=color:#f92672>().</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>();</span>     通过实例对象获得 Class 对象
        Class<span style=color:#f92672>&lt;</span>A<span style=color:#f92672>&gt;</span> c2 <span style=color:#f92672>=</span> A<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>;</span>     通过静态成员获得 Class 对象
        运行时刻才加载类<span style=color:#960050;background-color:#1e0010>（</span>动态加载<span style=color:#960050;background-color:#1e0010>）</span>
        Class<span style=color:#f92672>&lt;?&gt;</span> c3 <span style=color:#f92672>=</span> Class<span style=color:#f92672>.</span><span style=color:#a6e22e>forName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;a.A&#34;</span><span style=color:#f92672>);</span>     动态加载类<span style=color:#960050;background-color:#1e0010>（</span>可能会抛出 ClassNotFoundException 异常<span style=color:#960050;background-color:#1e0010>）</span>

        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>c1<span style=color:#f92672>);</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>c2<span style=color:#f92672>);</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>c3<span style=color:#f92672>);</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>c1<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>());</span>     获得完全类名限定符
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>c1<span style=color:#f92672>.</span><span style=color:#a6e22e>getSimpleName</span><span style=color:#f92672>());</span>     获得类名
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>c1 <span style=color:#f92672>==</span> c2<span style=color:#f92672>);</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>c2 <span style=color:#f92672>==</span> c3<span style=color:#f92672>);</span>

        A a <span style=color:#f92672>=</span> c1<span style=color:#f92672>.</span><span style=color:#a6e22e>newInstance</span><span style=color:#f92672>();</span>     通过 Class 对象实例化类<span style=color:#960050;background-color:#1e0010>（</span>需要有无参构造方法<span style=color:#960050;background-color:#1e0010>）</span>

        A a <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> A<span style=color:#f92672>();</span>     a 是 A 的实例对象
        Class<span style=color:#f92672>&lt;</span>A<span style=color:#f92672>&gt;</span> c <span style=color:#f92672>=</span> A<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>;</span>     c 是 Class 的实例对象
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>a</span><span style=color:#f92672>.</span><span style=color:#a6e22e>A</span>
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>a</span><span style=color:#f92672>.</span><span style=color:#a6e22e>A</span>
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>a</span><span style=color:#f92672>.</span><span style=color:#a6e22e>A</span>
a<span style=color:#f92672>.</span><span style=color:#a6e22e>A</span>
A
<span style=color:#66d9ef>true</span>
<span style=color:#66d9ef>true</span>

Java 中的静态成员和基本数据类型不是面向对象的<span style=color:#960050;background-color:#1e0010>。</span>
</code></pre></div><h2 id=method-对象>Method 对象</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>package</span> a<span style=color:#f92672>;</span>

<span style=color:#f92672>import</span> java.lang.reflect.Method<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> java.util.Arrays<span style=color:#f92672>;</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        Class<span style=color:#f92672>&lt;</span>A<span style=color:#f92672>&gt;</span> c <span style=color:#f92672>=</span> A<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>;</span>
        Method<span style=color:#f92672>[]</span> methods1 <span style=color:#f92672>=</span> c<span style=color:#f92672>.</span><span style=color:#a6e22e>getMethods</span><span style=color:#f92672>();</span>     获得所有公有的方法<span style=color:#960050;background-color:#1e0010>（</span>包括继承<span style=color:#960050;background-color:#1e0010>）</span>
        Method<span style=color:#f92672>[]</span> methods2 <span style=color:#f92672>=</span> c<span style=color:#f92672>.</span><span style=color:#a6e22e>getDeclaredMethods</span><span style=color:#f92672>();</span>     获得所有自己的方法<span style=color:#960050;background-color:#1e0010>（</span>包括私有<span style=color:#960050;background-color:#1e0010>）</span>
        show<span style=color:#f92672>(</span>methods1<span style=color:#f92672>);</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>();</span>
        show<span style=color:#f92672>(</span>methods2<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>show</span><span style=color:#f92672>(</span>Method<span style=color:#f92672>[]</span> methods<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>Method method <span style=color:#f92672>:</span> methods<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            String methodName <span style=color:#f92672>=</span> method<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>();</span>     获得方法名
            String returnTypeName <span style=color:#f92672>=</span> method<span style=color:#f92672>.</span><span style=color:#a6e22e>getReturnType</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getSimpleName</span><span style=color:#f92672>();</span>     获得返回类型的类名
            Class<span style=color:#f92672>&lt;?&gt;[]</span> parameterTypes <span style=color:#f92672>=</span> method<span style=color:#f92672>.</span><span style=color:#a6e22e>getParameterTypes</span><span style=color:#f92672>();</span>     获得参数类型
            System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>methodName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;  &#34;</span> <span style=color:#f92672>+</span> returnTypeName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;  &#34;</span> <span style=color:#f92672>+</span> Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>(</span>parameterTypes<span style=color:#f92672>));</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
main  <span style=color:#66d9ef>void</span>  <span style=color:#f92672>[</span><span style=color:#66d9ef>class</span> <span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>Ljava</span><span style=color:#f92672>.</span><span style=color:#a6e22e>lang</span><span style=color:#f92672>.</span><span style=color:#a6e22e>String</span><span style=color:#f92672>;]</span>
wait  <span style=color:#66d9ef>void</span>  <span style=color:#f92672>[]</span>
wait  <span style=color:#66d9ef>void</span>  <span style=color:#f92672>[</span><span style=color:#66d9ef>long</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>]</span>
wait  <span style=color:#66d9ef>void</span>  <span style=color:#f92672>[</span><span style=color:#66d9ef>long</span><span style=color:#f92672>]</span>
equals  <span style=color:#66d9ef>boolean</span>  <span style=color:#f92672>[</span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>java</span><span style=color:#f92672>.</span><span style=color:#a6e22e>lang</span><span style=color:#f92672>.</span><span style=color:#a6e22e>Object</span><span style=color:#f92672>]</span>
toString  String  <span style=color:#f92672>[]</span>
hashCode  <span style=color:#66d9ef>int</span>  <span style=color:#f92672>[]</span>
getClass  Class  <span style=color:#f92672>[]</span>
notify  <span style=color:#66d9ef>void</span>  <span style=color:#f92672>[]</span>
notifyAll  <span style=color:#66d9ef>void</span>  <span style=color:#f92672>[]</span>

main  <span style=color:#66d9ef>void</span>  <span style=color:#f92672>[</span><span style=color:#66d9ef>class</span> <span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>Ljava</span><span style=color:#f92672>.</span><span style=color:#a6e22e>lang</span><span style=color:#f92672>.</span><span style=color:#a6e22e>String</span><span style=color:#f92672>;]</span>
show  <span style=color:#66d9ef>void</span>  <span style=color:#f92672>[</span><span style=color:#66d9ef>class</span> <span style=color:#960050;background-color:#1e0010>[</span><span style=color:#a6e22e>Ljava</span><span style=color:#f92672>.</span><span style=color:#a6e22e>lang</span><span style=color:#f92672>.</span><span style=color:#a6e22e>reflect</span><span style=color:#f92672>.</span><span style=color:#a6e22e>Method</span><span style=color:#f92672>;]</span>
</code></pre></div><h3 id=method-invoke>Method Invoke</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>package</span> a<span style=color:#f92672>;</span>

<span style=color:#f92672>import</span> java.lang.reflect.InvocationTargetException<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> java.lang.reflect.Method<span style=color:#f92672>;</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> IllegalAccessException<span style=color:#f92672>,</span> InstantiationException<span style=color:#f92672>,</span> NoSuchMethodException<span style=color:#f92672>,</span> InvocationTargetException <span style=color:#f92672>{</span>
        Class<span style=color:#f92672>&lt;</span>A<span style=color:#f92672>&gt;</span> c <span style=color:#f92672>=</span> A<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>;</span>
        A a <span style=color:#f92672>=</span> c<span style=color:#f92672>.</span><span style=color:#a6e22e>newInstance</span><span style=color:#f92672>();</span>     通过 Class 对象实例化类<span style=color:#960050;background-color:#1e0010>（</span>需要有无参构造方法<span style=color:#960050;background-color:#1e0010>）</span>
        Method print1 <span style=color:#f92672>=</span> c<span style=color:#f92672>.</span><span style=color:#a6e22e>getMethod</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;print&#34;</span><span style=color:#f92672>);</span>     获得公有方法
        Method print2 <span style=color:#f92672>=</span> c<span style=color:#f92672>.</span><span style=color:#a6e22e>getMethod</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;print&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
        Method print3 <span style=color:#f92672>=</span> c<span style=color:#f92672>.</span><span style=color:#a6e22e>getDeclaredMethod</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;print&#34;</span><span style=color:#f92672>,</span> String<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>     获得私有方法

<span style=color:#75715e>//      a.print();     正常调用方法
</span><span style=color:#75715e>//      a.print(1);
</span><span style=color:#75715e>//      a.print(&#34;A&#34;);
</span><span style=color:#75715e></span>        Object o1 <span style=color:#f92672>=</span> print1<span style=color:#f92672>.</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>(</span>a<span style=color:#f92672>);</span>     反射调用方法<span style=color:#960050;background-color:#1e0010>（</span>无返回值为 <span style=color:#66d9ef>null</span><span style=color:#960050;background-color:#1e0010>）</span>
        Object o2 <span style=color:#f92672>=</span> print2<span style=color:#f92672>.</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>(</span>a<span style=color:#f92672>,</span> 1<span style=color:#f92672>);</span>
        Object o3 <span style=color:#f92672>=</span> print3<span style=color:#f92672>.</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>(</span>a<span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;A&#34;</span><span style=color:#f92672>);</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>o1<span style=color:#f92672>);</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>o2<span style=color:#f92672>);</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>o3<span style=color:#f92672>);</span>

        正常调用方法<span style=color:#960050;background-color:#1e0010>：</span>A<span style=color:#f92672>.</span><span style=color:#a6e22e>B</span><span style=color:#f92672>(</span>C<span style=color:#f92672>);</span>
        反射调用方法<span style=color:#960050;background-color:#1e0010>：</span>B<span style=color:#f92672>.</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>(</span>A<span style=color:#f92672>,</span>C<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>print</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;A&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>print</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;B&#34;</span><span style=color:#f92672>);</span>
        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;B&#34;</span><span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>print</span><span style=color:#f92672>(</span>String s<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;C&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
A
B
C
<span style=color:#66d9ef>null</span>
B
<span style=color:#66d9ef>null</span>
</code></pre></div><h2 id=field-对象>Field 对象</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>package</span> a<span style=color:#f92672>;</span>

<span style=color:#f92672>import</span> java.lang.reflect.Field<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> java.lang.reflect.Modifier<span style=color:#f92672>;</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        Class<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> c <span style=color:#f92672>=</span> String<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>;</span>
        Field<span style=color:#f92672>[]</span> fields1 <span style=color:#f92672>=</span> c<span style=color:#f92672>.</span><span style=color:#a6e22e>getFields</span><span style=color:#f92672>();</span>     获得所有公有的属性<span style=color:#960050;background-color:#1e0010>（</span>包括继承<span style=color:#960050;background-color:#1e0010>）</span>
        Field<span style=color:#f92672>[]</span> fields2 <span style=color:#f92672>=</span> c<span style=color:#f92672>.</span><span style=color:#a6e22e>getDeclaredFields</span><span style=color:#f92672>();</span>     获得所有自己的属性<span style=color:#960050;background-color:#1e0010>（</span>包括私有<span style=color:#960050;background-color:#1e0010>）</span>

        show<span style=color:#f92672>(</span>fields1<span style=color:#f92672>);</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>();</span>
        show<span style=color:#f92672>(</span>fields2<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>show</span><span style=color:#f92672>(</span>Field<span style=color:#f92672>[]</span> fields<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>Field field <span style=color:#f92672>:</span> fields<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            String fieldName <span style=color:#f92672>=</span> field<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>();</span>     获得属性名
            String fieldTypeName <span style=color:#f92672>=</span> field<span style=color:#f92672>.</span><span style=color:#a6e22e>getType</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getSimpleName</span><span style=color:#f92672>();</span>     获得属性类型的类名
            String modifiers <span style=color:#f92672>=</span> Modifier<span style=color:#f92672>.</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>(</span>field<span style=color:#f92672>.</span><span style=color:#a6e22e>getModifiers</span><span style=color:#f92672>());</span>     获得访问修饰符
            System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>fieldName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;  &#34;</span> <span style=color:#f92672>+</span> fieldTypeName<span style=color:#f92672>);</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
CASE_INSENSITIVE_ORDER  Comparator

value  <span style=color:#66d9ef>char</span><span style=color:#f92672>[]</span>
hash  <span style=color:#66d9ef>int</span>
serialVersionUID  <span style=color:#66d9ef>long</span>
serialPersistentFields  ObjectStreamField<span style=color:#f92672>[]</span>
CASE_INSENSITIVE_ORDER  Comparator
</code></pre></div><h2 id=constructor-对象>Constructor 对象</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>package</span> a<span style=color:#f92672>;</span>

<span style=color:#f92672>import</span> java.lang.reflect.Constructor<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> java.util.Arrays<span style=color:#f92672>;</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        Class<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span> c <span style=color:#f92672>=</span> Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>;</span>
        Constructor<span style=color:#f92672>&lt;?&gt;[]</span> constructors1 <span style=color:#f92672>=</span> c<span style=color:#f92672>.</span><span style=color:#a6e22e>getConstructors</span><span style=color:#f92672>();</span>     获得所有公有构造方法
        Constructor<span style=color:#f92672>&lt;?&gt;[]</span> constructors2 <span style=color:#f92672>=</span> c<span style=color:#f92672>.</span><span style=color:#a6e22e>getDeclaredConstructors</span><span style=color:#f92672>();</span>     获得所有构造方法<span style=color:#960050;background-color:#1e0010>（</span>包括私有<span style=color:#960050;background-color:#1e0010>）</span>

        show<span style=color:#f92672>(</span>constructors1<span style=color:#f92672>);</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>();</span>
        show<span style=color:#f92672>(</span>constructors2<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>show</span><span style=color:#f92672>(</span>Constructor<span style=color:#f92672>&lt;?&gt;[]</span> constructors<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>Constructor<span style=color:#f92672>&lt;?&gt;</span> constructor <span style=color:#f92672>:</span> constructors<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            String constructorName <span style=color:#f92672>=</span> constructor<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>();</span>     获得方法名
            Class<span style=color:#f92672>&lt;?&gt;[]</span> parameterTypes <span style=color:#f92672>=</span> constructor<span style=color:#f92672>.</span><span style=color:#a6e22e>getParameterTypes</span><span style=color:#f92672>();</span>     获得参数类型
            System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>constructorName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;  &#34;</span> <span style=color:#f92672>+</span> Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>(</span>parameterTypes<span style=color:#f92672>));</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
java<span style=color:#f92672>.</span><span style=color:#a6e22e>lang</span><span style=color:#f92672>.</span><span style=color:#a6e22e>Integer</span>  <span style=color:#f92672>[</span><span style=color:#66d9ef>int</span><span style=color:#f92672>]</span>
java<span style=color:#f92672>.</span><span style=color:#a6e22e>lang</span><span style=color:#f92672>.</span><span style=color:#a6e22e>Integer</span>  <span style=color:#f92672>[</span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>java</span><span style=color:#f92672>.</span><span style=color:#a6e22e>lang</span><span style=color:#f92672>.</span><span style=color:#a6e22e>String</span><span style=color:#f92672>]</span>

java<span style=color:#f92672>.</span><span style=color:#a6e22e>lang</span><span style=color:#f92672>.</span><span style=color:#a6e22e>Integer</span>  <span style=color:#f92672>[</span><span style=color:#66d9ef>int</span><span style=color:#f92672>]</span>
java<span style=color:#f92672>.</span><span style=color:#a6e22e>lang</span><span style=color:#f92672>.</span><span style=color:#a6e22e>Integer</span>  <span style=color:#f92672>[</span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>java</span><span style=color:#f92672>.</span><span style=color:#a6e22e>lang</span><span style=color:#f92672>.</span><span style=color:#a6e22e>String</span><span style=color:#f92672>]</span>
</code></pre></div><h2 id=通过反射理解泛型本质>通过反射理解泛型本质</h2><ol><li>反射的操作都是在<strong>运行时刻</strong>进行。</li><li><strong>编译之后</strong>的集合会<strong>去掉泛型约束</strong>。</li></ol><ul><li>泛型约束只在编译阶段有效。</li></ul><ol start=3><li>绕过编译 ➜ 绕过泛型。</li></ol><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>import</span> java.lang.reflect.InvocationTargetException<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> java.lang.reflect.Method<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> java.util.ArrayList<span style=color:#f92672>;</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> NoSuchMethodException<span style=color:#f92672>,</span> InvocationTargetException<span style=color:#f92672>,</span> IllegalAccessException <span style=color:#f92672>{</span>
        ArrayList<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span> list <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;();</span>
        list<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>1<span style=color:#f92672>);</span>
<span style=color:#75715e>//      list.add(&#34;A&#34;);     错误（泛型约束）
</span><span style=color:#75715e></span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>list<span style=color:#f92672>);</span>

        Class<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>extends</span> ArrayList<span style=color:#f92672>&gt;</span> c <span style=color:#f92672>=</span> list<span style=color:#f92672>.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>();</span>
        Method add <span style=color:#f92672>=</span> c<span style=color:#f92672>.</span><span style=color:#a6e22e>getMethod</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;add&#34;</span><span style=color:#f92672>,</span> Object<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
        add<span style=color:#f92672>.</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>(</span>list<span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;A&#34;</span><span style=color:#f92672>);</span>

        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>list<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
<span style=color:#f92672>[</span>1<span style=color:#f92672>]</span>
<span style=color:#f92672>[</span>1<span style=color:#f92672>,</span> A<span style=color:#f92672>]</span>
</code></pre></div></div><div class=sharing style=text-align:center><br><p>捐赠支持</p><p>如果我的文章对你有所帮助，欢迎通过支付宝的扫一扫，轻松的向我发起捐助。</p><p>对于你的支持，我会心怀感激且倍感荣幸地接受，并继续努力。</p><img src=https://ww4.sinaimg.cn/large/a15b4afegw1fbn096ql6dj20dw0dwwe9.jpg alt title data-action=zoom width=40%><p></p><br>&copy; 2015-2020 XhstormR</div></div></div></div><div id=backtop><a href=# title>TOP</a></div><nav id=TableOfContents><ul><li><a href=#class-对象>Class 对象</a></li><li><a href=#method-对象>Method 对象</a><ul><li><a href=#method-invoke>Method Invoke</a></li></ul></li><li><a href=#field-对象>Field 对象</a></li><li><a href=#constructor-对象>Constructor 对象</a></li><li><a href=#通过反射理解泛型本质>通过反射理解泛型本质</a></li></ul></nav><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/languages/yaml.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/languages/kotlin.min.js></script><script>hljs.initHighlightingOnLoad()</script><script src=https://blog.xhstormr.tk/js/zoom.min.js></script><script>window.addEventListener("load",show),window.onscroll=show;function show(){document.documentElement.scrollTop+document.body.scrollTop>300?document.getElementById("backtop").style.display="block":document.getElementById("backtop").style.display="none"}</script><script type=text/javascript color=0,0,0 opacity=1 zindex=-2 count=49 src=https://cdnjs.cloudflare.com/ajax/libs/canvas-nest.js/2.0.4/canvas-nest.js></script></body></html>