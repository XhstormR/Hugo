<!doctype html><html lang=zh-cn manifest=https://blog.xhstormr.tk/offline.appcache><head><meta charset=utf-8><meta name=renderer content="webkit"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>RxJava &#183; XhstormR</title><link rel=alternate type=application/rss+xml title=XhstormR href><link rel=icon type=image/x-icon href=https://blog.xhstormr.tk/favicon.ico><link rel=stylesheet href=https://blog.xhstormr.tk/css/uno.min.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/monokai-sublime.min.css><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js></script><script src=https://blog.xhstormr.tk/js/main.min.js async defer></script></head><body><div id=scriptHeader><span class="mobile btn-mobile-menu"><i class="fa fa-bars btn-mobile-menu__icon"></i>
<i class="fa fa-times btn-mobile-close__icon hidden"></i></span><header class="panel-cover panel-cover--collapsed"><div class=panel-main><div class="panel-main__inner panel-inverted"><div class=panel-main__content><h1 class="panel-cover__title panel-title"><a href=https://blog.xhstormr.tk/ title="link to homepage for XhstormR">XhstormR</a></h1><hr class=panel-cover__divider><p class=panel-cover__description>On a dark desert highway, cool wind in my hair.</p><hr class="panel-cover__divider panel-cover__divider--secondary"><div class=navigation-wrapper><nav class="cover-navigation cover-navigation--primary"><ul class=navigation><li class=navigation__item><a href=https://blog.xhstormr.tk#blog title="link to XhstormR blog" class=blog-button>Blog</a></li></ul></nav></div></div></div><div class=panel-cover--overlay></div></div></header></div><div class=bodytop><div class=content-wrapper><div class=content-wrapper__inner><div class=post><h1>RxJava</h1><span class=post-date>2016-11-13</span><p>Updated on 2016-11-22</p><blockquote><p style=text-align:center><img data-src=/uploads/java-rxjava.png alt title=RxJava data-action=zoom width></p><script>[].forEach.call(document.querySelectorAll("img[data-src]"),function(a){a.setAttribute("src",a.getAttribute("data-src")),a.onload=function(){a.removeAttribute("data-src")}})</script><p>观察者模式</p><p>响应式编程
|
函数式编程</p><p><a href=https://github.com/ReactiveX/RxJava>https://github.com/ReactiveX/RxJava</a></p><p><a href=http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Observable.html>http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Observable.html</a></p><p><a href=http://reactivex.io/documentation/operators.html>Operators</a>
|
<a href=http://rxmarbles.com/>Operators</a></p><p><a href=https://mcxiaoke.gitbooks.io/rxdocs/content/>Book</a>
|
<a href=https://rxjava.yuxingxin.com/>Book</a></p></blockquote><h2 id=java-native>Java Native</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>import</span> java.util.Observable<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> java.util.Observer<span style=color:#f92672>;</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Main</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        Subject subject <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Subject<span style=color:#f92672>();</span>
        Consumer consumer <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Consumer<span style=color:#f92672>();</span>

        subject<span style=color:#f92672>.</span><span style=color:#a6e22e>addObserver</span><span style=color:#f92672>(</span>consumer<span style=color:#f92672>);</span> <span style=color:#75715e>// 被观察者添加观察者
</span><span style=color:#75715e></span>
        subject<span style=color:#f92672>.</span><span style=color:#a6e22e>setData</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;123&#34;</span><span style=color:#f92672>);</span>
        subject<span style=color:#f92672>.</span><span style=color:#a6e22e>setData</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;123&#34;</span><span style=color:#f92672>);</span>
        subject<span style=color:#f92672>.</span><span style=color:#a6e22e>setData</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;456&#34;</span><span style=color:#f92672>);</span>
        subject<span style=color:#f92672>.</span><span style=color:#a6e22e>setData</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;456&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Subject</span> <span style=color:#66d9ef>extends</span> Observable <span style=color:#f92672>{</span> <span style=color:#75715e>// 被观察者需要继承类
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>private</span> String data <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>;</span>

        <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getData</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
            <span style=color:#66d9ef>return</span> data<span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>

        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setData</span><span style=color:#f92672>(</span>String data<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>data <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>||</span> <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>data</span><span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>data<span style=color:#f92672>))</span> <span style=color:#66d9ef>return</span><span style=color:#f92672>;</span> <span style=color:#75715e>// 过滤无效数据
</span><span style=color:#75715e></span>
            <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> data<span style=color:#f92672>;</span>
            setChanged<span style=color:#f92672>();</span> <span style=color:#75715e>// 设置 flag
</span><span style=color:#75715e></span>            notifyObservers<span style=color:#f92672>(</span>data<span style=color:#f92672>);</span> <span style=color:#75715e>// 通知观察者
</span><span style=color:#75715e></span>        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Consumer</span> <span style=color:#66d9ef>implements</span> Observer <span style=color:#f92672>{</span> <span style=color:#75715e>// 观察者需要实现接口
</span><span style=color:#75715e></span>        <span style=color:#a6e22e>@Override</span>
        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>update</span><span style=color:#f92672>(</span>Observable o<span style=color:#f92672>,</span> Object arg<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Update: &#34;</span> <span style=color:#f92672>+</span> arg<span style=color:#f92672>);</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
Update: 123
Update: 456
</code></pre></div><h2 id=observable---被观察者>Observable - 被观察者</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>Observable<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> observable <span style=color:#f92672>=</span> Observable<span style=color:#f92672>.</span><span style=color:#a6e22e>create</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Observable<span style=color:#f92672>.</span><span style=color:#a6e22e>OnSubscribe</span><span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;()</span> <span style=color:#f92672>{</span>     传入 OnSubscribe<span style=color:#960050;background-color:#1e0010>，</span>描述事件
    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>call</span><span style=color:#f92672>(</span>Subscriber<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>super</span> String<span style=color:#f92672>&gt;</span> subscriber<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     作为参数传入的观察者
        subscriber<span style=color:#f92672>.</span><span style=color:#a6e22e>onNext</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;A&#34;</span><span style=color:#f92672>);</span>     事件
        subscriber<span style=color:#f92672>.</span><span style=color:#a6e22e>onNext</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;B&#34;</span><span style=color:#f92672>);</span>
        subscriber<span style=color:#f92672>.</span><span style=color:#a6e22e>onNext</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;C&#34;</span><span style=color:#f92672>);</span>
        subscriber<span style=color:#f92672>.</span><span style=color:#a6e22e>onCompleted</span><span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>});</span>

<span style=color:#f92672>----</span>

Observable<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> observable <span style=color:#f92672>=</span> Observable<span style=color:#f92672>.</span><span style=color:#a6e22e>create</span><span style=color:#f92672>(</span>subscriber <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>{</span>     简化为 Lambda 表达式
    subscriber<span style=color:#f92672>.</span><span style=color:#a6e22e>onNext</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;A&#34;</span><span style=color:#f92672>);</span>
    subscriber<span style=color:#f92672>.</span><span style=color:#a6e22e>onNext</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;B&#34;</span><span style=color:#f92672>);</span>
    subscriber<span style=color:#f92672>.</span><span style=color:#a6e22e>onNext</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;C&#34;</span><span style=color:#f92672>);</span>
    subscriber<span style=color:#f92672>.</span><span style=color:#a6e22e>onCompleted</span><span style=color:#f92672>();</span>
<span style=color:#f92672>});</span>

<span style=color:#f92672>-------------------------------------------------------</span>

Observable<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> observable <span style=color:#f92672>=</span> Observable<span style=color:#f92672>.</span><span style=color:#a6e22e>just</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;A&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;B&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;C&#34;</span><span style=color:#f92672>);</span>     快捷方式

<span style=color:#f92672>-------------------------------------------------------</span>

List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> list <span style=color:#f92672>=</span> Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>asList</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;A&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;B&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;C&#34;</span><span style=color:#f92672>);</span>
Observable<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> observable <span style=color:#f92672>=</span> Observable<span style=color:#f92672>.</span><span style=color:#a6e22e>from</span><span style=color:#f92672>(</span>list<span style=color:#f92672>);</span>     快捷方式

<span style=color:#f92672>-------------------------------------------------------</span>

observable<span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>observer<span style=color:#f92672>);</span>     被观察者订阅观察者<span style=color:#960050;background-color:#1e0010>（</span>观察者见下文<span style=color:#960050;background-color:#1e0010>）</span>
<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
A
B
C
onCompleted

Note<span style=color:#960050;background-color:#1e0010>：</span>
0<span style=color:#f92672>.</span> 被观察者发出事件<span style=color:#960050;background-color:#1e0010>，</span>观察者处理事件<span style=color:#960050;background-color:#1e0010>。（</span>可一对多<span style=color:#960050;background-color:#1e0010>）</span>
1<span style=color:#f92672>.</span> 一旦被观察者调用 <span style=color:#a6e22e>subscribe</span><span style=color:#f92672>()</span> 方法订阅观察者<span style=color:#960050;background-color:#1e0010>，</span>被观察者中的唯一成员 OnSubscribe 将执行 <span style=color:#a6e22e>call</span><span style=color:#f92672>()</span> 方法并将观察者作为参数传入<span style=color:#960050;background-color:#1e0010>。</span>
2<span style=color:#f92672>.</span> 调用 <span style=color:#a6e22e>subscribe</span><span style=color:#f92672>()</span> 方法后会返回 Subscription 接口对象<span style=color:#960050;background-color:#1e0010>（</span>仅含 2 个方法 unsubscribe 和 isUnsubscribed<span style=color:#960050;background-color:#1e0010>），</span>代表被观察者与观察者之间的订阅关系<span style=color:#960050;background-color:#1e0010>。</span>
</code></pre></div><h2 id=observer---观察者>Observer - 观察者</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>Observer<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> observer <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Observer<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;()</span> <span style=color:#f92672>{</span>     接口<span style=color:#960050;background-color:#1e0010>（</span>最终会被包装为 Subscriber<span style=color:#960050;background-color:#1e0010>）</span>
    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onCompleted</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>     完成事件<span style=color:#960050;background-color:#1e0010>（</span>调用链结束<span style=color:#960050;background-color:#1e0010>）</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;onCompleted&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onError</span><span style=color:#f92672>(</span>Throwable e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     出现异常<span style=color:#960050;background-color:#1e0010>，</span>框架自动调用<span style=color:#960050;background-color:#1e0010>（</span>调用链结束<span style=color:#960050;background-color:#1e0010>）</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;onError&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onNext</span><span style=color:#f92672>(</span>String s<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     处理事件
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>s<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>};</span>

<span style=color:#f92672>-------------------------------------------------------</span>

Subscriber<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> subscriber <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Subscriber<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;()</span> <span style=color:#f92672>{</span>     抽象类<span style=color:#960050;background-color:#1e0010>（</span>继承但未实现 Observer 接口<span style=color:#960050;background-color:#1e0010>，</span>且可选择性重写 onStart 方法<span style=color:#960050;background-color:#1e0010>）</span>
    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onCompleted</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>     完成事件<span style=color:#960050;background-color:#1e0010>（</span>调用链结束<span style=color:#960050;background-color:#1e0010>）</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;onCompleted&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onError</span><span style=color:#f92672>(</span>Throwable e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     出现异常<span style=color:#960050;background-color:#1e0010>，</span>框架自动调用<span style=color:#960050;background-color:#1e0010>（</span>调用链结束<span style=color:#960050;background-color:#1e0010>）</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;onError&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onNext</span><span style=color:#f92672>(</span>String s<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     处理事件
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>s<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>};</span>

调用链<span style=color:#960050;background-color:#1e0010>：</span>onStart<span style=color:#f92672>()</span> <span style=color:#f92672>--&gt;</span> onNext<span style=color:#f92672>()</span> <span style=color:#f92672>--&gt;</span> onCompleted<span style=color:#f92672>()</span>
   <span style=color:#f92672>|</span>       <span style=color:#f92672>|</span>                   <span style=color:#960050;background-color:#1e0010>↳</span> onError<span style=color:#f92672>()</span>
   <span style=color:#f92672>|</span>       <span style=color:#960050;background-color:#1e0010>↳</span> 此方法只能在调用 <span style=color:#a6e22e>subscribe</span><span style=color:#f92672>()</span> 的线程上执行<span style=color:#960050;background-color:#1e0010>，</span>可通过操作符 <span style=color:#a6e22e>doOnSubscribe</span><span style=color:#f92672>(</span>Action0<span style=color:#f92672>)</span> 替代且可指定运行线程
   <span style=color:#960050;background-color:#1e0010>↳</span> 当调用链结束后<span style=color:#960050;background-color:#1e0010>，</span>订阅关系自动解除<span style=color:#960050;background-color:#1e0010>（</span>Subscription<span style=color:#f92672>.</span><span style=color:#a6e22e>isUnsubscribed</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span><span style=color:#960050;background-color:#1e0010>）</span>
<span style=color:#f92672>-------------------------------------------------------</span>

Action1<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> action1 <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Action1<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;()</span> <span style=color:#f92672>{</span>     快捷方式<span style=color:#960050;background-color:#1e0010>（</span>被观察者的 <span style=color:#a6e22e>subscribe</span><span style=color:#f92672>()</span> 方法支持传入 Action1 接口充当 onNext<span style=color:#960050;background-color:#1e0010>）</span>
    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>call</span><span style=color:#f92672>(</span>String s<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>s<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>};</span>

<span style=color:#f92672>----</span>

Action1<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> action1 <span style=color:#f92672>=</span> s <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>s<span style=color:#f92672>);</span>     简化为 Lambda 表达式
Action1<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> action1 <span style=color:#f92672>=</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>;</span>     简化为方法引用
</code></pre></div><h2 id=scheduler---线程调度>Scheduler - 线程调度</h2><p>默认情况下调用链（事件流）在调用 subscribe() 的线程上运行，可以通过以下 2 种方法指定运行线程：</p><ul><li>（一次）<code>subscribeOn()</code>：指定其运行线程。</li><li>（多次）<code>observeOn()</code>：切换其运行线程。<ul><li><code>subscribeOn()</code> 用于指定最开始调用链（事件流）的运行线程，后期可通过 <code>observeOn()</code> 随时切换其运行线程。</li></ul></li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>Observable
        <span style=color:#f92672>.</span><span style=color:#a6e22e>create</span><span style=color:#f92672>((</span>Observable<span style=color:#f92672>.</span><span style=color:#a6e22e>OnSubscribe</span><span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;)</span> subscriber <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>{</span>
            Log<span style=color:#f92672>.</span><span style=color:#a6e22e>w</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Tag&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;create__&#34;</span> <span style=color:#f92672>+</span> Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>().</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>());</span>
            subscriber<span style=color:#f92672>.</span><span style=color:#a6e22e>onNext</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>);</span>
            subscriber<span style=color:#f92672>.</span><span style=color:#a6e22e>onCompleted</span><span style=color:#f92672>();</span>
        <span style=color:#f92672>})</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>observeOn</span><span style=color:#f92672>(</span>Schedulers<span style=color:#f92672>.</span><span style=color:#a6e22e>computation</span><span style=color:#f92672>())</span>     切换至计算线程 <span style=color:#f92672>(</span>2<span style=color:#f92672>)</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>s <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>{</span>
            Log<span style=color:#f92672>.</span><span style=color:#a6e22e>w</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Tag&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;map__&#34;</span> <span style=color:#f92672>+</span> Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>().</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>());</span>
            <span style=color:#66d9ef>return</span> s<span style=color:#f92672>;</span>
        <span style=color:#f92672>})</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>observeOn</span><span style=color:#f92672>(</span>AndroidSchedulers<span style=color:#f92672>.</span><span style=color:#a6e22e>mainThread</span><span style=color:#f92672>())</span>     切换至主线程 <span style=color:#f92672>(</span>3<span style=color:#f92672>)</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribeOn</span><span style=color:#f92672>(</span>Schedulers<span style=color:#f92672>.</span><span style=color:#a6e22e>io</span><span style=color:#f92672>())</span>     指定最开始在IO线程中运行 <span style=color:#f92672>(</span>1<span style=color:#f92672>)</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Subscriber<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;()</span> <span style=color:#f92672>{</span>
            <span style=color:#a6e22e>@Override</span>
            <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onCompleted</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
                Log<span style=color:#f92672>.</span><span style=color:#a6e22e>w</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Tag&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;onCompleted__&#34;</span> <span style=color:#f92672>+</span> Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>().</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>());</span>
            <span style=color:#f92672>}</span>

            <span style=color:#a6e22e>@Override</span>
            <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onError</span><span style=color:#f92672>(</span>Throwable e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
                Log<span style=color:#f92672>.</span><span style=color:#a6e22e>w</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Tag&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;onError&#34;</span><span style=color:#f92672>);</span>
            <span style=color:#f92672>}</span>

            <span style=color:#a6e22e>@Override</span>
            <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onNext</span><span style=color:#f92672>(</span>String s<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
                Log<span style=color:#f92672>.</span><span style=color:#a6e22e>w</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Tag&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;onNext__&#34;</span> <span style=color:#f92672>+</span> Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>().</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>());</span>
            <span style=color:#f92672>}</span>
        <span style=color:#f92672>});</span>
<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
23701<span style=color:#f92672>-</span>14945<span style=color:#f92672>/</span>com<span style=color:#f92672>.</span><span style=color:#a6e22e>example</span><span style=color:#f92672>.</span><span style=color:#a6e22e>myapp</span><span style=color:#f92672>.</span><span style=color:#a6e22e>myapplication</span> W<span style=color:#f92672>/</span>Tag<span style=color:#f92672>:</span> create__Thread<span style=color:#f92672>[</span>RxIoScheduler<span style=color:#f92672>-</span>3<span style=color:#f92672>,</span>5<span style=color:#f92672>,</span>main<span style=color:#f92672>]</span>     IO 线程
23701<span style=color:#f92672>-</span>23824<span style=color:#f92672>/</span>com<span style=color:#f92672>.</span><span style=color:#a6e22e>example</span><span style=color:#f92672>.</span><span style=color:#a6e22e>myapp</span><span style=color:#f92672>.</span><span style=color:#a6e22e>myapplication</span> W<span style=color:#f92672>/</span>Tag<span style=color:#f92672>:</span> map__Thread<span style=color:#f92672>[</span>RxComputationScheduler<span style=color:#f92672>-</span>2<span style=color:#f92672>,</span>5<span style=color:#f92672>,</span>main<span style=color:#f92672>]</span>     计算线程
23701<span style=color:#f92672>-</span>23701<span style=color:#f92672>/</span>com<span style=color:#f92672>.</span><span style=color:#a6e22e>example</span><span style=color:#f92672>.</span><span style=color:#a6e22e>myapp</span><span style=color:#f92672>.</span><span style=color:#a6e22e>myapplication</span> W<span style=color:#f92672>/</span>Tag<span style=color:#f92672>:</span> onNext__Thread<span style=color:#f92672>[</span>main<span style=color:#f92672>,</span>5<span style=color:#f92672>,</span>main<span style=color:#f92672>]</span>     主线程
23701<span style=color:#f92672>-</span>23701<span style=color:#f92672>/</span>com<span style=color:#f92672>.</span><span style=color:#a6e22e>example</span><span style=color:#f92672>.</span><span style=color:#a6e22e>myapp</span><span style=color:#f92672>.</span><span style=color:#a6e22e>myapplication</span> W<span style=color:#f92672>/</span>Tag<span style=color:#f92672>:</span> onCompleted__Thread<span style=color:#f92672>[</span>main<span style=color:#f92672>,</span>5<span style=color:#f92672>,</span>main<span style=color:#f92672>]</span>     主线程

<span style=color:#f92672>-------------------------------------------------------</span>

实例<span style=color:#960050;background-color:#1e0010>：</span>加载网络图片
<span style=color:#f92672>----</span>
Observable
        <span style=color:#f92672>.</span><span style=color:#a6e22e>just</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;http://blog.xhstormr.tk/uploads/children-of-the-sun1.jpg&#34;</span><span style=color:#f92672>)</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>s <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>{</span>     下载 Bitmap<span style=color:#960050;background-color:#1e0010>（</span>String <span style=color:#960050;background-color:#1e0010>➜</span> Bitmap<span style=color:#960050;background-color:#1e0010>）</span>
            Bitmap bitmap <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
            <span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>BufferedInputStream bufferedInputStream <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> BufferedInputStream<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> URL<span style=color:#f92672>(</span>s<span style=color:#f92672>).</span><span style=color:#a6e22e>openStream</span><span style=color:#f92672>()))</span> <span style=color:#f92672>{</span>
                bitmap <span style=color:#f92672>=</span> BitmapFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>decodeStream</span><span style=color:#f92672>(</span>bufferedInputStream<span style=color:#f92672>);</span>
            <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>IOException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
                e<span style=color:#f92672>.</span><span style=color:#a6e22e>printStackTrace</span><span style=color:#f92672>();</span>
            <span style=color:#f92672>}</span>
            <span style=color:#66d9ef>return</span> bitmap<span style=color:#f92672>;</span>
        <span style=color:#f92672>})</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>observeOn</span><span style=color:#f92672>(</span>AndroidSchedulers<span style=color:#f92672>.</span><span style=color:#a6e22e>mainThread</span><span style=color:#f92672>())</span>     切换至主线程 <span style=color:#f92672>(</span>2<span style=color:#f92672>)</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribeOn</span><span style=color:#f92672>(</span>Schedulers<span style=color:#f92672>.</span><span style=color:#a6e22e>io</span><span style=color:#f92672>())</span>     指定最开始在IO线程中运行 <span style=color:#f92672>(</span>1<span style=color:#f92672>)</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>bitmap <span style=color:#f92672>-&gt;</span> mImageView<span style=color:#f92672>.</span><span style=color:#a6e22e>setImageBitmap</span><span style=color:#f92672>(</span>bitmap<span style=color:#f92672>));</span>     加载 Bitmap
</code></pre></div><h2 id=operators---操作符>Operators - 操作符</h2><p>类似于 Java 8 中的 Stream 的内部迭代。</p><h3 id=转换>转换</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> List<span style=color:#f92672>&lt;</span>Author<span style=color:#f92672>&gt;</span> LIST <span style=color:#f92672>=</span> Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>asList</span><span style=color:#f92672>(</span>
            <span style=color:#66d9ef>new</span> Author<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Adam&#34;</span><span style=color:#f92672>,</span> 23<span style=color:#f92672>,</span> Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>asList</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Java1&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;Java2&#34;</span><span style=color:#f92672>)),</span>
            <span style=color:#66d9ef>new</span> Author<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Bell&#34;</span><span style=color:#f92672>,</span> 19<span style=color:#f92672>,</span> Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>asList</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Python1&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;Python2&#34;</span><span style=color:#f92672>)),</span>
            <span style=color:#66d9ef>new</span> Author<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Conan&#34;</span><span style=color:#f92672>,</span> 23<span style=color:#f92672>,</span> Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>asList</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;PHP1&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;PHP2&#34;</span><span style=color:#f92672>)),</span>
            <span style=color:#66d9ef>new</span> Author<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;David&#34;</span><span style=color:#f92672>,</span> 26<span style=color:#f92672>,</span> Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>asList</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Ruby1&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;Ruby2&#34;</span><span style=color:#f92672>)));</span>     作家列表

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        Observable
                <span style=color:#f92672>.</span><span style=color:#a6e22e>from</span><span style=color:#f92672>(</span>LIST<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>author <span style=color:#f92672>-&gt;</span> author<span style=color:#f92672>.</span><span style=color:#a6e22e>mAge</span><span style=color:#f92672>)</span>     一对一
                <span style=color:#f92672>.</span><span style=color:#a6e22e>sorted</span><span style=color:#f92672>()</span>     排序
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>integer <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>print</span><span style=color:#f92672>(</span>integer <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; &#34;</span><span style=color:#f92672>),</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;\n————————————&#34;</span><span style=color:#f92672>));</span>
        Observable
                <span style=color:#f92672>.</span><span style=color:#a6e22e>from</span><span style=color:#f92672>(</span>LIST<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>author <span style=color:#f92672>-&gt;</span> author<span style=color:#f92672>.</span><span style=color:#a6e22e>mAge</span><span style=color:#f92672>)</span>     一对一
                <span style=color:#f92672>.</span><span style=color:#a6e22e>sorted</span><span style=color:#f92672>()</span>     排序
                <span style=color:#f92672>.</span><span style=color:#a6e22e>scan</span><span style=color:#f92672>(</span>0<span style=color:#f92672>,</span> <span style=color:#f92672>(</span>i1<span style=color:#f92672>,</span> i2<span style=color:#f92672>)</span> <span style=color:#f92672>-&gt;</span> i1 <span style=color:#f92672>+</span> i2<span style=color:#f92672>)</span>     累加器<span style=color:#960050;background-color:#1e0010>，</span>提供初始值
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>integer <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>print</span><span style=color:#f92672>(</span>integer <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; &#34;</span><span style=color:#f92672>),</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;\n————————————&#34;</span><span style=color:#f92672>));</span>
        Observable
                <span style=color:#f92672>.</span><span style=color:#a6e22e>from</span><span style=color:#f92672>(</span>LIST<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>author <span style=color:#f92672>-&gt;</span> author<span style=color:#f92672>.</span><span style=color:#a6e22e>mAge</span><span style=color:#f92672>)</span>     一对一
                <span style=color:#f92672>.</span><span style=color:#a6e22e>reduce</span><span style=color:#f92672>(</span>0<span style=color:#f92672>,</span> <span style=color:#f92672>(</span>i1<span style=color:#f92672>,</span> i2<span style=color:#f92672>)</span> <span style=color:#f92672>-&gt;</span> i1 <span style=color:#f92672>+</span> i2<span style=color:#f92672>)</span>     累加器<span style=color:#960050;background-color:#1e0010>，</span>提供初始值
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>integer <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>print</span><span style=color:#f92672>(</span>integer <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; &#34;</span><span style=color:#f92672>),</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;\n————————————&#34;</span><span style=color:#f92672>));</span>
        Observable
                <span style=color:#f92672>.</span><span style=color:#a6e22e>from</span><span style=color:#f92672>(</span>LIST<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>flatMap</span><span style=color:#f92672>(</span>author <span style=color:#f92672>-&gt;</span> Observable<span style=color:#f92672>.</span><span style=color:#a6e22e>from</span><span style=color:#f92672>(</span>author<span style=color:#f92672>.</span><span style=color:#a6e22e>mArticle</span><span style=color:#f92672>))</span>     一对多<span style=color:#960050;background-color:#1e0010>（</span>手动转换为 Observable<span style=color:#960050;background-color:#1e0010>）（</span>推荐使用 concatMap<span style=color:#960050;background-color:#1e0010>，</span>解决 flatMap 事件交叉问题<span style=color:#960050;background-color:#1e0010>）（</span>flatMap<span style=color:#f92672>()</span> 底层调用 <span style=color:#a6e22e>merge</span><span style=color:#f92672>()</span><span style=color:#960050;background-color:#1e0010>，</span>concatMap 底层调用 <span style=color:#a6e22e>concat</span><span style=color:#f92672>()</span><span style=color:#960050;background-color:#1e0010>，</span>下同<span style=color:#960050;background-color:#1e0010>）</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;————————————&#34;</span><span style=color:#f92672>));</span>
        Observable
                <span style=color:#f92672>.</span><span style=color:#a6e22e>from</span><span style=color:#f92672>(</span>LIST<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>flatMapIterable</span><span style=color:#f92672>(</span>author <span style=color:#f92672>-&gt;</span> author<span style=color:#f92672>.</span><span style=color:#a6e22e>mArticle</span><span style=color:#f92672>)</span>     一对多<span style=color:#960050;background-color:#1e0010>（</span>自动转换为 Observable<span style=color:#960050;background-color:#1e0010>）（</span>推荐使用 concatMapIterable<span style=color:#960050;background-color:#1e0010>，</span>解决 flatMapIterable 事件交叉问题<span style=color:#960050;background-color:#1e0010>）</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;————————————&#34;</span><span style=color:#f92672>));</span>
        Observable
                <span style=color:#f92672>.</span><span style=color:#a6e22e>from</span><span style=color:#f92672>(</span>LIST<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>groupBy</span><span style=color:#f92672>(</span>author <span style=color:#f92672>-&gt;</span> author<span style=color:#f92672>.</span><span style=color:#a6e22e>mAge</span><span style=color:#f92672>)</span>     按年龄将事件流分组
                <span style=color:#f92672>.</span><span style=color:#a6e22e>concatMap</span><span style=color:#f92672>(</span>groupedObservable <span style=color:#f92672>-&gt;</span> groupedObservable<span style=color:#f92672>)</span>     一对多
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>author <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>printf</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;年龄:%d 姓名:%s\n&#34;</span><span style=color:#f92672>,</span> author<span style=color:#f92672>.</span><span style=color:#a6e22e>mAge</span><span style=color:#f92672>,</span> author<span style=color:#f92672>.</span><span style=color:#a6e22e>mName</span><span style=color:#f92672>),</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;————————————&#34;</span><span style=color:#f92672>));</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Author</span> <span style=color:#f92672>{</span>     作家
        <span style=color:#66d9ef>private</span> String mName<span style=color:#f92672>;</span>     姓名
        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> mAge<span style=color:#f92672>;</span>     年龄
        <span style=color:#66d9ef>private</span> List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> mArticle<span style=color:#f92672>;</span>     文章列表

        <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>Author</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> age<span style=color:#f92672>,</span> List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> article<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            mName <span style=color:#f92672>=</span> name<span style=color:#f92672>;</span>
            mAge <span style=color:#f92672>=</span> age<span style=color:#f92672>;</span>
            mArticle <span style=color:#f92672>=</span> article<span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>

        <span style=color:#a6e22e>@Override</span>
        <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>toString</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
            <span style=color:#66d9ef>return</span> mName<span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
19 23 23 26
<span style=color:#960050;background-color:#1e0010>————————————</span>
0 19 42 65 91
<span style=color:#960050;background-color:#1e0010>————————————</span>
91
<span style=color:#960050;background-color:#1e0010>————————————</span>
Java1
Java2
Python1
Python2
PHP1
PHP2
Ruby1
Ruby2
<span style=color:#960050;background-color:#1e0010>————————————</span>
Java1
Java2
Python1
Python2
PHP1
PHP2
Ruby1
Ruby2
<span style=color:#960050;background-color:#1e0010>————————————</span>
年龄:23 姓名<span style=color:#f92672>:</span>Adam
年龄:23 姓名<span style=color:#f92672>:</span>Conan
年龄:19 姓名<span style=color:#f92672>:</span>Bell
年龄:26 姓名<span style=color:#f92672>:</span>David
<span style=color:#960050;background-color:#1e0010>————————————</span>
</code></pre></div><h3 id=过滤>过滤</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> List<span style=color:#f92672>&lt;</span>Author<span style=color:#f92672>&gt;</span> LIST <span style=color:#f92672>=</span> Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>asList</span><span style=color:#f92672>(</span>
            <span style=color:#66d9ef>new</span> Author<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Adam&#34;</span><span style=color:#f92672>,</span> 23<span style=color:#f92672>,</span> Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>asList</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Java1&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;Java2&#34;</span><span style=color:#f92672>)),</span>
            <span style=color:#66d9ef>new</span> Author<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Bell&#34;</span><span style=color:#f92672>,</span> 19<span style=color:#f92672>,</span> Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>asList</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Python1&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;Python2&#34;</span><span style=color:#f92672>)),</span>
            <span style=color:#66d9ef>new</span> Author<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Conan&#34;</span><span style=color:#f92672>,</span> 23<span style=color:#f92672>,</span> Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>asList</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;PHP1&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;PHP2&#34;</span><span style=color:#f92672>)),</span>
            <span style=color:#66d9ef>new</span> Author<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;David&#34;</span><span style=color:#f92672>,</span> 26<span style=color:#f92672>,</span> Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>asList</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Ruby1&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;Ruby2&#34;</span><span style=color:#f92672>)));</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        Observable
                <span style=color:#f92672>.</span><span style=color:#a6e22e>from</span><span style=color:#f92672>(</span>LIST<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>filter</span><span style=color:#f92672>(</span>author <span style=color:#f92672>-&gt;</span> author<span style=color:#f92672>.</span><span style=color:#a6e22e>mAge</span> <span style=color:#f92672>&gt;</span> 25<span style=color:#f92672>)</span>     过滤
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>author <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>printf</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;年龄:%d 姓名:%s\n&#34;</span><span style=color:#f92672>,</span> author<span style=color:#f92672>.</span><span style=color:#a6e22e>mAge</span><span style=color:#f92672>,</span> author<span style=color:#f92672>.</span><span style=color:#a6e22e>mName</span><span style=color:#f92672>),</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;————————————&#34;</span><span style=color:#f92672>));</span>
        Observable
                <span style=color:#f92672>.</span><span style=color:#a6e22e>from</span><span style=color:#f92672>(</span>LIST<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>take</span><span style=color:#f92672>(</span>2<span style=color:#f92672>)</span>     只取前 2
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;————————————&#34;</span><span style=color:#f92672>));</span>
        Observable
                <span style=color:#f92672>.</span><span style=color:#a6e22e>from</span><span style=color:#f92672>(</span>LIST<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>takeLast</span><span style=color:#f92672>(</span>2<span style=color:#f92672>)</span>     只取后 2
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;————————————&#34;</span><span style=color:#f92672>));</span>
        Observable
                <span style=color:#f92672>.</span><span style=color:#a6e22e>from</span><span style=color:#f92672>(</span>LIST<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>skip</span><span style=color:#f92672>(</span>2<span style=color:#f92672>)</span>     跳过前 2
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;————————————&#34;</span><span style=color:#f92672>));</span>
        Observable
                <span style=color:#f92672>.</span><span style=color:#a6e22e>from</span><span style=color:#f92672>(</span>LIST<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>skipLast</span><span style=color:#f92672>(</span>2<span style=color:#f92672>)</span>     跳过后 2
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;————————————&#34;</span><span style=color:#f92672>));</span>
        Observable
                <span style=color:#f92672>.</span><span style=color:#a6e22e>from</span><span style=color:#f92672>(</span>LIST<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>elementAt</span><span style=color:#f92672>(</span>0<span style=color:#f92672>)</span>     选取
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;————————————&#34;</span><span style=color:#f92672>));</span>
        Observable
                <span style=color:#f92672>.</span><span style=color:#a6e22e>from</span><span style=color:#f92672>(</span>LIST<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>first</span><span style=color:#f92672>()</span>     选取最前<span style=color:#960050;background-color:#1e0010>（</span>若无数据<span style=color:#960050;background-color:#1e0010>：</span>first<span style=color:#f92672>()</span> 直接调用 <span style=color:#a6e22e>onError</span><span style=color:#f92672>()</span><span style=color:#960050;background-color:#1e0010>，</span>takeFirst<span style=color:#f92672>()</span> 直接调用 <span style=color:#a6e22e>onCompleted</span><span style=color:#f92672>()</span><span style=color:#960050;background-color:#1e0010>，</span>下同<span style=color:#960050;background-color:#1e0010>）</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;————————————&#34;</span><span style=color:#f92672>));</span>
        Observable
                <span style=color:#f92672>.</span><span style=color:#a6e22e>from</span><span style=color:#f92672>(</span>LIST<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>last</span><span style=color:#f92672>()</span>     选取最后
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;————————————&#34;</span><span style=color:#f92672>));</span>
        Observable
                <span style=color:#f92672>.</span><span style=color:#a6e22e>from</span><span style=color:#f92672>(</span>Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>asList</span><span style=color:#f92672>(</span>1<span style=color:#f92672>,</span> 1<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> 3<span style=color:#f92672>,</span> 3<span style=color:#f92672>,</span> 4<span style=color:#f92672>,</span> 4<span style=color:#f92672>,</span> 5<span style=color:#f92672>,</span> 5<span style=color:#f92672>,</span> 6<span style=color:#f92672>,</span> 6<span style=color:#f92672>,</span> 1<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> 3<span style=color:#f92672>,</span> 4<span style=color:#f92672>,</span> 5<span style=color:#f92672>,</span> 6<span style=color:#f92672>))</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>distinct</span><span style=color:#f92672>()</span>     去重
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>integer <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>print</span><span style=color:#f92672>(</span>integer <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; &#34;</span><span style=color:#f92672>),</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;\n————————————&#34;</span><span style=color:#f92672>));</span>
        Observable
                <span style=color:#f92672>.</span><span style=color:#a6e22e>from</span><span style=color:#f92672>(</span>Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>asList</span><span style=color:#f92672>(</span>1<span style=color:#f92672>,</span> 1<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> 3<span style=color:#f92672>,</span> 3<span style=color:#f92672>,</span> 4<span style=color:#f92672>,</span> 4<span style=color:#f92672>,</span> 5<span style=color:#f92672>,</span> 5<span style=color:#f92672>,</span> 6<span style=color:#f92672>,</span> 6<span style=color:#f92672>,</span> 1<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> 3<span style=color:#f92672>,</span> 4<span style=color:#f92672>,</span> 5<span style=color:#f92672>,</span> 6<span style=color:#f92672>))</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>distinctUntilChanged</span><span style=color:#f92672>()</span>     前后去重
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>integer <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>print</span><span style=color:#f92672>(</span>integer <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; &#34;</span><span style=color:#f92672>),</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;\n————————————&#34;</span><span style=color:#f92672>));</span>
        <span style=color:#f92672>----</span>
        输出<span style=color:#960050;background-color:#1e0010>：</span>
        年龄<span style=color:#f92672>:</span>26 姓名<span style=color:#f92672>:</span>David
        <span style=color:#960050;background-color:#1e0010>————————————</span>
        Adam
        Bell
        <span style=color:#960050;background-color:#1e0010>————————————</span>
        Conan
        David
        <span style=color:#960050;background-color:#1e0010>————————————</span>
        Conan
        David
        <span style=color:#960050;background-color:#1e0010>————————————</span>
        Adam
        Bell
        <span style=color:#960050;background-color:#1e0010>————————————</span>
        Adam
        <span style=color:#960050;background-color:#1e0010>————————————</span>
        Adam
        <span style=color:#960050;background-color:#1e0010>————————————</span>
        David
        <span style=color:#960050;background-color:#1e0010>————————————</span>
        1 2 3 4 5 6
        <span style=color:#960050;background-color:#1e0010>————————————</span>
        1 2 3 4 5 6 1 2 3 4 5 6
        <span style=color:#960050;background-color:#1e0010>————————————</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>a</span><span style=color:#f92672>()</span> <span style=color:#66d9ef>throws</span> InterruptedException <span style=color:#f92672>{</span>     takeUntil
        Observable
                <span style=color:#f92672>.</span><span style=color:#a6e22e>from</span><span style=color:#f92672>(</span>Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>asList</span><span style=color:#f92672>(</span>1<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> 3<span style=color:#f92672>,</span> 4<span style=color:#f92672>,</span> 5<span style=color:#f92672>,</span> 6<span style=color:#f92672>))</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>takeUntil</span><span style=color:#f92672>(</span>integer <span style=color:#f92672>-&gt;</span> integer <span style=color:#f92672>==</span> 3<span style=color:#f92672>)</span>     一直处理事件<span style=color:#960050;background-color:#1e0010>，</span>直到事件符合某项条件
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>);</span>
        <span style=color:#f92672>----</span>
        输出<span style=color:#960050;background-color:#1e0010>：</span>
        1
        2
        3

        Observable<span style=color:#f92672>&lt;</span>Long<span style=color:#f92672>&gt;</span> observable1 <span style=color:#f92672>=</span> Observable<span style=color:#f92672>.</span><span style=color:#a6e22e>interval</span><span style=color:#f92672>(</span>300<span style=color:#f92672>,</span> TimeUnit<span style=color:#f92672>.</span><span style=color:#a6e22e>MILLISECONDS</span><span style=color:#f92672>);</span>     每隔 300 毫秒发送数字
        Observable<span style=color:#f92672>&lt;</span>Long<span style=color:#f92672>&gt;</span> observable2 <span style=color:#f92672>=</span> Observable<span style=color:#f92672>.</span><span style=color:#a6e22e>interval</span><span style=color:#f92672>(</span>800<span style=color:#f92672>,</span> TimeUnit<span style=color:#f92672>.</span><span style=color:#a6e22e>MILLISECONDS</span><span style=color:#f92672>);</span>     每隔 800 毫秒发送数字
        observable1
                <span style=color:#f92672>.</span><span style=color:#a6e22e>takeUntil</span><span style=color:#f92672>(</span>observable2<span style=color:#f92672>)</span>     一直处理事件<span style=color:#960050;background-color:#1e0010>，</span>直到 observable2 发送了事件
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>exit</span><span style=color:#f92672>(</span>0<span style=color:#f92672>));</span>
        Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>sleep</span><span style=color:#f92672>(</span>Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>MAX_VALUE</span><span style=color:#f92672>);</span>
        <span style=color:#f92672>----</span>
        输出<span style=color:#960050;background-color:#1e0010>：</span>
        0
        1
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Author</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>private</span> String mName<span style=color:#f92672>;</span>
        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> mAge<span style=color:#f92672>;</span>
        <span style=color:#66d9ef>private</span> List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> mArticle<span style=color:#f92672>;</span>

        <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>Author</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> age<span style=color:#f92672>,</span> List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> article<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            mName <span style=color:#f92672>=</span> name<span style=color:#f92672>;</span>
            mAge <span style=color:#f92672>=</span> age<span style=color:#f92672>;</span>
            mArticle <span style=color:#f92672>=</span> article<span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>

        <span style=color:#a6e22e>@Override</span>
        <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>toString</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
            <span style=color:#66d9ef>return</span> mName<span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><h3 id=组合>组合</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> String<span style=color:#f92672>[]</span> strings <span style=color:#f92672>=</span> <span style=color:#f92672>{</span><span style=color:#e6db74>&#34;A&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;B&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;C&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;D&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;E&#34;</span><span style=color:#f92672>};</span>
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> Observable<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> observable1 <span style=color:#f92672>=</span> Observable     每隔 300 毫秒发送事件<span style=color:#960050;background-color:#1e0010>：</span>A B C D E
            <span style=color:#f92672>.</span><span style=color:#a6e22e>interval</span><span style=color:#f92672>(</span>300<span style=color:#f92672>,</span> TimeUnit<span style=color:#f92672>.</span><span style=color:#a6e22e>MILLISECONDS</span><span style=color:#f92672>)</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>take</span><span style=color:#f92672>(</span>strings<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>)</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>aLong <span style=color:#f92672>-&gt;</span> strings<span style=color:#f92672>[</span>aLong<span style=color:#f92672>.</span><span style=color:#a6e22e>intValue</span><span style=color:#f92672>()]);</span>
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> Observable<span style=color:#f92672>&lt;</span>Long<span style=color:#f92672>&gt;</span> observable2 <span style=color:#f92672>=</span> Observable     每隔 500 毫秒发送事件<span style=color:#960050;background-color:#1e0010>：</span>0 1 2 3 4 5 6 7 8 9
            <span style=color:#f92672>.</span><span style=color:#a6e22e>interval</span><span style=color:#f92672>(</span>500<span style=color:#f92672>,</span> TimeUnit<span style=color:#f92672>.</span><span style=color:#a6e22e>MILLISECONDS</span><span style=color:#f92672>)</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>take</span><span style=color:#f92672>(</span>10<span style=color:#f92672>);</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> InterruptedException <span style=color:#f92672>{</span>
        a<span style=color:#f92672>();</span>
        b<span style=color:#f92672>();</span>
        Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>sleep</span><span style=color:#f92672>(</span>Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>MAX_VALUE</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>a</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>     合并
        Observable
                <span style=color:#f92672>.</span><span style=color:#a6e22e>merge</span><span style=color:#f92672>(</span>observable1<span style=color:#f92672>,</span> observable2<span style=color:#f92672>)</span>     无序合并<span style=color:#960050;background-color:#1e0010>（</span>异步进行<span style=color:#960050;background-color:#1e0010>）</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>o <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>print</span><span style=color:#f92672>(</span>o <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; &#34;</span><span style=color:#f92672>),</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>exit</span><span style=color:#f92672>(</span>0<span style=color:#f92672>));</span>
        <span style=color:#f92672>----</span>
        输出<span style=color:#960050;background-color:#1e0010>：</span>
        A 0 B C 1 D E 2 3 4 5 6 7 8 9

        Observable
                <span style=color:#f92672>.</span><span style=color:#a6e22e>concat</span><span style=color:#f92672>(</span>observable1<span style=color:#f92672>,</span> observable2<span style=color:#f92672>)</span>     有序合并<span style=color:#960050;background-color:#1e0010>（</span>同步进行<span style=color:#960050;background-color:#1e0010>）</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>o <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>print</span><span style=color:#f92672>(</span>o <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; &#34;</span><span style=color:#f92672>),</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>exit</span><span style=color:#f92672>(</span>0<span style=color:#f92672>));</span>
        <span style=color:#f92672>----</span>
        输出<span style=color:#960050;background-color:#1e0010>：</span>
        A B C D E 0 1 2 3 4 5 6 7 8 9

        observable1
                <span style=color:#f92672>.</span><span style=color:#a6e22e>startWith</span><span style=color:#f92672>(</span>Observable<span style=color:#f92672>.</span><span style=color:#a6e22e>just</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;AA&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;BB&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;CC&#34;</span><span style=color:#f92672>))</span>     有序合并<span style=color:#960050;background-color:#1e0010>（</span>同步进行<span style=color:#960050;background-color:#1e0010>），</span>底层调用 concat 在其之前插入新事件<span style=color:#960050;background-color:#1e0010>，</span>接收 Observable 和 Iterable
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>o <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>print</span><span style=color:#f92672>(</span>o <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; &#34;</span><span style=color:#f92672>),</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>exit</span><span style=color:#f92672>(</span>0<span style=color:#f92672>));</span>
        <span style=color:#f92672>----</span>
        输出<span style=color:#960050;background-color:#1e0010>：</span>
        AA BB CC A B C D E
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>b</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>     组合
        Observable
                <span style=color:#f92672>.</span><span style=color:#a6e22e>zip</span><span style=color:#f92672>(</span>observable1<span style=color:#f92672>,</span> observable2<span style=color:#f92672>,</span> <span style=color:#f92672>(</span>s<span style=color:#f92672>,</span> aLong<span style=color:#f92672>)</span> <span style=color:#f92672>-&gt;</span> s <span style=color:#f92672>+</span> aLong<span style=color:#f92672>)</span>     不可重用
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>o <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>print</span><span style=color:#f92672>(</span>o <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; &#34;</span><span style=color:#f92672>),</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>exit</span><span style=color:#f92672>(</span>0<span style=color:#f92672>));</span>
        <span style=color:#f92672>----</span>
        输出<span style=color:#960050;background-color:#1e0010>：</span>
        A0 B1 C2 D3 E4

        Observable
                <span style=color:#f92672>.</span><span style=color:#a6e22e>combineLatest</span><span style=color:#f92672>(</span>observable1<span style=color:#f92672>,</span> observable2<span style=color:#f92672>,</span> <span style=color:#f92672>(</span>s<span style=color:#f92672>,</span> aLong<span style=color:#f92672>)</span> <span style=color:#f92672>-&gt;</span> s <span style=color:#f92672>+</span> aLong<span style=color:#f92672>)</span>     可重用<span style=color:#960050;background-color:#1e0010>（</span>与最近的事件组合<span style=color:#960050;background-color:#1e0010>）</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>o <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>print</span><span style=color:#f92672>(</span>o <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; &#34;</span><span style=color:#f92672>),</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>exit</span><span style=color:#f92672>(</span>0<span style=color:#f92672>));</span>
        <span style=color:#f92672>----</span>
        输出<span style=color:#960050;background-color:#1e0010>：</span>
        A0 B0 C0 C1 D1 E1 E2 E3 E4 E5 E6 E7 E8 E9

        observable1     左事件源
                <span style=color:#f92672>.</span><span style=color:#a6e22e>join</span><span style=color:#f92672>(</span>     可重用<span style=color:#960050;background-color:#1e0010>（</span>事件具有有效期<span style=color:#960050;background-color:#1e0010>，</span>有点像排列组合<span style=color:#960050;background-color:#1e0010>）</span>
                        observable2<span style=color:#f92672>,</span>     右事件源
                        s <span style=color:#f92672>-&gt;</span> Observable<span style=color:#f92672>.</span><span style=color:#a6e22e>timer</span><span style=color:#f92672>(</span>10000<span style=color:#f92672>,</span> TimeUnit<span style=color:#f92672>.</span><span style=color:#a6e22e>MILLISECONDS</span><span style=color:#f92672>),</span>     左事件有效期
                        aLong <span style=color:#f92672>-&gt;</span> Observable<span style=color:#f92672>.</span><span style=color:#a6e22e>timer</span><span style=color:#f92672>(</span>0<span style=color:#f92672>,</span> TimeUnit<span style=color:#f92672>.</span><span style=color:#a6e22e>MILLISECONDS</span><span style=color:#f92672>),</span>     右事件有效期
                        <span style=color:#f92672>(</span>s<span style=color:#f92672>,</span> aLong<span style=color:#f92672>)</span> <span style=color:#f92672>-&gt;</span> s <span style=color:#f92672>+</span> aLong<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>o <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>print</span><span style=color:#f92672>(</span>o <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; &#34;</span><span style=color:#f92672>),</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>exit</span><span style=color:#f92672>(</span>0<span style=color:#f92672>));</span>
        <span style=color:#f92672>----</span>
        输出<span style=color:#960050;background-color:#1e0010>：</span>
        A0 A1 B1 C1 A2 B2 C2 D2 E2 A3 B3 C3 D3 E3 A4 B4 C4 D4 E4 A5 B5 C5 D5 E5 A6 B6 C6 D6 E6 A7 B7 C7 D7 E7 A8 B8 C8 D8 E8 A9 B9 C9 D9 E9
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><h2 id=code>Code</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>Observable
        <span style=color:#f92672>.</span><span style=color:#a6e22e>just</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;A&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;B&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;C&#34;</span><span style=color:#f92672>)</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>doOnNext</span><span style=color:#f92672>(</span>s <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>printf</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;%s__%s__%s\n&#34;</span><span style=color:#f92672>,</span> s<span style=color:#f92672>,</span> Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>(),</span> <span style=color:#e6db74>&#34;doOnNext&#34;</span><span style=color:#f92672>))</span>     类似于 Java 8 中的 Stream 的 peek
        <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>s <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>{</span>
            System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>printf</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;%s__%s__%s\n&#34;</span><span style=color:#f92672>,</span> s<span style=color:#f92672>,</span> Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>(),</span> <span style=color:#e6db74>&#34;map&#34;</span><span style=color:#f92672>);</span>
            <span style=color:#66d9ef>return</span> s<span style=color:#f92672>;</span>
        <span style=color:#f92672>})</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>s <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>printf</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;%s__%s__%s\n&#34;</span><span style=color:#f92672>,</span> s<span style=color:#f92672>,</span> Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>(),</span> <span style=color:#e6db74>&#34;onNext&#34;</span><span style=color:#f92672>),</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>exit</span><span style=color:#f92672>(</span>0<span style=color:#f92672>));</span>
Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>sleep</span><span style=color:#f92672>(</span>Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>MAX_VALUE</span><span style=color:#f92672>);</span>
<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>     类似于 Java 8 中的 Stream 的垂直执行<span style=color:#960050;background-color:#1e0010>，</span>像在流水线依次经过每个操作<span style=color:#960050;background-color:#1e0010>，</span>并通过短路求值尽可能减少操作次数
A__main__doOnNext
A__main__map
A__main__onNext
B__main__doOnNext
B__main__map
B__main__onNext
C__main__doOnNext
C__main__map
C__main__onNext

<span style=color:#f92672>-------------------------------------------------------</span>

Observable
        <span style=color:#f92672>.</span><span style=color:#a6e22e>just</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;A&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;B&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;C&#34;</span><span style=color:#f92672>)</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>doOnNext</span><span style=color:#f92672>(</span>s <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>printf</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;%s__%s__%s\n&#34;</span><span style=color:#f92672>,</span> s<span style=color:#f92672>,</span> Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>(),</span> <span style=color:#e6db74>&#34;doOnNext&#34;</span><span style=color:#f92672>))</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>s <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>{</span>
            System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>printf</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;%s__%s__%s\n&#34;</span><span style=color:#f92672>,</span> s<span style=color:#f92672>,</span> Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>(),</span> <span style=color:#e6db74>&#34;map&#34;</span><span style=color:#f92672>);</span>
            <span style=color:#66d9ef>return</span> s<span style=color:#f92672>;</span>
        <span style=color:#f92672>})</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>observeOn</span><span style=color:#f92672>(</span>Schedulers<span style=color:#f92672>.</span><span style=color:#a6e22e>computation</span><span style=color:#f92672>())</span>     切换至计算线程 <span style=color:#f92672>(</span>2<span style=color:#f92672>)</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribeOn</span><span style=color:#f92672>(</span>Schedulers<span style=color:#f92672>.</span><span style=color:#a6e22e>io</span><span style=color:#f92672>())</span>     指定最开始在IO线程中运行 <span style=color:#f92672>(</span>1<span style=color:#f92672>)</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>s <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>printf</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;%s__%s__%s\n&#34;</span><span style=color:#f92672>,</span> s<span style=color:#f92672>,</span> Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>(),</span> <span style=color:#e6db74>&#34;onNext&#34;</span><span style=color:#f92672>),</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>exit</span><span style=color:#f92672>(</span>0<span style=color:#f92672>));</span>
Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>sleep</span><span style=color:#f92672>(</span>Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>MAX_VALUE</span><span style=color:#f92672>);</span>
<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
A__RxIoScheduler<span style=color:#f92672>-</span>2__doOnNext
A__RxIoScheduler<span style=color:#f92672>-</span>2__map
B__RxIoScheduler<span style=color:#f92672>-</span>2__doOnNext
B__RxIoScheduler<span style=color:#f92672>-</span>2__map
C__RxIoScheduler<span style=color:#f92672>-</span>2__doOnNext
C__RxIoScheduler<span style=color:#f92672>-</span>2__map
A__RxComputationScheduler<span style=color:#f92672>-</span>1__onNext
B__RxComputationScheduler<span style=color:#f92672>-</span>1__onNext
C__RxComputationScheduler<span style=color:#f92672>-</span>1__onNext
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>通过 <span style=color:#a6e22e>compose</span><span style=color:#f92672>()</span> 操作符重用操作链
<span style=color:#f92672>-------------------------------------------------------</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>final</span> Observable<span style=color:#f92672>.</span><span style=color:#a6e22e>Transformer</span><span style=color:#f92672>&lt;</span>String<span style=color:#f92672>,</span> String<span style=color:#f92672>&gt;</span> transformer <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Observable<span style=color:#f92672>.</span><span style=color:#a6e22e>Transformer</span><span style=color:#f92672>&lt;</span>String<span style=color:#f92672>,</span> String<span style=color:#f92672>&gt;()</span> <span style=color:#f92672>{</span>
            <span style=color:#a6e22e>@Override</span>
            <span style=color:#66d9ef>public</span> Observable<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>call</span><span style=color:#f92672>(</span>Observable<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> stringObservable<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     对传入的原始被观察者进行加工
                <span style=color:#66d9ef>return</span> stringObservable<span style=color:#f92672>.</span><span style=color:#a6e22e>doOnUnsubscribe</span><span style=color:#f92672>(()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Unsubscribed&#34;</span><span style=color:#f92672>)).</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>s <span style=color:#f92672>-&gt;</span> s <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;1&#34;</span><span style=color:#f92672>);</span>
            <span style=color:#f92672>}</span>
        <span style=color:#f92672>};</span>     Transformer 对象

        Observable
                <span style=color:#f92672>.</span><span style=color:#a6e22e>just</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;A&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;B&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;C&#34;</span><span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>compose</span><span style=color:#f92672>(</span>transformer<span style=color:#f92672>)</span>     重用 Transformer
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>);</span>
        Observable
                <span style=color:#f92672>.</span><span style=color:#a6e22e>just</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;1&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;2&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;3&#34;</span><span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>compose</span><span style=color:#f92672>(</span>transformer<span style=color:#f92672>)</span>     重用 Transformer
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
A1
B1
C1
Unsubscribed
11
21
31
Unsubscribed

Note<span style=color:#960050;background-color:#1e0010>：</span>
1<span style=color:#f92672>.</span> <span style=color:#a6e22e>compose</span><span style=color:#f92672>()</span> 接收一个 Transformer 接口<span style=color:#960050;background-color:#1e0010>，</span>此接口继承自 Func1<span style=color:#960050;background-color:#1e0010>，</span>接收原始 Observable<span style=color:#960050;background-color:#1e0010>，</span>返回新 Observable<span style=color:#960050;background-color:#1e0010>。</span>
2<span style=color:#f92672>.</span> <span style=color:#a6e22e>compose</span><span style=color:#f92672>()</span> 作用于整个被观察者<span style=color:#960050;background-color:#1e0010>，</span>flatMap<span style=color:#f92672>()</span> 作用于每个事件<span style=color:#960050;background-color:#1e0010>。</span>

<span style=color:#f92672>-------------------------------------------------------</span>

实例<span style=color:#960050;background-color:#1e0010>：</span>改进之前线程调度加载网络图片的例子
<span style=color:#f92672>----</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> Observable<span style=color:#f92672>.</span><span style=color:#a6e22e>Transformer</span><span style=color:#f92672>&lt;</span>Object<span style=color:#f92672>,</span> Object<span style=color:#f92672>&gt;</span> mTransformer <span style=color:#f92672>=</span> observable <span style=color:#f92672>-&gt;</span>     单例模式
            observable
                    <span style=color:#f92672>.</span><span style=color:#a6e22e>observeOn</span><span style=color:#f92672>(</span>AndroidSchedulers<span style=color:#f92672>.</span><span style=color:#a6e22e>mainThread</span><span style=color:#f92672>())</span>     切换至主线程 <span style=color:#f92672>(</span>2<span style=color:#f92672>)</span>
                    <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribeOn</span><span style=color:#f92672>(</span>Schedulers<span style=color:#f92672>.</span><span style=color:#a6e22e>io</span><span style=color:#f92672>());</span>     指定最开始在IO线程中运行 <span style=color:#f92672>(</span>1<span style=color:#f92672>)</span>

    <span style=color:#a6e22e>@SuppressWarnings</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;unchecked&#34;</span><span style=color:#f92672>)</span>     压制警告<span style=color:#960050;background-color:#1e0010>（</span>强制类型转换<span style=color:#960050;background-color:#1e0010>）</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> Observable<span style=color:#f92672>.</span><span style=color:#a6e22e>Transformer</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>,</span> T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>applySchedulers</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
       <span style=color:#66d9ef>return</span> <span style=color:#f92672>((</span>Observable<span style=color:#f92672>.</span><span style=color:#a6e22e>Transformer</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>,</span> T<span style=color:#f92672>&gt;)</span> mTransformer<span style=color:#f92672>);</span>   返回 Transformer 对象<span style=color:#960050;background-color:#1e0010>（</span>为了不丢失类型信息而强制转换<span style=color:#960050;background-color:#1e0010>）</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

<span style=color:#f92672>----</span>

Observable
        <span style=color:#f92672>.</span><span style=color:#a6e22e>just</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;http://blog.xhstormr.tk/uploads/children-of-the-sun1.jpg&#34;</span><span style=color:#f92672>)</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>s <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>{</span>     下载 Bitmap<span style=color:#960050;background-color:#1e0010>（</span>String <span style=color:#960050;background-color:#1e0010>➜</span> Bitmap<span style=color:#960050;background-color:#1e0010>）</span>
            Bitmap bitmap <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
            <span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>BufferedInputStream bufferedInputStream <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> BufferedInputStream<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> URL<span style=color:#f92672>(</span>s<span style=color:#f92672>).</span><span style=color:#a6e22e>openStream</span><span style=color:#f92672>()))</span> <span style=color:#f92672>{</span>
                bitmap <span style=color:#f92672>=</span> BitmapFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>decodeStream</span><span style=color:#f92672>(</span>bufferedInputStream<span style=color:#f92672>);</span>
            <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>IOException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
                e<span style=color:#f92672>.</span><span style=color:#a6e22e>printStackTrace</span><span style=color:#f92672>();</span>
            <span style=color:#f92672>}</span>
            <span style=color:#66d9ef>return</span> bitmap<span style=color:#f92672>;</span>
        <span style=color:#f92672>})</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>compose</span><span style=color:#f92672>(</span>A<span style=color:#f92672>.</span><span style=color:#a6e22e>applySchedulers</span><span style=color:#f92672>())</span>     只需传入 A<span style=color:#f92672>.</span><span style=color:#a6e22e>applySchedulers</span><span style=color:#f92672>()</span> 返回的对象<span style=color:#960050;background-color:#1e0010>，</span>即可后台处理<span style=color:#960050;background-color:#1e0010>，</span>前台显示
        <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>bitmap <span style=color:#f92672>-&gt;</span> mImageView<span style=color:#f92672>.</span><span style=color:#a6e22e>setImageBitmap</span><span style=color:#f92672>(</span>bitmap<span style=color:#f92672>));</span>     加载 Bitmap
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>通过 Observable<span style=color:#f92672>.</span><span style=color:#a6e22e>defer</span><span style=color:#f92672>(</span>Func0<span style=color:#f92672>)</span> 实现延迟订阅
<span style=color:#f92672>-------------------------------------------------------</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> String s<span style=color:#f92672>;</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        Observable<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> observable <span style=color:#f92672>=</span> Observable<span style=color:#f92672>.</span><span style=color:#a6e22e>just</span><span style=color:#f92672>(</span>s<span style=color:#f92672>);</span>     直接执行
        s <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;ABC&#34;</span><span style=color:#f92672>;</span>
        observable<span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>);</span>
        <span style=color:#f92672>----</span>
        输出<span style=color:#960050;background-color:#1e0010>：</span>
        <span style=color:#66d9ef>null</span>

        Observable<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> observable <span style=color:#f92672>=</span> Observable<span style=color:#f92672>.</span><span style=color:#a6e22e>defer</span><span style=color:#f92672>(()</span> <span style=color:#f92672>-&gt;</span> Observable<span style=color:#f92672>.</span><span style=color:#a6e22e>just</span><span style=color:#f92672>(</span>s<span style=color:#f92672>));</span>     Func0 接口中的代码将延迟执行
        s <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;ABC&#34;</span><span style=color:#f92672>;</span>
        observable<span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>);</span>
        <span style=color:#f92672>----</span>
        输出<span style=color:#960050;background-color:#1e0010>：</span>
        ABC
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

Note<span style=color:#960050;background-color:#1e0010>：</span>
0<span style=color:#f92672>.</span> <span style=color:#a6e22e>just</span><span style=color:#f92672>()</span> 和 <span style=color:#a6e22e>from</span><span style=color:#f92672>()</span> 在创建 Observable 时就存储了对象的值<span style=color:#960050;background-color:#1e0010>，</span>而 <span style=color:#a6e22e>create</span><span style=color:#f92672>()</span> 创建的 Observable 在 <span style=color:#a6e22e>subscribe</span><span style=color:#f92672>()</span> 时才访问对象<span style=color:#960050;background-color:#1e0010>。</span>
1<span style=color:#f92672>.</span> <span style=color:#a6e22e>defer</span><span style=color:#f92672>()</span> 接收一个 Func0 接口并显式声明此接口返回一个 Observable 对象<span style=color:#960050;background-color:#1e0010>。</span>
2<span style=color:#f92672>.</span> <span style=color:#a6e22e>defer</span><span style=color:#f92672>()</span> 中的代码直到订阅才会执行<span style=color:#960050;background-color:#1e0010>。</span>
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>通过 Schedulers 将耗时操作放到后台线程中执行
<span style=color:#f92672>-------------------------------------------------------</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> InterruptedException <span style=color:#f92672>{</span>
        Schedulers<span style=color:#f92672>.</span><span style=color:#a6e22e>io</span><span style=color:#f92672>().</span><span style=color:#a6e22e>createWorker</span><span style=color:#f92672>().</span><span style=color:#a6e22e>schedule</span><span style=color:#f92672>(()</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>{</span>     Action0 接口中的代码将在 IO 线程中执行
            System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>());</span>
            System<span style=color:#f92672>.</span><span style=color:#a6e22e>exit</span><span style=color:#f92672>(</span>0<span style=color:#f92672>);</span>
        <span style=color:#f92672>});</span>
        Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>sleep</span><span style=color:#f92672>(</span>Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>MAX_VALUE</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
Thread<span style=color:#f92672>[</span>RxIoScheduler<span style=color:#f92672>-</span>2<span style=color:#f92672>,</span>5<span style=color:#f92672>,</span>main<span style=color:#f92672>]</span>
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>Single
<span style=color:#f92672>-------------------------------------------------------</span>

被观察者
<span style=color:#f92672>----</span>
Single<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> observable <span style=color:#f92672>=</span> Single<span style=color:#f92672>.</span><span style=color:#a6e22e>create</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Single<span style=color:#f92672>.</span><span style=color:#a6e22e>OnSubscribe</span><span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;()</span> <span style=color:#f92672>{</span>
    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>call</span><span style=color:#f92672>(</span>SingleSubscriber<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>super</span> String<span style=color:#f92672>&gt;</span> singleSubscriber<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        singleSubscriber<span style=color:#f92672>.</span><span style=color:#a6e22e>onSuccess</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;A&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>});</span>

Single<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> observable <span style=color:#f92672>=</span> Single<span style=color:#f92672>.</span><span style=color:#a6e22e>just</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;A&#34;</span><span style=color:#f92672>);</span>

观察者
<span style=color:#f92672>----</span>
SingleSubscriber<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> subscriber <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> SingleSubscriber<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;()</span> <span style=color:#f92672>{</span>     SingleSubscriber
    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onSuccess</span><span style=color:#f92672>(</span>String value<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     成功
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>value<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onError</span><span style=color:#f92672>(</span>Throwable error<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     异常
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>error<span style=color:#f92672>.</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>());</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>};</span>

实例
<span style=color:#f92672>----</span>
Single<span style=color:#f92672>.</span><span style=color:#a6e22e>just</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;A&#34;</span><span style=color:#f92672>).</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>);</span>
<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
A
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>延时执行
<span style=color:#f92672>-------------------------------------------------------</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> InterruptedException <span style=color:#f92672>{</span>
        Observable<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span> range <span style=color:#f92672>=</span> Observable<span style=color:#f92672>.</span><span style=color:#a6e22e>range</span><span style=color:#f92672>(</span>0<span style=color:#f92672>,</span> 3<span style=color:#f92672>);</span>
        range
                <span style=color:#f92672>.</span><span style=color:#a6e22e>delay</span><span style=color:#f92672>(</span>2<span style=color:#f92672>,</span> TimeUnit<span style=color:#f92672>.</span><span style=color:#a6e22e>SECONDS</span><span style=color:#f92672>)</span>     2 秒
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>exit</span><span style=color:#f92672>(</span>0<span style=color:#f92672>));</span>
        Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>sleep</span><span style=color:#f92672>(</span>Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>MAX_VALUE</span><span style=color:#f92672>);</span>
        <span style=color:#f92672>----</span>
        输出<span style=color:#960050;background-color:#1e0010>：（</span>延时 2 秒后执行<span style=color:#960050;background-color:#1e0010>）</span>
        0
        1
        2

        Observable<span style=color:#f92672>&lt;</span>Long<span style=color:#f92672>&gt;</span> timer <span style=color:#f92672>=</span> Observable<span style=color:#f92672>.</span><span style=color:#a6e22e>timer</span><span style=color:#f92672>(</span>2<span style=color:#f92672>,</span> TimeUnit<span style=color:#f92672>.</span><span style=color:#a6e22e>SECONDS</span><span style=color:#f92672>);</span>    2 秒<span style=color:#960050;background-color:#1e0010>（</span>timer 操作返回计时器 Observable<span style=color:#960050;background-color:#1e0010>）</span>
        timer
                <span style=color:#f92672>.</span><span style=color:#a6e22e>delay</span><span style=color:#f92672>(</span>2<span style=color:#f92672>,</span> TimeUnit<span style=color:#f92672>.</span><span style=color:#a6e22e>SECONDS</span><span style=color:#f92672>)</span>     2 秒
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>exit</span><span style=color:#f92672>(</span>0<span style=color:#f92672>));</span>
        Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>sleep</span><span style=color:#f92672>(</span>Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>MAX_VALUE</span><span style=color:#f92672>);</span>
        <span style=color:#f92672>----</span>
        输出<span style=color:#960050;background-color:#1e0010>：（</span>延时 4 秒后执行<span style=color:#960050;background-color:#1e0010>）</span>
        0
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>缓解 Backpressure<span style=color:#960050;background-color:#1e0010>（</span>背部压力<span style=color:#960050;background-color:#1e0010>）</span>
<span style=color:#f92672>-------------------------------------------------------</span>

缓冲事件
<span style=color:#f92672>----</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> InterruptedException <span style=color:#f92672>{</span>
        Observable
                <span style=color:#f92672>.</span><span style=color:#a6e22e>range</span><span style=color:#f92672>(</span>0<span style=color:#f92672>,</span> 10<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>buffer</span><span style=color:#f92672>(</span>2<span style=color:#f92672>)</span>     将多个事件包装为 List<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span><span style=color:#960050;background-color:#1e0010>，</span>缓冲区大小为 2
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>);</span>
        <span style=color:#f92672>----</span>
        输出<span style=color:#960050;background-color:#1e0010>：</span>
        <span style=color:#f92672>[</span>0<span style=color:#f92672>,</span> 1<span style=color:#f92672>]</span>
        <span style=color:#f92672>[</span>2<span style=color:#f92672>,</span> 3<span style=color:#f92672>]</span>
        <span style=color:#f92672>[</span>4<span style=color:#f92672>,</span> 5<span style=color:#f92672>]</span>
        <span style=color:#f92672>[</span>6<span style=color:#f92672>,</span> 7<span style=color:#f92672>]</span>
        <span style=color:#f92672>[</span>8<span style=color:#f92672>,</span> 9<span style=color:#f92672>]</span>

        Observable
                <span style=color:#f92672>.</span><span style=color:#a6e22e>range</span><span style=color:#f92672>(</span>0<span style=color:#f92672>,</span> 10<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>buffer</span><span style=color:#f92672>(</span>2<span style=color:#f92672>,</span> 3<span style=color:#f92672>)</span>     将多个事件包装为 List<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span><span style=color:#960050;background-color:#1e0010>，</span>缓冲区大小为 2<span style=color:#960050;background-color:#1e0010>，</span>每次都跳过第 3 个事件
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>);</span>
        <span style=color:#f92672>----</span>
        输出<span style=color:#960050;background-color:#1e0010>：</span>
        <span style=color:#f92672>[</span>0<span style=color:#f92672>,</span> 1<span style=color:#f92672>]</span>
        <span style=color:#f92672>[</span>3<span style=color:#f92672>,</span> 4<span style=color:#f92672>]</span>
        <span style=color:#f92672>[</span>6<span style=color:#f92672>,</span> 7<span style=color:#f92672>]</span>
        <span style=color:#f92672>[</span>9<span style=color:#f92672>]</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

过滤事件
<span style=color:#f92672>----</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> InterruptedException <span style=color:#f92672>{</span>
        Observable<span style=color:#f92672>&lt;</span>Long<span style=color:#f92672>&gt;</span> timer <span style=color:#f92672>=</span> Observable<span style=color:#f92672>.</span><span style=color:#a6e22e>timer</span><span style=color:#f92672>(</span>5<span style=color:#f92672>,</span> TimeUnit<span style=color:#f92672>.</span><span style=color:#a6e22e>SECONDS</span><span style=color:#f92672>);</span>     5 秒后发出事件<span style=color:#960050;background-color:#1e0010>（</span>计时器<span style=color:#960050;background-color:#1e0010>）</span>

        Observable
                <span style=color:#f92672>.</span><span style=color:#a6e22e>interval</span><span style=color:#f92672>(</span>500<span style=color:#f92672>,</span> TimeUnit<span style=color:#f92672>.</span><span style=color:#a6e22e>MILLISECONDS</span><span style=color:#f92672>)</span>     每隔 500 毫秒发出事件
                <span style=color:#f92672>.</span><span style=color:#a6e22e>takeUntil</span><span style=color:#f92672>(</span>timer<span style=color:#f92672>)</span>     一直处理事件<span style=color:#960050;background-color:#1e0010>，</span>直到 timer 发送了事件
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>exit</span><span style=color:#f92672>(</span>0<span style=color:#f92672>));</span>
        Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>sleep</span><span style=color:#f92672>(</span>Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>MAX_VALUE</span><span style=color:#f92672>);</span>
        <span style=color:#f92672>----</span>
        输出<span style=color:#960050;background-color:#1e0010>：（</span>CPU 时间不准<span style=color:#960050;background-color:#1e0010>，</span>无过滤<span style=color:#960050;background-color:#1e0010>）</span>
        0
        1
        2
        3
        4
        5
        6
        7
        8

        Observable
                <span style=color:#f92672>.</span><span style=color:#a6e22e>interval</span><span style=color:#f92672>(</span>500<span style=color:#f92672>,</span> TimeUnit<span style=color:#f92672>.</span><span style=color:#a6e22e>MILLISECONDS</span><span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>takeUntil</span><span style=color:#f92672>(</span>timer<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>throttleFirst</span><span style=color:#f92672>(</span>1<span style=color:#f92672>,</span> TimeUnit<span style=color:#f92672>.</span><span style=color:#a6e22e>SECONDS</span><span style=color:#f92672>)</span>     每隔 1 秒发出时间段中的第一个事件
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>exit</span><span style=color:#f92672>(</span>0<span style=color:#f92672>));</span>
        Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>sleep</span><span style=color:#f92672>(</span>Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>MAX_VALUE</span><span style=color:#f92672>);</span>
        <span style=color:#f92672>----</span>
        输出<span style=color:#960050;background-color:#1e0010>：（</span>CPU 时间不准<span style=color:#960050;background-color:#1e0010>）</span>
        0
        3
        5
        7

        Observable
                <span style=color:#f92672>.</span><span style=color:#a6e22e>interval</span><span style=color:#f92672>(</span>500<span style=color:#f92672>,</span> TimeUnit<span style=color:#f92672>.</span><span style=color:#a6e22e>MILLISECONDS</span><span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>takeUntil</span><span style=color:#f92672>(</span>timer<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>throttleLast</span><span style=color:#f92672>(</span>1<span style=color:#f92672>,</span> TimeUnit<span style=color:#f92672>.</span><span style=color:#a6e22e>SECONDS</span><span style=color:#f92672>)</span>     每隔 1 秒发出时间段中的最后一个事件<span style=color:#960050;background-color:#1e0010>（</span>跟 <span style=color:#a6e22e>sample</span><span style=color:#f92672>()</span> 行为一致<span style=color:#960050;background-color:#1e0010>）</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>exit</span><span style=color:#f92672>(</span>0<span style=color:#f92672>));</span>
        Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>sleep</span><span style=color:#f92672>(</span>Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>MAX_VALUE</span><span style=color:#f92672>);</span>
        <span style=color:#f92672>----</span>
        输出<span style=color:#960050;background-color:#1e0010>：（</span>CPU 时间不准<span style=color:#960050;background-color:#1e0010>）</span>
        0
        2
        4
        6
        8

        Observable     debounce<span style=color:#960050;background-color:#1e0010>（</span>去抖<span style=color:#960050;background-color:#1e0010>）</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>interval</span><span style=color:#f92672>(</span>500<span style=color:#f92672>,</span> TimeUnit<span style=color:#f92672>.</span><span style=color:#a6e22e>MILLISECONDS</span><span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>takeUntil</span><span style=color:#f92672>(</span>timer<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>debounce</span><span style=color:#f92672>(</span>1<span style=color:#f92672>,</span> TimeUnit<span style=color:#f92672>.</span><span style=color:#a6e22e>SECONDS</span><span style=color:#f92672>)</span>     1 秒无新事件后<span style=color:#960050;background-color:#1e0010>，</span>再发送其接收到的最后一个事件
                <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>exit</span><span style=color:#f92672>(</span>0<span style=color:#f92672>));</span>
        Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>sleep</span><span style=color:#f92672>(</span>Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>MAX_VALUE</span><span style=color:#f92672>);</span>
        <span style=color:#f92672>----</span>
        输出<span style=color:#960050;background-color:#1e0010>：（</span>CPU 时间不准<span style=color:#960050;background-color:#1e0010>）</span>
        8
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div></div><div class=sharing style=text-align:center><br><p>捐赠支持</p><p>如果我的文章对你有所帮助，欢迎通过支付宝的扫一扫，轻松的向我发起捐助。</p><p>对于你的支持，我会心怀感激且倍感荣幸地接受，并继续努力。</p><img src=https://ww4.sinaimg.cn/large/a15b4afegw1fbn096ql6dj20dw0dwwe9.jpg alt title data-action=zoom width=40%><p></p><br>&copy; 2015-2020 XhstormR</div></div></div></div><div id=backtop><a href=# title>TOP</a></div><nav id=TableOfContents><ul><li><a href=#java-native>Java Native</a></li><li><a href=#observable---被观察者>Observable - 被观察者</a></li><li><a href=#observer---观察者>Observer - 观察者</a></li><li><a href=#scheduler---线程调度>Scheduler - 线程调度</a></li><li><a href=#operators---操作符>Operators - 操作符</a><ul><li><a href=#转换>转换</a></li><li><a href=#过滤>过滤</a></li><li><a href=#组合>组合</a></li></ul></li><li><a href=#code>Code</a></li></ul></nav><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/languages/yaml.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/languages/kotlin.min.js></script><script>hljs.initHighlightingOnLoad()</script><script src=https://blog.xhstormr.tk/js/zoom.min.js></script><script>window.addEventListener("load",show),window.onscroll=show;function show(){document.documentElement.scrollTop+document.body.scrollTop>300?document.getElementById("backtop").style.display="block":document.getElementById("backtop").style.display="none"}</script><script type=text/javascript color=0,0,0 opacity=1 zindex=-2 count=49 src=https://cdnjs.cloudflare.com/ajax/libs/canvas-nest.js/2.0.4/canvas-nest.js></script></body></html>