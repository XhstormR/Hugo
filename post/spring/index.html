<!doctype html><html lang=zh-cn manifest=https://blog.xhstormr.tk/offline.appcache><head><meta charset=utf-8><meta name=renderer content="webkit"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>Spring Framework &#183; XhstormR</title><link rel=alternate type=application/rss+xml title=XhstormR href><link rel=icon type=image/x-icon href=https://blog.xhstormr.tk/favicon.ico><link rel=stylesheet href=https://blog.xhstormr.tk/css/uno.min.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/monokai-sublime.min.css><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js></script><script src=https://blog.xhstormr.tk/js/main.min.js async defer></script></head><body><div id=scriptHeader><span class="mobile btn-mobile-menu"><i class="fa fa-bars btn-mobile-menu__icon"></i>
<i class="fa fa-times btn-mobile-close__icon hidden"></i></span><header class="panel-cover panel-cover--collapsed"><div class=panel-main><div class="panel-main__inner panel-inverted"><div class=panel-main__content><h1 class="panel-cover__title panel-title"><a href=https://blog.xhstormr.tk/ title="link to homepage for XhstormR">XhstormR</a></h1><hr class=panel-cover__divider><p class=panel-cover__description>On a dark desert highway, cool wind in my hair.</p><hr class="panel-cover__divider panel-cover__divider--secondary"><div class=navigation-wrapper><nav class="cover-navigation cover-navigation--primary"><ul class=navigation><li class=navigation__item><a href=https://blog.xhstormr.tk#blog title="link to XhstormR blog" class=blog-button>Blog</a></li></ul></nav></div></div></div><div class=panel-cover--overlay></div></div></header></div><div class=bodytop><div class=content-wrapper><div class=content-wrapper__inner><div class=post><h1>Spring Framework</h1><span class=post-date>2017-05-21</span><p>Updated on 2017-07-11</p><blockquote><p style=text-align:center><img data-src=/uploads/spring.png alt title="Spring Framework" data-action=zoom width></p><script>[].forEach.call(document.querySelectorAll("img[data-src]"),function(a){a.setAttribute("src",a.getAttribute("data-src")),a.onload=function(){a.removeAttribute("data-src")}})</script><p><a href=https://spring.io/projects>https://spring.io/projects</a></p><p><a href=https://github.com/spring-projects/spring-framework>https://github.com/spring-projects/spring-framework</a></p><p><a href=https://github.com/spring-projects/spring-boot>https://github.com/spring-projects/spring-boot</a></p><p><a href=https://raw.githubusercontent.com/spring-projects/spring-boot/master/spring-boot-project/spring-boot-dependencies/build.gradle>Dependency</a></p><p><a href=https://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/>Spring Doc</a>
|
<a href=https://docs.spring.io/spring/docs/current/javadoc-api/allclasses-noframe.html>Spring API</a></p><p><a href=https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/>Spring Boot Doc</a>
|
<a href=https://docs.spring.io/spring-boot/docs/current/api/allclasses-noframe.html>Spring Boot API</a></p><p><a href=https://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/>Spring Security Doc</a>
|
<a href=https://docs.spring.io/spring-security/site/docs/current/api/allclasses-noframe.html>Spring Security API</a></p><p><a href=https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.query-creation>Spring Data JPA Doc</a>
|
<a href=https://docs.spring.io/spring-data/jpa/docs/current/api/allclasses-noframe.html>Spring Data JPA API</a></p></blockquote><h2 id=concept>Concept</h2><ul><li>控制反转（IOC）：应用程序本身不负责依赖对象的创建与维护，而是<strong>由外部容器负责管理</strong>。<ul><li>依赖注入（DI）是其实现方式。</li><li>依赖对象 <strong>通过接口</strong> 了解注入对象并 <strong>表明依赖关系</strong>。（面向接口编程）</li><li>作用：负责 <strong>创建</strong> 对象并 <strong>维护</strong> 对象之间的依赖关系，使应用对象彼此之间保持 <strong>低耦合</strong>。</li><li>对象解耦。</li></ul></li><li>面向切面编程（AOP）：用另一种编程架构的思想来 <strong>补充面向对象编程</strong>（OOP）的思想。<ul><li>AOP 进行 <strong>提取</strong>，OOP 进行 <strong>封装</strong>。</li><li>AOP 主要的模块单元是 <strong>切面</strong>（Aspect），而 OOP 主要的模块单元是 <strong>类</strong>（Class）。</li><li>作用：使诸如日志管理等分散在各个应用对象的 <strong>逻辑（横切关注点）模块化为切面</strong>。</li><li>功能解耦。</li></ul></li><li>装配：Wiring。</li><li>感知：Aware。</li><li>组件：@Component<ul><li>控制层：@Controller</li><li>业务层：@Service</li><li>持久层：@Repository</li></ul></li></ul><h2 id=configuration>Configuration</h2><h3 id=buildgradlekts>build.gradle.kts</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>compile<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;org.springframework:spring-context:+&#34;</span><span style=color:#f92672>)</span>

compile<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;org.springframework:spring-aspects:+&#34;</span><span style=color:#f92672>)</span>
</code></pre></div><h2 id=装配方式>装配方式</h2><h3 id=组件扫描和自动装配隐式装配>组件扫描和自动装配（隐式装配）</h3><h4 id=soundsystem>soundsystem</h4><h5 id=compactdisc>CompactDisc</h5><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>package</span> soundsystem<span style=color:#f92672>;</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>CompactDisc</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>play</span><span style=color:#f92672>();</span>
<span style=color:#f92672>}</span>
</code></pre></div><h5 id=mediaplayer>MediaPlayer</h5><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>package</span> soundsystem<span style=color:#f92672>;</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>MediaPlayer</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>play</span><span style=color:#f92672>();</span>
<span style=color:#f92672>}</span>
</code></pre></div><h5 id=sgtpeppers><strong>SgtPeppers</strong></h5><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>package</span> soundsystem<span style=color:#f92672>;</span>

<span style=color:#f92672>import</span> org.springframework.stereotype.Component<span style=color:#f92672>;</span>

<span style=color:#a6e22e>@Component</span>     组件<span style=color:#960050;background-color:#1e0010>（</span>Java 规范中的 Named 作用与其相同<span style=color:#960050;background-color:#1e0010>）</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SgtPeppers</span> <span style=color:#66d9ef>implements</span> CompactDisc <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> String title <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Sgt. Pepper&#39;s Lonely Hearts Club Band&#34;</span><span style=color:#f92672>;</span>
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> String artist <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;The Beatles&#34;</span><span style=color:#f92672>;</span>

    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>play</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Playing &#34;</span> <span style=color:#f92672>+</span> title <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; by &#34;</span> <span style=color:#f92672>+</span> artist<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

Bean 名称的缺省值为类名<span style=color:#960050;background-color:#1e0010>（</span>首字母小写<span style=color:#960050;background-color:#1e0010>）（</span><span style=color:#a6e22e>@Component</span><span style=color:#960050;background-color:#1e0010>）。</span>
</code></pre></div><h5 id=cdplayer><strong>CDPlayer</strong></h5><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>package</span> soundsystem<span style=color:#f92672>;</span>

<span style=color:#f92672>import</span> org.springframework.beans.factory.annotation.Autowired<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> org.springframework.stereotype.Component<span style=color:#f92672>;</span>

<span style=color:#a6e22e>@Component</span>     组件<span style=color:#960050;background-color:#1e0010>（</span>Java 规范中的 Named 作用与其相同<span style=color:#960050;background-color:#1e0010>）</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CDPlayer</span> <span style=color:#66d9ef>implements</span> MediaPlayer <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>private</span> CompactDisc cd<span style=color:#f92672>;</span>

    <span style=color:#a6e22e>@Autowired</span>     自动装配<span style=color:#960050;background-color:#1e0010>（</span>Java 规范中的 Inject 作用与其相同<span style=color:#960050;background-color:#1e0010>）</span>
    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>CDPlayer</span><span style=color:#f92672>(</span>CompactDisc cd<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     构造注入
        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>cd</span> <span style=color:#f92672>=</span> cd<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>play</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        cd<span style=color:#f92672>.</span><span style=color:#a6e22e>play</span><span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><h4 id=appconfig><strong>AppConfig</strong></h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>import</span> org.springframework.context.annotation.ComponentScan<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> org.springframework.context.annotation.Configuration<span style=color:#f92672>;</span>

<span style=color:#a6e22e>@Configuration</span>     指示为配置类
<span style=color:#a6e22e>@ComponentScan</span><span style=color:#f92672>(</span>basePackages <span style=color:#f92672>=</span> <span style=color:#f92672>{</span><span style=color:#e6db74>&#34;soundsystem&#34;</span><span style=color:#f92672>})</span>     组件扫描<span style=color:#960050;background-color:#1e0010>（</span>搜寻其他 Component 和 Configuration<span style=color:#960050;background-color:#1e0010>）</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AppConfig</span> <span style=color:#f92672>{</span>
<span style=color:#f92672>}</span>
</code></pre></div><h4 id=main>Main</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> soundsystem.CDPlayer<span style=color:#f92672>;</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Main</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        AnnotationConfigApplicationContext context <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> AnnotationConfigApplicationContext<span style=color:#f92672>(</span>AppConfig<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>

        CDPlayer cdPlayer <span style=color:#f92672>=</span> context<span style=color:#f92672>.</span><span style=color:#a6e22e>getBean</span><span style=color:#f92672>(</span>CDPlayer<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
        cdPlayer<span style=color:#f92672>.</span><span style=color:#a6e22e>play</span><span style=color:#f92672>();</span>

        context<span style=color:#f92672>.</span><span style=color:#a6e22e>destroy</span><span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
Playing Sgt<span style=color:#f92672>.</span> Pepper<span style=color:#960050;background-color:#1e0010>&#39;</span>s Lonely Hearts Club Band by The Beatles
</code></pre></div><h3 id=java-注解显式装配>Java 注解（显式装配）</h3><h4 id=soundsystem-1>soundsystem</h4><h5 id=compactdisc-1>CompactDisc</h5><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>package</span> soundsystem<span style=color:#f92672>;</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>CompactDisc</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>play</span><span style=color:#f92672>();</span>
<span style=color:#f92672>}</span>
</code></pre></div><h5 id=mediaplayer-1>MediaPlayer</h5><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>package</span> soundsystem<span style=color:#f92672>;</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>MediaPlayer</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>play</span><span style=color:#f92672>();</span>
<span style=color:#f92672>}</span>
</code></pre></div><h5 id=sgtpeppers-1>SgtPeppers</h5><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>package</span> soundsystem<span style=color:#f92672>;</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SgtPeppers</span> <span style=color:#66d9ef>implements</span> CompactDisc <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> String title <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Sgt. Pepper&#39;s Lonely Hearts Club Band&#34;</span><span style=color:#f92672>;</span>
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> String artist <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;The Beatles&#34;</span><span style=color:#f92672>;</span>

    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>play</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Playing &#34;</span> <span style=color:#f92672>+</span> title <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; by &#34;</span> <span style=color:#f92672>+</span> artist<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><h5 id=cdplayer-1>CDPlayer</h5><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>package</span> soundsystem<span style=color:#f92672>;</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CDPlayer</span> <span style=color:#66d9ef>implements</span> MediaPlayer <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>private</span> CompactDisc cd<span style=color:#f92672>;</span>

    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>CDPlayer</span><span style=color:#f92672>(</span>CompactDisc cd<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>cd</span> <span style=color:#f92672>=</span> cd<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>play</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        cd<span style=color:#f92672>.</span><span style=color:#a6e22e>play</span><span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><h4 id=appconfig-1><strong>AppConfig</strong></h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>import</span> org.springframework.context.annotation.Bean<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> org.springframework.context.annotation.Configuration<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> soundsystem.CDPlayer<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> soundsystem.CompactDisc<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> soundsystem.MediaPlayer<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> soundsystem.SgtPeppers<span style=color:#f92672>;</span>

<span style=color:#a6e22e>@Configuration</span>     指示为配置类<span style=color:#960050;background-color:#1e0010>（</span>用于定义 Bean<span style=color:#960050;background-color:#1e0010>）</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AppConfig</span> <span style=color:#f92672>{</span>
    <span style=color:#a6e22e>@Bean</span>     指示该方法返回 Bean 对象并在容器中注册
    <span style=color:#66d9ef>public</span> CompactDisc <span style=color:#a6e22e>sgtPeppers</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> SgtPeppers<span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@Bean</span>     指示该方法返回 Bean 对象并在容器中注册
    <span style=color:#66d9ef>public</span> MediaPlayer <span style=color:#a6e22e>cdPlayer</span><span style=color:#f92672>(</span>CompactDisc cd<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     从容器中获取依赖对象
        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>CDPlayer</span><span style=color:#f92672>(</span>cd<span style=color:#f92672>);</span>     并注入<span style=color:#960050;background-color:#1e0010>（</span>装配<span style=color:#960050;background-color:#1e0010>）</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

Bean 名称的缺省值为方法名<span style=color:#960050;background-color:#1e0010>（</span><span style=color:#a6e22e>@Bean</span><span style=color:#960050;background-color:#1e0010>）。</span>
</code></pre></div><h4 id=main-1>Main</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> soundsystem.CDPlayer<span style=color:#f92672>;</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Main</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        AnnotationConfigApplicationContext context <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> AnnotationConfigApplicationContext<span style=color:#f92672>(</span>AppConfig<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>

        CDPlayer cdPlayer <span style=color:#f92672>=</span> context<span style=color:#f92672>.</span><span style=color:#a6e22e>getBean</span><span style=color:#f92672>(</span>CDPlayer<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
        cdPlayer<span style=color:#f92672>.</span><span style=color:#a6e22e>play</span><span style=color:#f92672>();</span>

        context<span style=color:#f92672>.</span><span style=color:#a6e22e>destroy</span><span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
Playing Sgt<span style=color:#f92672>.</span> Pepper<span style=color:#960050;background-color:#1e0010>&#39;</span>s Lonely Hearts Club Band by The Beatles
</code></pre></div><h3 id=xml-文件显式装配>XML 文件（显式装配）</h3><h4 id=soundsystem-2>soundsystem</h4><h5 id=compactdisc-2>CompactDisc</h5><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>package</span> soundsystem<span style=color:#f92672>;</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>CompactDisc</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>play</span><span style=color:#f92672>();</span>
<span style=color:#f92672>}</span>
</code></pre></div><h5 id=mediaplayer-2>MediaPlayer</h5><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>package</span> soundsystem<span style=color:#f92672>;</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>MediaPlayer</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>play</span><span style=color:#f92672>();</span>
<span style=color:#f92672>}</span>
</code></pre></div><h5 id=sgtpeppers-2>SgtPeppers</h5><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>package</span> soundsystem<span style=color:#f92672>;</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SgtPeppers</span> <span style=color:#66d9ef>implements</span> CompactDisc <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> String title <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Sgt. Pepper&#39;s Lonely Hearts Club Band&#34;</span><span style=color:#f92672>;</span>
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> String artist <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;The Beatles&#34;</span><span style=color:#f92672>;</span>

    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>play</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Playing &#34;</span> <span style=color:#f92672>+</span> title <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; by &#34;</span> <span style=color:#f92672>+</span> artist<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><h5 id=cdplayer-2>CDPlayer</h5><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>package</span> soundsystem<span style=color:#f92672>;</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CDPlayer</span> <span style=color:#66d9ef>implements</span> MediaPlayer <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>private</span> CompactDisc cd<span style=color:#f92672>;</span>

    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>CDPlayer</span><span style=color:#f92672>(</span>CompactDisc cd<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>cd</span> <span style=color:#f92672>=</span> cd<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>play</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        cd<span style=color:#f92672>.</span><span style=color:#a6e22e>play</span><span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><h4 id=main-2>Main</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>import</span> org.springframework.context.support.GenericXmlApplicationContext<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> soundsystem.CDPlayer<span style=color:#f92672>;</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Main</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        GenericXmlApplicationContext context <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> GenericXmlApplicationContext<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;123.xml&#34;</span><span style=color:#f92672>);</span>

        CDPlayer cdPlayer <span style=color:#f92672>=</span> context<span style=color:#f92672>.</span><span style=color:#a6e22e>getBean</span><span style=color:#f92672>(</span>CDPlayer<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
        cdPlayer<span style=color:#f92672>.</span><span style=color:#a6e22e>play</span><span style=color:#f92672>();</span>

        context<span style=color:#f92672>.</span><span style=color:#a6e22e>destroy</span><span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
Playing Sgt<span style=color:#f92672>.</span> Pepper<span style=color:#960050;background-color:#1e0010>&#39;</span>s Lonely Hearts Club Band by The Beatles
</code></pre></div><h4 id=123xml><strong>123.xml</strong></h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style=color:#75715e>&lt;!DOCTYPE beans PUBLIC
</span><span style=color:#75715e>        &#34;-//SPRING//DTD BEAN 2.0//EN&#34;
</span><span style=color:#75715e>        &#34;http://www.springframework.org/dtd/spring-beans-2.0.dtd&#34;&gt;</span>
<span style=color:#f92672>&lt;beans&gt;</span>
    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;sgtPeppers&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;soundsystem.SgtPeppers&#34;</span><span style=color:#f92672>/&gt;</span>     声明 Bean 并指定名称

    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;soundsystem.CDPlayer&#34;</span><span style=color:#f92672>&gt;</span>     声明 Bean，缺省名称为 &#34;soundsystem.CDPlayer#0&#34;
        <span style=color:#f92672>&lt;constructor-arg</span> <span style=color:#a6e22e>ref=</span><span style=color:#e6db74>&#34;sgtPeppers&#34;</span><span style=color:#f92672>/&gt;</span>     强制依赖的注入可使用构造方法（构造注入）
        ----
        <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;cd&#34;</span> <span style=color:#a6e22e>ref=</span><span style=color:#e6db74>&#34;sgtPeppers&#34;</span><span style=color:#f92672>/&gt;</span>     可选依赖的注入可使用 Setter（设值注入）
        对应 Setter：
        public void setCd(CompactDisc cd) {
            this.cd = cd;
        }
    <span style=color:#f92672>&lt;/bean&gt;</span>
<span style=color:#f92672>&lt;/beans&gt;</span>
</code></pre></div><h3 id=混合使用>混合使用</h3><h4 id=cd-configxml><strong>cd-config.xml</strong></h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style=color:#75715e>&lt;!DOCTYPE beans PUBLIC
</span><span style=color:#75715e>        &#34;-//SPRING//DTD BEAN 2.0//EN&#34;
</span><span style=color:#75715e>        &#34;http://www.springframework.org/dtd/spring-beans-2.0.dtd&#34;&gt;</span>
<span style=color:#f92672>&lt;beans&gt;</span>
    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;soundsystem.SgtPeppers&#34;</span><span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;/beans&gt;</span>
</code></pre></div><h4 id=playerconfig><strong>PlayerConfig</strong></h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>import</span> org.springframework.context.annotation.Bean<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> org.springframework.context.annotation.Configuration<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> soundsystem.CDPlayer<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> soundsystem.CompactDisc<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> soundsystem.MediaPlayer<span style=color:#f92672>;</span>

<span style=color:#a6e22e>@Configuration</span>     指示为配置类
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>PlayerConfig</span> <span style=color:#f92672>{</span>
    <span style=color:#a6e22e>@Bean</span>
    <span style=color:#66d9ef>public</span> MediaPlayer <span style=color:#a6e22e>cdPlayer</span><span style=color:#f92672>(</span>CompactDisc cd<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> CDPlayer<span style=color:#f92672>(</span>cd<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><h4 id=appconfig-2><strong>AppConfig</strong></h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>import</span> org.springframework.context.annotation.Configuration<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> org.springframework.context.annotation.Import<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> org.springframework.context.annotation.ImportResource<span style=color:#f92672>;</span>

<span style=color:#a6e22e>@Configuration</span>
<span style=color:#a6e22e>@Import</span><span style=color:#f92672>(</span>PlayerConfig<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>)</span>     导入 Java 注解
<span style=color:#a6e22e>@ImportResource</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;cd-config.xml&#34;</span><span style=color:#f92672>)</span>     导入 XML 文件
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AppConfig</span> <span style=color:#f92672>{</span>
<span style=color:#f92672>}</span>
</code></pre></div><h4 id=main-3>Main</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> soundsystem.CDPlayer<span style=color:#f92672>;</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Main</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        AnnotationConfigApplicationContext context <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> AnnotationConfigApplicationContext<span style=color:#f92672>(</span>AppConfig<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>

        CDPlayer cdPlayer <span style=color:#f92672>=</span> context<span style=color:#f92672>.</span><span style=color:#a6e22e>getBean</span><span style=color:#f92672>(</span>CDPlayer<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
        cdPlayer<span style=color:#f92672>.</span><span style=color:#a6e22e>play</span><span style=color:#f92672>();</span>

        context<span style=color:#f92672>.</span><span style=color:#a6e22e>destroy</span><span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
Playing Sgt<span style=color:#f92672>.</span> Pepper<span style=color:#960050;background-color:#1e0010>&#39;</span>s Lonely Hearts Club Band by The Beatles
</code></pre></div></div><div class=sharing style=text-align:center><br><p>捐赠支持</p><p>如果我的文章对你有所帮助，欢迎通过支付宝的扫一扫，轻松的向我发起捐助。</p><p>对于你的支持，我会心怀感激且倍感荣幸地接受，并继续努力。</p><img src=https://ww4.sinaimg.cn/large/a15b4afegw1fbn096ql6dj20dw0dwwe9.jpg alt title data-action=zoom width=40%><p></p><br>&copy; 2015-2020 XhstormR</div></div></div></div><div id=backtop><a href=# title>TOP</a></div><nav id=TableOfContents><ul><li><a href=#concept>Concept</a></li><li><a href=#configuration>Configuration</a><ul><li><a href=#buildgradlekts>build.gradle.kts</a></li></ul></li><li><a href=#装配方式>装配方式</a><ul><li><a href=#组件扫描和自动装配隐式装配>组件扫描和自动装配（隐式装配）</a></li><li><a href=#java-注解显式装配>Java 注解（显式装配）</a></li><li><a href=#xml-文件显式装配>XML 文件（显式装配）</a></li><li><a href=#混合使用>混合使用</a></li></ul></li></ul></nav><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/languages/yaml.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/languages/kotlin.min.js></script><script>hljs.initHighlightingOnLoad()</script><script src=https://blog.xhstormr.tk/js/zoom.min.js></script><script>window.addEventListener("load",show),window.onscroll=show;function show(){document.documentElement.scrollTop+document.body.scrollTop>300?document.getElementById("backtop").style.display="block":document.getElementById("backtop").style.display="none"}</script><script type=text/javascript color=0,0,0 opacity=1 zindex=-2 count=49 src=https://cdnjs.cloudflare.com/ajax/libs/canvas-nest.js/2.0.4/canvas-nest.js></script></body></html>