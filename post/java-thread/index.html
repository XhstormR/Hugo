<!doctype html><html lang=zh-cn manifest=https://blog.xhstormr.tk/offline.appcache><head><meta charset=utf-8><meta name=renderer content="webkit"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>Java Thread &#183; XhstormR</title><link rel=alternate type=application/rss+xml title=XhstormR href><link rel=icon type=image/x-icon href=https://blog.xhstormr.tk/favicon.ico><link rel=stylesheet href=https://blog.xhstormr.tk/css/uno.min.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/monokai-sublime.min.css><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js></script><script src=https://blog.xhstormr.tk/js/main.min.js async defer></script></head><body><div id=scriptHeader><span class="mobile btn-mobile-menu"><i class="fa fa-bars btn-mobile-menu__icon"></i>
<i class="fa fa-times btn-mobile-close__icon hidden"></i></span><header class="panel-cover panel-cover--collapsed"><div class=panel-main><div class="panel-main__inner panel-inverted"><div class=panel-main__content><h1 class="panel-cover__title panel-title"><a href=https://blog.xhstormr.tk/ title="link to homepage for XhstormR">XhstormR</a></h1><hr class=panel-cover__divider><p class=panel-cover__description>On a dark desert highway, cool wind in my hair.</p><hr class="panel-cover__divider panel-cover__divider--secondary"><div class=navigation-wrapper><nav class="cover-navigation cover-navigation--primary"><ul class=navigation><li class=navigation__item><a href=https://blog.xhstormr.tk#blog title="link to XhstormR blog" class=blog-button>Blog</a></li></ul></nav></div></div></div><div class=panel-cover--overlay></div></div></header></div><div class=bodytop><div class=content-wrapper><div class=content-wrapper__inner><div class=post><h1>Java Thread</h1><span class=post-date>2016-10-19</span><p>Updated on 2016-10-24</p><blockquote><p style=text-align:center><img data-src=/uploads/java-thread.svg alt title="Thread 状态" data-action=zoom width></p><script>[].forEach.call(document.querySelectorAll("img[data-src]"),function(a){a.setAttribute("src",a.getAttribute("data-src")),a.onload=function(){a.removeAttribute("data-src")}})</script><p><a href=http://download.java.net/jdk/jdk-api-localizations/jdk-api-zh-cn/publish/1.6.0/html/zh_CN/api/java/lang/Thread.html>Thread</a></p><p><a href=http://download.java.net/jdk/jdk-api-localizations/jdk-api-zh-cn/publish/1.6.0/html/zh_CN/api/java/lang/Thread.State.html>Thread.State</a></p><p><a href=http://download.java.net/jdk/jdk-api-localizations/jdk-api-zh-cn/publish/1.6.0/html/zh_CN/api/java/lang/Object.html#wait()>Object.wait()</a>
|
<a href=http://download.java.net/jdk/jdk-api-localizations/jdk-api-zh-cn/publish/1.6.0/html/zh_CN/api/java/lang/Object.html#notifyAll()>Object.notifyAll()</a></p></blockquote><ul><li>进程：一块包含了某些资源的内存区域。<ul><li>一个进程中至少包含一个或多个线程（执行单元）。</li><li>进程的内存区域仅能被它所包含的线程访问。</li></ul></li><li>线程：进程的顺序执行流，系统中最小的执行单元。<ul><li>线程只能归属于一个进程并且只能访问该进程的资源。</li><li>进程的所有线程共享同一块内存空间。</li></ul></li><li>并发：OS 的线程调度机制将时间划分为很多时间片（<strong>分时</strong>），尽可能均匀分配给正在运行的线程（<strong>抢占</strong>），获得 CPU 时间片的线程得以被执行，其他则等待；而 CPU 则在这些线程上来回切换运行（<strong>上下文切换</strong>）。<ul><li>微观上走走停停，宏观上都在运行。</li></ul></li></ul><h2 id=创建线程>创建线程</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#66d9ef>extends</span> Thread <span style=color:#f92672>{</span>     通过继承 Thread 类
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        Thread a <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> A<span style=color:#f92672>();</span>     实例化线程
        a<span style=color:#f92672>.</span><span style=color:#a6e22e>start</span><span style=color:#f92672>();</span>     启动线程
    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>     执行逻辑
        <span style=color:#a6e22e>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> 5<span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
            System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;123&#34;</span><span style=color:#f92672>);</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

<span style=color:#f92672>----</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#66d9ef>implements</span> Runnable <span style=color:#f92672>{</span>     通过实现 Runnable 接口<span style=color:#960050;background-color:#1e0010>（</span>推荐<span style=color:#960050;background-color:#1e0010>，</span>因为单继承<span style=color:#960050;background-color:#1e0010>，</span>多实现<span style=color:#960050;background-color:#1e0010>）</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        Thread a <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Thread<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> A<span style=color:#f92672>());</span>     实例化线程并传入线程体
        a<span style=color:#f92672>.</span><span style=color:#a6e22e>start</span><span style=color:#f92672>();</span>     启动线程
    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>     执行逻辑
        <span style=color:#a6e22e>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> 5<span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
            System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;123&#34;</span><span style=color:#f92672>);</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

<span style=color:#f92672>----</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#f92672>{</span>     通过创建匿名内部类
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        Thread a <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Thread<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>     Thread 方式
            <span style=color:#a6e22e>@Override</span>
            <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>     执行逻辑
                <span style=color:#a6e22e>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> 5<span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
                    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;123&#34;</span><span style=color:#f92672>);</span>
                <span style=color:#f92672>}</span>
            <span style=color:#f92672>}</span>
        <span style=color:#f92672>};</span>
        a<span style=color:#f92672>.</span><span style=color:#a6e22e>start</span><span style=color:#f92672>();</span>     启动线程

        Thread b <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Thread<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Runnable<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>     Runnable 方式
            <span style=color:#a6e22e>@Override</span>
            <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>     执行逻辑
                <span style=color:#a6e22e>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> 5<span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
                    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;123&#34;</span><span style=color:#f92672>);</span>
                <span style=color:#f92672>}</span>
            <span style=color:#f92672>}</span>
        <span style=color:#f92672>});</span>
        b<span style=color:#f92672>.</span><span style=color:#a6e22e>start</span><span style=color:#f92672>();</span>     启动线程
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><h2 id=操作线程>操作线程</h2><h3 id=线程信息>线程信息</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#66d9ef>implements</span> Runnable <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> InterruptedException <span style=color:#f92672>{</span>
        Thread thread <span style=color:#f92672>=</span> Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>();</span>     获取当前线程对象<span style=color:#960050;background-color:#1e0010>（</span>这里获得了主线程对象<span style=color:#960050;background-color:#1e0010>）</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;标识符::名称::优先级::状态::是否处于活动状态::是否标记为中断&#34;</span><span style=color:#f92672>);</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>thread<span style=color:#f92672>.</span><span style=color:#a6e22e>getId</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> thread<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> thread<span style=color:#f92672>.</span><span style=color:#a6e22e>getPriority</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> thread<span style=color:#f92672>.</span><span style=color:#a6e22e>getState</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> thread<span style=color:#f92672>.</span><span style=color:#a6e22e>isAlive</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> thread<span style=color:#f92672>.</span><span style=color:#a6e22e>isInterrupted</span><span style=color:#f92672>());</span>

        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>();</span>
        Thread a <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Thread<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> A<span style=color:#f92672>(),</span> <span style=color:#e6db74>&#34;MyThread_1&#34;</span><span style=color:#f92672>);</span>     实例化线程并传入线程体
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>a<span style=color:#f92672>.</span><span style=color:#a6e22e>getId</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> a<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> a<span style=color:#f92672>.</span><span style=color:#a6e22e>getPriority</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> a<span style=color:#f92672>.</span><span style=color:#a6e22e>getState</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> a<span style=color:#f92672>.</span><span style=color:#a6e22e>isAlive</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> a<span style=color:#f92672>.</span><span style=color:#a6e22e>isInterrupted</span><span style=color:#f92672>());</span>
        a<span style=color:#f92672>.</span><span style=color:#a6e22e>start</span><span style=color:#f92672>();</span>     启动线程
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>a<span style=color:#f92672>.</span><span style=color:#a6e22e>getId</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> a<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> a<span style=color:#f92672>.</span><span style=color:#a6e22e>getPriority</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> a<span style=color:#f92672>.</span><span style=color:#a6e22e>getState</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> a<span style=color:#f92672>.</span><span style=color:#a6e22e>isAlive</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> a<span style=color:#f92672>.</span><span style=color:#a6e22e>isInterrupted</span><span style=color:#f92672>());</span>
        Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>sleep</span><span style=color:#f92672>(</span>1000<span style=color:#f92672>);</span>     当前线程进入阻塞状态 1 秒<span style=color:#960050;background-color:#1e0010>（</span>1000 毫秒 <span style=color:#f92672>=</span> 1 秒<span style=color:#960050;background-color:#1e0010>）</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>a<span style=color:#f92672>.</span><span style=color:#a6e22e>getId</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> a<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> a<span style=color:#f92672>.</span><span style=color:#a6e22e>getPriority</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> a<span style=color:#f92672>.</span><span style=color:#a6e22e>getState</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> a<span style=color:#f92672>.</span><span style=color:#a6e22e>isAlive</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> a<span style=color:#f92672>.</span><span style=color:#a6e22e>isInterrupted</span><span style=color:#f92672>());</span>

        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>();</span>
        Thread b <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Thread<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> A<span style=color:#f92672>(),</span> <span style=color:#e6db74>&#34;MyThread_2&#34;</span><span style=color:#f92672>);</span>     实例化线程并传入线程体
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>b<span style=color:#f92672>.</span><span style=color:#a6e22e>getId</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> b<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> b<span style=color:#f92672>.</span><span style=color:#a6e22e>getPriority</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> b<span style=color:#f92672>.</span><span style=color:#a6e22e>getState</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> b<span style=color:#f92672>.</span><span style=color:#a6e22e>isAlive</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> b<span style=color:#f92672>.</span><span style=color:#a6e22e>isInterrupted</span><span style=color:#f92672>());</span>
        b<span style=color:#f92672>.</span><span style=color:#a6e22e>start</span><span style=color:#f92672>();</span>     启动线程
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>b<span style=color:#f92672>.</span><span style=color:#a6e22e>getId</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> b<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> b<span style=color:#f92672>.</span><span style=color:#a6e22e>getPriority</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> b<span style=color:#f92672>.</span><span style=color:#a6e22e>getState</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> b<span style=color:#f92672>.</span><span style=color:#a6e22e>isAlive</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> b<span style=color:#f92672>.</span><span style=color:#a6e22e>isInterrupted</span><span style=color:#f92672>());</span>
        Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>sleep</span><span style=color:#f92672>(</span>1000<span style=color:#f92672>);</span>     当前线程进入阻塞状态 1 秒<span style=color:#960050;background-color:#1e0010>（</span>1000 毫秒 <span style=color:#f92672>=</span> 1 秒<span style=color:#960050;background-color:#1e0010>）</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>b<span style=color:#f92672>.</span><span style=color:#a6e22e>getId</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> b<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> b<span style=color:#f92672>.</span><span style=color:#a6e22e>getPriority</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> b<span style=color:#f92672>.</span><span style=color:#a6e22e>getState</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> b<span style=color:#f92672>.</span><span style=color:#a6e22e>isAlive</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> b<span style=color:#f92672>.</span><span style=color:#a6e22e>isInterrupted</span><span style=color:#f92672>());</span>
    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
标识符:<span style=color:#f92672>:</span>名称<span style=color:#f92672>::</span>优先级<span style=color:#f92672>::</span>状态<span style=color:#f92672>::</span>是否处于活动状态<span style=color:#f92672>::</span>是否标记为中断
1:<span style=color:#f92672>:</span>main<span style=color:#f92672>::</span>5<span style=color:#f92672>::</span>RUNNABLE<span style=color:#f92672>::</span><span style=color:#66d9ef>true</span><span style=color:#f92672>::</span><span style=color:#66d9ef>false</span>

11:<span style=color:#f92672>:</span>MyThread_1<span style=color:#f92672>::</span>5<span style=color:#f92672>::</span>NEW<span style=color:#f92672>::</span><span style=color:#66d9ef>false</span><span style=color:#f92672>::</span><span style=color:#66d9ef>false</span>
11:<span style=color:#f92672>:</span>MyThread_1<span style=color:#f92672>::</span>5<span style=color:#f92672>::</span>RUNNABLE<span style=color:#f92672>::</span><span style=color:#66d9ef>true</span><span style=color:#f92672>::</span><span style=color:#66d9ef>false</span>
11:<span style=color:#f92672>:</span>MyThread_1<span style=color:#f92672>::</span>5<span style=color:#f92672>::</span>TERMINATED<span style=color:#f92672>::</span><span style=color:#66d9ef>false</span><span style=color:#f92672>::</span><span style=color:#66d9ef>false</span>

12:<span style=color:#f92672>:</span>MyThread_2<span style=color:#f92672>::</span>5<span style=color:#f92672>::</span>NEW<span style=color:#f92672>::</span><span style=color:#66d9ef>false</span><span style=color:#f92672>::</span><span style=color:#66d9ef>false</span>
12:<span style=color:#f92672>:</span>MyThread_2<span style=color:#f92672>::</span>5<span style=color:#f92672>::</span>RUNNABLE<span style=color:#f92672>::</span><span style=color:#66d9ef>true</span><span style=color:#f92672>::</span><span style=color:#66d9ef>false</span>
12:<span style=color:#f92672>:</span>MyThread_2<span style=color:#f92672>::</span>5<span style=color:#f92672>::</span>TERMINATED<span style=color:#f92672>::</span><span style=color:#66d9ef>false</span><span style=color:#f92672>::</span><span style=color:#66d9ef>false</span>
</code></pre></div><h3 id=线程优先级>线程优先级</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#66d9ef>implements</span> Runnable <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        Thread a <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Thread<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> A<span style=color:#f92672>(),</span> <span style=color:#e6db74>&#34;MyThread_1&#34;</span><span style=color:#f92672>);</span>
        Thread b <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Thread<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> A<span style=color:#f92672>(),</span> <span style=color:#e6db74>&#34;MyThread_2&#34;</span><span style=color:#f92672>);</span>
        a<span style=color:#f92672>.</span><span style=color:#a6e22e>setPriority</span><span style=color:#f92672>(</span>Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>NORM_PRIORITY</span><span style=color:#f92672>);</span>     默认优先级 5
        a<span style=color:#f92672>.</span><span style=color:#a6e22e>setPriority</span><span style=color:#f92672>(</span>Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>MIN_PRIORITY</span><span style=color:#f92672>);</span>     设置为最小优先级 1<span style=color:#960050;background-color:#1e0010>（</span>降低线程获得时间片的几率<span style=color:#960050;background-color:#1e0010>）</span>
        b<span style=color:#f92672>.</span><span style=color:#a6e22e>setPriority</span><span style=color:#f92672>(</span>Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>MAX_PRIORITY</span><span style=color:#f92672>);</span>     设置为最大优先级 10<span style=color:#960050;background-color:#1e0010>（</span>提高线程获得时间片的几率<span style=color:#960050;background-color:#1e0010>）</span>
        a<span style=color:#f92672>.</span><span style=color:#a6e22e>start</span><span style=color:#f92672>();</span>     启动线程
        b<span style=color:#f92672>.</span><span style=color:#a6e22e>start</span><span style=color:#f92672>();</span>     启动线程
    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        Thread thread <span style=color:#f92672>=</span> Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>();</span>     获取当前线程对象
        <span style=color:#a6e22e>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> 5<span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
            System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>thread<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>());</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
MyThread_2
MyThread_2
MyThread_2
MyThread_2
MyThread_2
MyThread_1
MyThread_1
MyThread_1
MyThread_1
MyThread_1
</code></pre></div><h3 id=守护线程>守护线程</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#66d9ef>implements</span> Runnable <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        Thread a <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Thread<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> A<span style=color:#f92672>(),</span> <span style=color:#e6db74>&#34;Daemon&#34;</span><span style=color:#f92672>);</span>
        a<span style=color:#f92672>.</span><span style=color:#a6e22e>setDaemon</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>     设置为守护线程<span style=color:#960050;background-color:#1e0010>（</span>特点<span style=color:#960050;background-color:#1e0010>：</span>当进程中只剩下守护线程时<span style=color:#960050;background-color:#1e0010>，</span>所有守护线程将被强制终止<span style=color:#960050;background-color:#1e0010>）</span>
        a<span style=color:#f92672>.</span><span style=color:#a6e22e>start</span><span style=color:#f92672>();</span>     启动线程
    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        Thread thread <span style=color:#f92672>=</span> Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>();</span>     获取当前线程对象
        <span style=color:#a6e22e>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 1<span style=color:#f92672>;</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
            System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>thread<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> i<span style=color:#f92672>);</span>
            <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
                Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>sleep</span><span style=color:#f92672>(</span>1000<span style=color:#f92672>);</span>     当前线程进入阻塞状态 1 秒
            <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>InterruptedException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
                e<span style=color:#f92672>.</span><span style=color:#a6e22e>printStackTrace</span><span style=color:#f92672>();</span>
            <span style=color:#f92672>}</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
<span style=color:#960050;background-color:#1e0010>（</span>无<span style=color:#960050;background-color:#1e0010>）</span>
</code></pre></div><h3 id=阻塞线程>阻塞线程</h3><h4 id=sleep>sleep</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        SimpleDateFormat simpleDateFormat <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> SimpleDateFormat<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;hh:mm:ss&#34;</span><span style=color:#f92672>);</span>
        <span style=color:#66d9ef>while</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>simpleDateFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>format</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Date<span style=color:#f92672>()));</span>
            <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
                Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>sleep</span><span style=color:#f92672>(</span>1000<span style=color:#f92672>);</span>     当前线程进入阻塞状态 1 秒<span style=color:#960050;background-color:#1e0010>（</span>不会释放锁<span style=color:#960050;background-color:#1e0010>），</span>之后重新进入 Runnable 状态<span style=color:#960050;background-color:#1e0010>，</span>等待获得时间片
            <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>InterruptedException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
                e<span style=color:#f92672>.</span><span style=color:#a6e22e>printStackTrace</span><span style=color:#f92672>();</span>
            <span style=color:#f92672>}</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
11:44<span style=color:#f92672>:</span>23
11:44<span style=color:#f92672>:</span>24
11:44<span style=color:#f92672>:</span>25
11:44<span style=color:#f92672>:</span>26
11:44<span style=color:#f92672>:</span>27
11:44<span style=color:#f92672>:</span>28
<span style=color:#f92672>...</span>
</code></pre></div><h4 id=join>join</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#66d9ef>implements</span> Runnable <span style=color:#f92672>{</span>     使用 join 方法
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        Thread a <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Thread<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> A<span style=color:#f92672>(),</span> <span style=color:#e6db74>&#34;MyThread_1&#34;</span><span style=color:#f92672>);</span>
        a<span style=color:#f92672>.</span><span style=color:#a6e22e>start</span><span style=color:#f92672>();</span>     启动线程
        <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
            a<span style=color:#f92672>.</span><span style=color:#a6e22e>join</span><span style=color:#f92672>();</span>     当前线程进入阻塞状态<span style=color:#960050;background-color:#1e0010>，</span>等待调用 join 方法的线程的线程体<span style=color:#960050;background-color:#1e0010>（</span>run 方法<span style=color:#960050;background-color:#1e0010>）</span>结束
        <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>InterruptedException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            e<span style=color:#f92672>.</span><span style=color:#a6e22e>printStackTrace</span><span style=color:#f92672>();</span>
        <span style=color:#f92672>}</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;—————————————&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        Thread thread <span style=color:#f92672>=</span> Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>();</span>
        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> 5<span style=color:#f92672>;</span> <span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>thread<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> <span style=color:#f92672>++</span>i<span style=color:#f92672>);</span>
            <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
                Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>sleep</span><span style=color:#f92672>(</span>1000<span style=color:#f92672>);</span>
            <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>InterruptedException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
                e<span style=color:#f92672>.</span><span style=color:#a6e22e>printStackTrace</span><span style=color:#f92672>();</span>
            <span style=color:#f92672>}</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
MyThread_1:<span style=color:#f92672>:</span>1
MyThread_1:<span style=color:#f92672>:</span>2
MyThread_1:<span style=color:#f92672>:</span>3
MyThread_1:<span style=color:#f92672>:</span>4
MyThread_1:<span style=color:#f92672>:</span>5
<span style=color:#960050;background-color:#1e0010>—————————————</span>

<span style=color:#f92672>-------------------------------------------------------</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#66d9ef>implements</span> Runnable <span style=color:#f92672>{</span>     未使用 join 方法
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        Thread a <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Thread<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> A<span style=color:#f92672>(),</span> <span style=color:#e6db74>&#34;MyThread_1&#34;</span><span style=color:#f92672>);</span>
        a<span style=color:#f92672>.</span><span style=color:#a6e22e>start</span><span style=color:#f92672>();</span>     启动线程
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;—————————————&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        Thread thread <span style=color:#f92672>=</span> Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>();</span>
        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> 5<span style=color:#f92672>;</span> <span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>thread<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;::&#34;</span> <span style=color:#f92672>+</span> <span style=color:#f92672>++</span>i<span style=color:#f92672>);</span>
            <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
                Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>sleep</span><span style=color:#f92672>(</span>1000<span style=color:#f92672>);</span>
            <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>InterruptedException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
                e<span style=color:#f92672>.</span><span style=color:#a6e22e>printStackTrace</span><span style=color:#f92672>();</span>
            <span style=color:#f92672>}</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
<span style=color:#960050;background-color:#1e0010>—————————————</span>
MyThread_1:<span style=color:#f92672>:</span>1
MyThread_1:<span style=color:#f92672>:</span>2
MyThread_1:<span style=color:#f92672>:</span>3
MyThread_1:<span style=color:#f92672>:</span>4
MyThread_1:<span style=color:#f92672>:</span>5
</code></pre></div><h3 id=yield>yield</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#66d9ef>implements</span> Runnable <span style=color:#f92672>{</span>     使用 yield 方法
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        Thread a <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Thread<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> A<span style=color:#f92672>(),</span> <span style=color:#e6db74>&#34;MyThread_1&#34;</span><span style=color:#f92672>);</span>
        Thread b <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Thread<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> A<span style=color:#f92672>(),</span> <span style=color:#e6db74>&#34;MyThread_2&#34;</span><span style=color:#f92672>);</span>
        a<span style=color:#f92672>.</span><span style=color:#a6e22e>start</span><span style=color:#f92672>();</span>     启动线程
        b<span style=color:#f92672>.</span><span style=color:#a6e22e>start</span><span style=color:#f92672>();</span>     启动线程
    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        Thread thread <span style=color:#f92672>=</span> Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>();</span>
        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> 5<span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
            System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>thread<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>());</span>
            Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>yield</span><span style=color:#f92672>();</span>     强制当前线程主动让出 CPU 时间片<span style=color:#960050;background-color:#1e0010>，</span>回到 Runnable 状态<span style=color:#960050;background-color:#1e0010>，</span>等待获得时间片
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
MyThread_1
MyThread_2
MyThread_1
MyThread_2
MyThread_1
MyThread_2
MyThread_1
MyThread_2
MyThread_1
MyThread_2

<span style=color:#f92672>-------------------------------------------------------</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#66d9ef>implements</span> Runnable <span style=color:#f92672>{</span>     未使用 yield 方法
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        Thread a <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Thread<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> A<span style=color:#f92672>(),</span> <span style=color:#e6db74>&#34;MyThread_1&#34;</span><span style=color:#f92672>);</span>
        Thread b <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Thread<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> A<span style=color:#f92672>(),</span> <span style=color:#e6db74>&#34;MyThread_2&#34;</span><span style=color:#f92672>);</span>
        a<span style=color:#f92672>.</span><span style=color:#a6e22e>start</span><span style=color:#f92672>();</span>     启动线程
        b<span style=color:#f92672>.</span><span style=color:#a6e22e>start</span><span style=color:#f92672>();</span>     启动线程
    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        Thread thread <span style=color:#f92672>=</span> Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>();</span>
        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> 5<span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
            System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>thread<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>());</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
MyThread_1
MyThread_1
MyThread_1
MyThread_1
MyThread_2
MyThread_2
MyThread_2
MyThread_2
MyThread_2
MyThread_1
</code></pre></div><h3 id=停止线程>停止线程</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#66d9ef>implements</span> Runnable <span style=color:#f92672>{</span>     通过调用 interrupt 方法<span style=color:#960050;background-color:#1e0010>（</span>实质为设置退出旗标<span style=color:#960050;background-color:#1e0010>）</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        Thread a <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Thread<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> A<span style=color:#f92672>());</span>
        a<span style=color:#f92672>.</span><span style=color:#a6e22e>start</span><span style=color:#f92672>();</span>     启动线程
        <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
            Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>sleep</span><span style=color:#f92672>(</span>1000<span style=color:#f92672>);</span>     当前线程进入阻塞状态 1 秒
        <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>InterruptedException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            e<span style=color:#f92672>.</span><span style=color:#a6e22e>printStackTrace</span><span style=color:#f92672>();</span>
        <span style=color:#f92672>}</span>
        a<span style=color:#f92672>.</span><span style=color:#a6e22e>interrupt</span><span style=color:#f92672>();</span>     标记线程为中断状态
    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>while</span> <span style=color:#f92672>(!</span>Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>interrupted</span><span style=color:#f92672>())</span> <span style=color:#f92672>{</span>     判断线程是否为中断状态
            System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Running...&#34;</span><span style=color:#f92672>);</span>
            <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
                Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>sleep</span><span style=color:#f92672>(</span>200<span style=color:#f92672>);</span>     当前线程进入阻塞状态 0<span style=color:#f92672>.</span><span style=color:#a6e22e>2</span> 秒
            <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>InterruptedException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     阻塞状态下中断线程将引发该异常<span style=color:#960050;background-color:#1e0010>，</span>且中断状态将被清除
                <span style=color:#66d9ef>break</span><span style=color:#f92672>;</span>     跳出循环
            <span style=color:#f92672>}</span>
        <span style=color:#f92672>}</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Stop!&#34;</span><span style=color:#f92672>);</span>     收尾工作
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
Running<span style=color:#f92672>...</span>
Running<span style=color:#f92672>...</span>
Running<span style=color:#f92672>...</span>
Running<span style=color:#f92672>...</span>
Running<span style=color:#f92672>...</span>
Stop<span style=color:#f92672>!</span>

<span style=color:#f92672>-------------------------------------------------------</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#66d9ef>implements</span> Runnable <span style=color:#f92672>{</span>     通过设置退出旗标
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>volatile</span> <span style=color:#66d9ef>boolean</span> mRunning <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>     <span style=color:#66d9ef>volatile</span> 关键字保证了多线程同步中的可见性<span style=color:#960050;background-color:#1e0010>，</span>使线程能够正确获得变量的最新值

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        Runnable runnable <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> A<span style=color:#f92672>();</span>
        Thread a <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Thread<span style=color:#f92672>(</span>runnable<span style=color:#f92672>);</span>
        a<span style=color:#f92672>.</span><span style=color:#a6e22e>start</span><span style=color:#f92672>();</span>     启动线程
        <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
            Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>sleep</span><span style=color:#f92672>(</span>1000<span style=color:#f92672>);</span>     当前线程进入阻塞状态 1 秒
        <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>InterruptedException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            e<span style=color:#f92672>.</span><span style=color:#a6e22e>printStackTrace</span><span style=color:#f92672>();</span>
        <span style=color:#f92672>}</span>
        <span style=color:#f92672>((</span>A<span style=color:#f92672>)</span> runnable<span style=color:#f92672>).</span><span style=color:#a6e22e>mRunning</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>;</span>     标记为 <span style=color:#66d9ef>false</span>
    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>while</span> <span style=color:#f92672>(</span>mRunning<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     判断是否继续运行
            System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Running...&#34;</span><span style=color:#f92672>);</span>
            <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
                Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>sleep</span><span style=color:#f92672>(</span>200<span style=color:#f92672>);</span>     当前线程进入阻塞状态 0<span style=color:#f92672>.</span><span style=color:#a6e22e>2</span> 秒
            <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>InterruptedException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
                e<span style=color:#f92672>.</span><span style=color:#a6e22e>printStackTrace</span><span style=color:#f92672>();</span>
            <span style=color:#f92672>}</span>
        <span style=color:#f92672>}</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Stop!&#34;</span><span style=color:#f92672>);</span>     收尾工作
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
Running<span style=color:#f92672>...</span>
Running<span style=color:#f92672>...</span>
Running<span style=color:#f92672>...</span>
Running<span style=color:#f92672>...</span>
Running<span style=color:#f92672>...</span>
Stop<span style=color:#f92672>!</span>
</code></pre></div><h3 id=同步线程>同步线程</h3><ul><li>异步一一一一：多线程并发，各干各的。</li><li>同步（互斥）：有先后顺序，你干完我再干。<ul><li><code>synchronized</code> 给修饰的代码块或方法加上 <strong>同步锁</strong>，保证了 <strong>可见性</strong> 和 <strong>原子性</strong>。<ul><li>同步锁：同时只允许一个线程持有，且此时只有该线程能够执行该同步锁修饰的代码块或方法。<ul><li>静态方法锁：锁对象是类对象。<code>Man.class</code></li><li>非静态方法锁：锁对象是类的对象。<code>new Man()</code></li></ul></li><li>线程在进入同步代码块或方法时获得锁。</li><li>线程在退出同步代码块或方法时释放锁。</li></ul></li></ul></li><li>可见性：对变量的读操作，总是能看到对这个变量最后的写操作。<ul><li>happens-before 关系：确保程序语句之间的排序在内存中的写对其他语句都是可见的。</li><li><code>volatile</code>修饰的变量强制线程每次读写的时候都需要与主内存进行同步，只会保存一份，保证了 <strong>可见性</strong>。<ul><li>读：<strong>直接读取</strong> 主内存中的值。</li><li>写：<strong>立即刷新</strong> 主内存中的值。</li></ul></li></ul></li><li>原子性：操作不可分割，视作一个整体，且 <strong>不会被线程调度机制打断</strong>，则称为原子操作。</li></ul><hr><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>happens<span style=color:#f92672>-</span>before 关系
<span style=color:#f92672>-------------------------------------------------------</span>
定义变量
<span style=color:#f92672>----</span>
<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> i1 <span style=color:#f92672>=</span> 1<span style=color:#f92672>;</span>
<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> i2 <span style=color:#f92672>=</span> 2<span style=color:#f92672>;</span>
<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> i3 <span style=color:#f92672>=</span> 3<span style=color:#f92672>;</span>
<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>volatile</span> <span style=color:#66d9ef>boolean</span> mBoolean <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>;</span>     用 <span style=color:#66d9ef>volatile</span> 修饰的变量

读
<span style=color:#f92672>----</span>
<span style=color:#960050;background-color:#1e0010>（</span>错<span style=color:#960050;background-color:#1e0010>）</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>i1<span style=color:#f92672>);</span>     JVM 的重排序对普通变量的读操作不会排在对 <span style=color:#66d9ef>volatile</span> 变量的读操作之前<span style=color:#960050;background-color:#1e0010>，</span>只会排在对 <span style=color:#66d9ef>volatile</span> 变量的读操作之后
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>mBoolean<span style=color:#f92672>);</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>i1<span style=color:#f92672>);</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>i2<span style=color:#f92672>);</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>i3<span style=color:#f92672>);</span>

写
<span style=color:#f92672>----</span>
i1 <span style=color:#f92672>=</span> 4<span style=color:#f92672>;</span>
i2 <span style=color:#f92672>=</span> 5<span style=color:#f92672>;</span>
i3 <span style=color:#f92672>=</span> 6<span style=color:#f92672>;</span>
mBoolean <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
<span style=color:#960050;background-color:#1e0010>（</span>错<span style=color:#960050;background-color:#1e0010>）</span>i1 <span style=color:#f92672>=</span> 7<span style=color:#f92672>;</span>     JVM 的重排序对普通变量的写操作不会排在对 <span style=color:#66d9ef>volatile</span> 变量的写操作之后<span style=color:#960050;background-color:#1e0010>，</span>只会排在对 <span style=color:#66d9ef>volatile</span> 变量的写操作之前
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#66d9ef>implements</span> Runnable <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> mInt <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span>     值<span style=color:#960050;background-color:#1e0010>（</span>应当守恒<span style=color:#960050;background-color:#1e0010>）</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>volatile</span> <span style=color:#66d9ef>boolean</span> mRunning <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>     退出旗标

    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>while</span> <span style=color:#f92672>(</span>mRunning<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     无限循环
            <span style=color:#a6e22e>synchronized</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>this</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     同步锁<span style=color:#960050;background-color:#1e0010>（</span>锁对象是类的对象<span style=color:#960050;background-color:#1e0010>）</span>
                mInt<span style=color:#f92672>++;</span>
                mInt<span style=color:#f92672>--;</span>
            <span style=color:#f92672>}</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

<span style=color:#f92672>----</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Initial</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> InterruptedException <span style=color:#f92672>{</span>
        A a <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> A<span style=color:#f92672>();</span>     线程体
        <span style=color:#a6e22e>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> 3<span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>     启动 3 个线程
            <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Thread</span><span style=color:#f92672>(</span>a<span style=color:#f92672>).</span><span style=color:#a6e22e>start</span><span style=color:#f92672>();</span>     传入同一个线程体<span style=color:#960050;background-color:#1e0010>，</span>执行其中的 run 方法
        <span style=color:#f92672>}</span>
        Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>sleep</span><span style=color:#f92672>(</span>1000<span style=color:#f92672>);</span>     当前线程进入阻塞状态 1 秒
        a<span style=color:#f92672>.</span><span style=color:#a6e22e>mRunning</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>;</span>     标记为 <span style=color:#66d9ef>false</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>a<span style=color:#f92672>.</span><span style=color:#a6e22e>mInt</span><span style=color:#f92672>);</span>     输出值
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
0
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#66d9ef>implements</span> Runnable <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> mInts<span style=color:#f92672>;</span>     能量数组<span style=color:#960050;background-color:#1e0010>（</span>锁对象应该用 <span style=color:#66d9ef>final</span> 修饰<span style=color:#960050;background-color:#1e0010>）</span>

    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>A</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> ints<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     构造函数
        mInts <span style=color:#f92672>=</span> ints<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>     线程体
        Random random <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Random<span style=color:#f92672>();</span>
        <span style=color:#66d9ef>while</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     无限循环
            <span style=color:#66d9ef>int</span> from <span style=color:#f92672>=</span> <span style=color:#f92672>((</span><span style=color:#66d9ef>int</span><span style=color:#f92672>)</span> <span style=color:#f92672>(</span>mInts<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span> <span style=color:#f92672>*</span> random<span style=color:#f92672>.</span><span style=color:#a6e22e>nextDouble</span><span style=color:#f92672>()));</span>     随机
            <span style=color:#66d9ef>int</span> to <span style=color:#f92672>=</span> <span style=color:#f92672>((</span><span style=color:#66d9ef>int</span><span style=color:#f92672>)</span> <span style=color:#f92672>(</span>mInts<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span> <span style=color:#f92672>*</span> random<span style=color:#f92672>.</span><span style=color:#a6e22e>nextDouble</span><span style=color:#f92672>()));</span>     随机
            <span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#f92672>((</span><span style=color:#66d9ef>int</span><span style=color:#f92672>)</span> <span style=color:#f92672>(</span>1000 <span style=color:#f92672>*</span> random<span style=color:#f92672>.</span><span style=color:#a6e22e>nextDouble</span><span style=color:#f92672>()));</span>     随机
            <span style=color:#a6e22e>transfer</span><span style=color:#f92672>(</span>from<span style=color:#f92672>,</span> to<span style=color:#f92672>,</span> i<span style=color:#f92672>);</span>     转移能量
            <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
                Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>sleep</span><span style=color:#f92672>(</span>10<span style=color:#f92672>);</span>     阻塞 10 毫秒
            <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>InterruptedException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
                e<span style=color:#f92672>.</span><span style=color:#a6e22e>printStackTrace</span><span style=color:#f92672>();</span>
            <span style=color:#f92672>}</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>transfer</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> from<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> to<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> i<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     转移能量
        <span style=color:#a6e22e>if</span> <span style=color:#f92672>(</span>mInts<span style=color:#f92672>[</span>from<span style=color:#f92672>]</span> <span style=color:#f92672>&lt;</span> i<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     能量不足
            <span style=color:#66d9ef>return</span><span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>
        <span style=color:#66d9ef>synchronized</span> <span style=color:#f92672>(</span>mInts<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     同步锁<span style=color:#960050;background-color:#1e0010>（</span>多个需要同步的线程的同步锁应该是同一个锁对象的引用<span style=color:#960050;background-color:#1e0010>，</span>否则无法得到同步效果<span style=color:#960050;background-color:#1e0010>）</span>
            mInts<span style=color:#f92672>[</span>from<span style=color:#f92672>]</span> <span style=color:#f92672>-=</span> i<span style=color:#f92672>;</span>     减少
            mInts<span style=color:#f92672>[</span>to<span style=color:#f92672>]</span> <span style=color:#f92672>+=</span> i<span style=color:#f92672>;</span>     增加
            DecimalFormat decimalFormat1 <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> DecimalFormat<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;00&#34;</span><span style=color:#f92672>);</span>     格式化
            DecimalFormat decimalFormat2 <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> DecimalFormat<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;000&#34;</span><span style=color:#f92672>);</span>     格式化
            System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>printf</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;%s\t 从 %s 转移 %s 到 %s \t%d\n&#34;</span><span style=color:#f92672>,</span> Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>(),</span> decimalFormat1<span style=color:#f92672>.</span><span style=color:#a6e22e>format</span><span style=color:#f92672>(</span>from<span style=color:#f92672>),</span> decimalFormat2<span style=color:#f92672>.</span><span style=color:#a6e22e>format</span><span style=color:#f92672>(</span>i<span style=color:#f92672>),</span> decimalFormat1<span style=color:#f92672>.</span><span style=color:#a6e22e>format</span><span style=color:#f92672>(</span>to<span style=color:#f92672>),</span> getAll<span style=color:#f92672>());</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getAll</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>     获得总能量<span style=color:#960050;background-color:#1e0010>（</span>应当守恒<span style=color:#960050;background-color:#1e0010>）</span>
        <span style=color:#66d9ef>int</span> sum <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span>
        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>:</span> mInts<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            sum <span style=color:#f92672>+=</span> i<span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>
        <span style=color:#66d9ef>return</span> sum<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

<span style=color:#f92672>----</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Initial</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> ints <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[</span>100<span style=color:#f92672>];</span>     初始化能量数组<span style=color:#960050;background-color:#1e0010>（</span>共 100 个单元<span style=color:#960050;background-color:#1e0010>，</span>每个单元 1000 能量<span style=color:#960050;background-color:#1e0010>）</span>
        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> ints<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
            ints<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> 1000<span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>

        DecimalFormat decimalFormat <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> DecimalFormat<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;000&#34;</span><span style=color:#f92672>);</span>
        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> ints<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>;</span> <span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     启动 100 个线程
            Thread thread <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Thread<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> A<span style=color:#f92672>(</span>ints<span style=color:#f92672>),</span> <span style=color:#e6db74>&#34;A_&#34;</span> <span style=color:#f92672>+</span> decimalFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>format</span><span style=color:#f92672>(++</span>i<span style=color:#f92672>));</span>     传入同一个数组<span style=color:#960050;background-color:#1e0010>，</span>对其进行操作<span style=color:#960050;background-color:#1e0010>，</span>并作为锁对象
            thread<span style=color:#f92672>.</span><span style=color:#a6e22e>start</span><span style=color:#f92672>();</span>     启动线程
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
<span style=color:#f92672>----</span>
输出<span style=color:#960050;background-color:#1e0010>：</span>
A_042	 从 39 转移 209 到 49 	100000
A_056	 从 22 转移 017 到 31 	100000
A_044	 从 29 转移 055 到 30 	100000
A_068	 从 28 转移 717 到 66 	100000
A_069	 从 85 转移 020 到 16 	100000
A_070	 从 00 转移 380 到 54 	100000
A_072	 从 67 转移 783 到 25 	100000
A_034	 从 58 转移 377 到 02 	100000
A_073	 从 04 转移 710 到 98 	100000
A_074	 从 30 转移 499 到 57 	100000
A_075	 从 95 转移 299 到 81 	100000
<span style=color:#f92672>...</span>
</code></pre></div></div><div class=sharing style=text-align:center><br><p>捐赠支持</p><p>如果我的文章对你有所帮助，欢迎通过支付宝的扫一扫，轻松的向我发起捐助。</p><p>对于你的支持，我会心怀感激且倍感荣幸地接受，并继续努力。</p><img src=https://ww4.sinaimg.cn/large/a15b4afegw1fbn096ql6dj20dw0dwwe9.jpg alt title data-action=zoom width=40%><p></p><br>&copy; 2015-2020 XhstormR</div></div></div></div><div id=backtop><a href=# title>TOP</a></div><nav id=TableOfContents><ul><li><a href=#创建线程>创建线程</a></li><li><a href=#操作线程>操作线程</a><ul><li><a href=#线程信息>线程信息</a></li><li><a href=#线程优先级>线程优先级</a></li><li><a href=#守护线程>守护线程</a></li><li><a href=#阻塞线程>阻塞线程</a></li><li><a href=#yield>yield</a></li><li><a href=#停止线程>停止线程</a></li><li><a href=#同步线程>同步线程</a></li></ul></li></ul></nav><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/languages/yaml.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/languages/kotlin.min.js></script><script>hljs.initHighlightingOnLoad()</script><script src=https://blog.xhstormr.tk/js/zoom.min.js></script><script>window.addEventListener("load",show),window.onscroll=show;function show(){document.documentElement.scrollTop+document.body.scrollTop>300?document.getElementById("backtop").style.display="block":document.getElementById("backtop").style.display="none"}</script><script type=text/javascript color=0,0,0 opacity=1 zindex=-2 count=49 src=https://cdnjs.cloudflare.com/ajax/libs/canvas-nest.js/2.0.4/canvas-nest.js></script></body></html>