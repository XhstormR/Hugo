<!doctype html><html lang=zh-cn manifest=https://blog.xhstormr.tk/offline.appcache><head><meta charset=utf-8><meta name=renderer content="webkit"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>Spring MVC &#183; XhstormR</title><link rel=alternate type=application/rss+xml title=XhstormR href><link rel=icon type=image/x-icon href=https://blog.xhstormr.tk/favicon.ico><link rel=stylesheet href=https://blog.xhstormr.tk/css/uno.min.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/monokai-sublime.min.css><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js></script><script src=https://blog.xhstormr.tk/js/main.min.js async defer></script></head><body><div id=scriptHeader><span class="mobile btn-mobile-menu"><i class="fa fa-bars btn-mobile-menu__icon"></i>
<i class="fa fa-times btn-mobile-close__icon hidden"></i></span><header class="panel-cover panel-cover--collapsed"><div class=panel-main><div class="panel-main__inner panel-inverted"><div class=panel-main__content><h1 class="panel-cover__title panel-title"><a href=https://blog.xhstormr.tk/ title="link to homepage for XhstormR">XhstormR</a></h1><hr class=panel-cover__divider><p class=panel-cover__description>On a dark desert highway, cool wind in my hair.</p><hr class="panel-cover__divider panel-cover__divider--secondary"><div class=navigation-wrapper><nav class="cover-navigation cover-navigation--primary"><ul class=navigation><li class=navigation__item><a href=https://blog.xhstormr.tk#blog title="link to XhstormR blog" class=blog-button>Blog</a></li></ul></nav></div></div></div><div class=panel-cover--overlay></div></div></header></div><div class=bodytop><div class=content-wrapper><div class=content-wrapper__inner><div class=post><h1>Spring MVC</h1><span class=post-date>2017-06-17</span><p>Updated on 2017-06-22</p><blockquote><p style=text-align:center><img data-src=/uploads/spring.png alt title="Spring Framework" data-action=zoom width></p><script>[].forEach.call(document.querySelectorAll("img[data-src]"),function(a){a.setAttribute("src",a.getAttribute("data-src")),a.onload=function(){a.removeAttribute("data-src")}})</script><p><a href=https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/http/converter/json/MappingJackson2HttpMessageConverter.html>MappingJackson2HttpMessageConverter</a></p><p><a href=https://github.com/thymeleaf/thymeleaf>https://github.com/thymeleaf/thymeleaf</a></p><p><a href=http://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html>http://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html</a></p></blockquote><h2 id=concept>Concept</h2><ul><li>REST：将资源的 <strong>状态</strong> 以 <strong>适合</strong> 客户端的 <strong>格式</strong> 从服务端 <strong>传递</strong> 至客户端（或者反过来）。<ul><li>资源通过 URL 进行标识，通过 HTTP Method 进行管理，通过 HTTP Header 表述格式。<ul><li>资源：URL（统一资源定位器）</li><li>格式：Accept、Content-Type 头部信息。</li><li>动词：<a href=/post/postgresql/#concept>CRUD</a>（增删改查）<ul><li>幂等：<strong>同一操作</strong> 执行 <strong>任意次数</strong> 所产生的影响或结果 <strong>相同</strong>。</li></ul></li></ul></li></ul></li></ul><h2 id=configuration>Configuration</h2><h3 id=buildgradlekts>build.gradle.kts</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>plugin<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;war&#34;</span><span style=color:#f92672>)</span>

compile<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;org.springframework:spring-webmvc:+&#34;</span><span style=color:#f92672>)</span>
compile<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;javax.servlet:javax.servlet-api:+&#34;</span><span style=color:#f92672>)</span>

compile<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;org.thymeleaf:thymeleaf-spring4:+&#34;</span><span style=color:#f92672>)</span>
compile<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;org.slf4j:slf4j-jdk14:+&#34;</span><span style=color:#f92672>)</span>

compile<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;org.hibernate:hibernate-validator:5.+&#34;</span><span style=color:#f92672>)</span>

compile<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;com.fasterxml.jackson.core:jackson-databind:+&#34;</span><span style=color:#f92672>)</span>
</code></pre></div><h2 id=code>Code</h2><h3 id=appconfig>AppConfig</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#66d9ef>import</span> org.springframework.web.filter.CharacterEncodingFilter
<span style=color:#66d9ef>import</span> org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer
<span style=color:#66d9ef>import</span> javax.servlet.Filter
<span style=color:#66d9ef>import</span> javax.servlet.MultipartConfigElement
<span style=color:#66d9ef>import</span> javax.servlet.ServletRegistration

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AppConfig</span> : AbstractAnnotationConfigDispatcherServletInitializer() {
    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>getServletMappings</span>(): Array&lt;String&gt; = arrayOf(<span style=color:#e6db74>&#34;/&#34;</span>)

    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>getRootConfigClasses</span>(): Array&lt;Class&lt;*&gt;&gt; = arrayOf(RootConfig<span style=color:#f92672>::</span><span style=color:#66d9ef>class</span>.java)

    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>getServletConfigClasses</span>(): Array&lt;Class&lt;*&gt;&gt; = arrayOf(WebConfig<span style=color:#f92672>::</span><span style=color:#66d9ef>class</span>.java)

    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>getServletFilters</span>(): Array&lt;Filter&gt; = arrayOf(CharacterEncodingFilter(<span style=color:#e6db74>&#34;UTF-8&#34;</span>, <span style=color:#66d9ef>true</span>))     <span style=color:#960050;background-color:#1e0010>添加过滤器</span>

    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>customizeRegistration</span>(registration: ServletRegistration.Dynamic) {
        <span style=color:#66d9ef>val</span> mb = <span style=color:#ae81ff>1024</span> * <span style=color:#ae81ff>1024L</span>     <span style=color:#960050;background-color:#1e0010>限制文件最大为</span> <span style=color:#ae81ff>2</span> MB<span style=color:#960050;background-color:#1e0010>，请求最大为</span> <span style=color:#ae81ff>4</span> MB
        registration.setMultipartConfig(MultipartConfigElement(<span style=color:#e6db74>&#34;D:/TEMP&#34;</span>, <span style=color:#ae81ff>2</span> * mb, <span style=color:#ae81ff>4</span> * mb, <span style=color:#ae81ff>0</span>))
    }
}
</code></pre></div><h3 id=webconfig>WebConfig</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#66d9ef>import</span> org.springframework.context.annotation.Bean
<span style=color:#66d9ef>import</span> org.springframework.context.annotation.ComponentScan
<span style=color:#66d9ef>import</span> org.springframework.context.annotation.Configuration
<span style=color:#66d9ef>import</span> org.springframework.format.FormatterRegistry
<span style=color:#66d9ef>import</span> org.springframework.web.multipart.MultipartResolver
<span style=color:#66d9ef>import</span> org.springframework.web.multipart.support.StandardServletMultipartResolver
<span style=color:#66d9ef>import</span> org.springframework.web.servlet.ViewResolver
<span style=color:#66d9ef>import</span> org.springframework.web.servlet.config.annotation.DefaultServletHandlerConfigurer
<span style=color:#66d9ef>import</span> org.springframework.web.servlet.config.annotation.EnableWebMvc
<span style=color:#66d9ef>import</span> org.springframework.web.servlet.config.annotation.InterceptorRegistry
<span style=color:#66d9ef>import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter
<span style=color:#66d9ef>import</span> org.thymeleaf.spring4.SpringTemplateEngine
<span style=color:#66d9ef>import</span> org.thymeleaf.spring4.view.ThymeleafViewResolver
<span style=color:#66d9ef>import</span> org.thymeleaf.templateresolver.ITemplateResolver
<span style=color:#66d9ef>import</span> org.thymeleaf.templateresolver.ServletContextTemplateResolver
<span style=color:#66d9ef>import</span> javax.servlet.ServletContext

<span style=color:#a6e22e>@Configuration</span>
<span style=color:#a6e22e>@EnableWebMvc</span>     <span style=color:#960050;background-color:#1e0010>启用</span> Spring MVC
<span style=color:#a6e22e>@ComponentScan</span>(<span style=color:#e6db74>&#34;controller&#34;</span>)
<span style=color:#66d9ef>open</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>WebConfig</span> : WebMvcConfigurerAdapter() {
    <span style=color:#a6e22e>@Bean</span>     <span style=color:#ae81ff>1</span>
    <span style=color:#66d9ef>open</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>templateResolver</span>(servletContext: ServletContext): ITemplateResolver =
            ServletContextTemplateResolver(servletContext).apply {
                <span style=color:#66d9ef>this</span>.characterEncoding = <span style=color:#e6db74>&#34;UTF-8&#34;</span>
                <span style=color:#66d9ef>this</span>.prefix = <span style=color:#e6db74>&#34;/WEB-INF/views/&#34;</span>
                <span style=color:#66d9ef>this</span>.suffix = <span style=color:#e6db74>&#34;.html&#34;</span>
            }

    <span style=color:#a6e22e>@Bean</span>     <span style=color:#ae81ff>2</span>
    <span style=color:#66d9ef>open</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>templateEngine</span>(templateResolver: ITemplateResolver): SpringTemplateEngine =
            SpringTemplateEngine().apply { <span style=color:#66d9ef>this</span>.setTemplateResolver(templateResolver) }

    <span style=color:#a6e22e>@Bean</span>     <span style=color:#ae81ff>3</span>
    <span style=color:#66d9ef>open</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>viewResolver</span>(templateEngine: SpringTemplateEngine): ViewResolver =
            ThymeleafViewResolver().apply {
                <span style=color:#66d9ef>this</span>.characterEncoding = <span style=color:#e6db74>&#34;UTF-8&#34;</span>
                <span style=color:#66d9ef>this</span>.templateEngine = templateEngine
            }

    <span style=color:#a6e22e>@Bean</span>
    <span style=color:#66d9ef>open</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>multipartResolver</span>(): MultipartResolver = StandardServletMultipartResolver()     <span style=color:#960050;background-color:#1e0010>提供文件上传支持</span>

    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>configureDefaultServletHandling</span>(configurer: DefaultServletHandlerConfigurer) = configurer.enable()     <span style=color:#960050;background-color:#1e0010>提供静态资源访问（启用</span> DefaultServletHttpRequestHandler<span style=color:#960050;background-color:#1e0010>）</span>

    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>addInterceptors</span>(registry: InterceptorRegistry) {
        registry.addInterceptor(MyInterceptor()).addPathPatterns(<span style=color:#e6db74>&#34;/**&#34;</span>)     <span style=color:#960050;background-color:#1e0010>注册拦截器</span>
    }

    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>addFormatters</span>(registry: FormatterRegistry) {
        registry.addFormatter(MyDateFormatter())             <span style=color:#960050;background-color:#1e0010>注册</span> Formatter
        registry.addConverter(MyStringToDateConverter())     <span style=color:#960050;background-color:#1e0010>注册</span> Converter
    }
}
</code></pre></div><h3 id=rootconfig>RootConfig</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#66d9ef>import</span> org.springframework.context.annotation.Configuration

<span style=color:#a6e22e>@Configuration</span>
<span style=color:#66d9ef>open</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>RootConfig</span>
</code></pre></div><h3 id=myinterceptor>MyInterceptor</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#66d9ef>import</span> org.springframework.web.servlet.ModelAndView
<span style=color:#66d9ef>import</span> org.springframework.web.servlet.handler.HandlerInterceptorAdapter
<span style=color:#66d9ef>import</span> java.lang.Exception
<span style=color:#66d9ef>import</span> javax.servlet.http.HttpServletRequest
<span style=color:#66d9ef>import</span> javax.servlet.http.HttpServletResponse

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MyInterceptor</span> : HandlerInterceptorAdapter() {     <span style=color:#960050;background-color:#1e0010>拦截器</span>
    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>preHandle</span>(request: HttpServletRequest, response: HttpServletResponse, handler: Any): Boolean {
        println(<span style=color:#e6db74>&#34;预处理&#34;</span>)
        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>     <span style=color:#960050;background-color:#1e0010>是否放行请求（</span><span style=color:#66d9ef>true</span> <span style=color:#960050;background-color:#1e0010>放行，</span><span style=color:#66d9ef>false</span> <span style=color:#960050;background-color:#1e0010>拦截）</span>
    }

    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>postHandle</span>(request: HttpServletRequest, response: HttpServletResponse, handler: Any, modelAndView: ModelAndView?) {
        println(<span style=color:#e6db74>&#34;后处理&#34;</span>)
        <span style=color:#66d9ef>if</span> (modelAndView <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
            modelAndView.model[<span style=color:#e6db74>&#34;msg&#34;</span>] = <span style=color:#e6db74>&#34;信息&#34;</span>
        }
    }

    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>afterCompletion</span>(request: HttpServletRequest, response: HttpServletResponse, handler: Any, ex: Exception?) {
        println(<span style=color:#e6db74>&#34;请求结束&#34;</span>)
    }
}

<span style=color:#960050;background-color:#1e0010>基于切面思想的应用：</span>
<span style=color:#960050;background-color:#1e0010>过滤器：基于</span> Servlet <span style=color:#960050;background-color:#1e0010>容器，能够过滤所有请求，使用回调函数。（</span>Filter<span style=color:#960050;background-color:#1e0010>）</span>
<span style=color:#960050;background-color:#1e0010>拦截器：基于</span> Spring  <span style=color:#960050;background-color:#1e0010>容器，只能拦截部分请求，使用反射机制。（</span>Interceptor<span style=color:#960050;background-color:#1e0010>）</span>
</code></pre></div><h3 id=mydateformatter>MyDateFormatter</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#66d9ef>import</span> org.springframework.format.Formatter
<span style=color:#66d9ef>import</span> java.text.SimpleDateFormat
<span style=color:#66d9ef>import</span> java.util.*

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MyDateFormatter</span> : Formatter&lt;Date&gt; {     Formatter<span style=color:#960050;background-color:#1e0010>：</span>String &lt;<span style=color:#f92672>-&gt;</span> T
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>val</span> sdf = SimpleDateFormat(<span style=color:#e6db74>&#34;yyyy-MM-dd&#34;</span>)

    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>parse</span>(text: String, locale: Locale): Date = sdf.parse(text)

    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>print</span>(<span style=color:#a6e22e>`object</span><span style=color:#960050;background-color:#1e0010>`</span>: Date, locale: Locale): String = sdf.format(<span style=color:#a6e22e>`object</span><span style=color:#960050;background-color:#1e0010>`</span>)
}
</code></pre></div><h3 id=mystringtodateconverter>MyStringToDateConverter</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#66d9ef>import</span> org.springframework.core.convert.converter.Converter
<span style=color:#66d9ef>import</span> java.text.SimpleDateFormat
<span style=color:#66d9ef>import</span> java.util.*

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MyStringToDateConverter</span> : Converter&lt;String, Date&gt; {     Converter<span style=color:#960050;background-color:#1e0010>：</span>S <span style=color:#f92672>--</span>&gt; T
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>val</span> sdf = SimpleDateFormat(<span style=color:#e6db74>&#34;yyyy-MM-dd&#34;</span>)

    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>convert</span>(source: String): Date = sdf.parse(source)
}
</code></pre></div><h3 id=entity>entity</h3><h4 id=account>Account</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#66d9ef>package</span> entity

<span style=color:#66d9ef>import</span> javax.validation.constraints.Min
<span style=color:#66d9ef>import</span> javax.validation.constraints.NotNull
<span style=color:#66d9ef>import</span> javax.validation.constraints.Size

<span style=color:#66d9ef>data</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Account</span>(
        <span style=color:#a6e22e>@field</span>:NotNull     <span style=color:#960050;background-color:#1e0010>校验属性</span>
        <span style=color:#a6e22e>@field</span>:Size(min = <span style=color:#ae81ff>2</span>, max = <span style=color:#ae81ff>4</span>)
        <span style=color:#66d9ef>var</span> username: String? = <span style=color:#66d9ef>null</span>,
        <span style=color:#a6e22e>@field</span>:NotNull
        <span style=color:#a6e22e>@field</span>:Size(min = <span style=color:#ae81ff>6</span>, max = <span style=color:#ae81ff>12</span>)
        <span style=color:#66d9ef>var</span> password: String? = <span style=color:#66d9ef>null</span>,
        <span style=color:#a6e22e>@field</span>:NotNull
        <span style=color:#a6e22e>@field</span>:Min(<span style=color:#ae81ff>18</span>)
        <span style=color:#66d9ef>var</span> age: Int? = <span style=color:#66d9ef>null</span>
)
</code></pre></div><h3 id=controller>controller</h3><h4 id=homecontroller>HomeController</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#66d9ef>package</span> controller

<span style=color:#66d9ef>import</span> org.springframework.stereotype.Controller
<span style=color:#66d9ef>import</span> org.springframework.web.bind.annotation.RequestMapping
<span style=color:#66d9ef>import</span> org.springframework.web.bind.annotation.RequestMethod

<span style=color:#a6e22e>@Controller</span>     <span style=color:#960050;background-color:#1e0010>声明为控制器</span>
<span style=color:#a6e22e>@RequestMapping</span>(<span style=color:#e6db74>&#34;/&#34;</span>)     <span style=color:#960050;background-color:#1e0010>映射至</span> <span style=color:#ae81ff>127.0</span>.<span style=color:#ae81ff>0.1</span>:<span style=color:#ae81ff>8080</span>/
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>HomeController</span> {
    <span style=color:#a6e22e>@RequestMapping</span>(method = arrayOf(RequestMethod.GET))     <span style=color:#960050;background-color:#1e0010>处理</span> GET <span style=color:#960050;background-color:#1e0010>请求</span>
    <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>home</span>(): String {
        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;home&#34;</span>     <span style=color:#960050;background-color:#1e0010>解析为</span> /WEB-INF/views/home.html <span style=color:#960050;background-color:#1e0010>视图</span>
    }
}
</code></pre></div><h4 id=acontroller>AController</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#66d9ef>package</span> controller

<span style=color:#66d9ef>import</span> entity.Account
<span style=color:#66d9ef>import</span> org.springframework.stereotype.Controller
<span style=color:#66d9ef>import</span> org.springframework.ui.Model
<span style=color:#66d9ef>import</span> org.springframework.validation.Errors
<span style=color:#66d9ef>import</span> org.springframework.web.bind.annotation.*
<span style=color:#66d9ef>import</span> org.springframework.web.multipart.MultipartFile
<span style=color:#66d9ef>import</span> org.springframework.web.servlet.mvc.support.RedirectAttributes
<span style=color:#66d9ef>import</span> java.io.File
<span style=color:#66d9ef>import</span> javax.validation.Valid

<span style=color:#a6e22e>@Controller</span>
<span style=color:#a6e22e>@RequestMapping</span>(<span style=color:#e6db74>&#34;/a&#34;</span>)
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AController</span> {     <span style=color:#960050;background-color:#1e0010>视图</span>
    <span style=color:#960050;background-color:#1e0010>查询参数：</span><span style=color:#ae81ff>127.0</span>.<span style=color:#ae81ff>0.1</span>:<span style=color:#ae81ff>8080</span>/a?username=<span style=color:#960050;background-color:#1e0010>张三</span>&amp;password=<span style=color:#ae81ff>123456</span>&amp;age=<span style=color:#ae81ff>20</span>
    <span style=color:#a6e22e>@RequestMapping</span>(method = arrayOf(RequestMethod.GET))     <span style=color:#960050;background-color:#1e0010>可简化为</span> <span style=color:#a6e22e>@GetMapping</span>
    <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>a</span>(<span style=color:#a6e22e>@RequestParam</span>(defaultValue = <span style=color:#e6db74>&#34;张三&#34;</span>) username: String,
          <span style=color:#a6e22e>@RequestParam</span>(defaultValue = <span style=color:#e6db74>&#34;123456&#34;</span>) password: String,
          <span style=color:#a6e22e>@RequestParam</span>(defaultValue = <span style=color:#e6db74>&#34;20&#34;</span>) age: Int,
          model: Model): String {
        <span style=color:#66d9ef>if</span> (!model.containsAttribute(<span style=color:#e6db74>&#34;account&#34;</span>)) {     <span style=color:#960050;background-color:#1e0010>跨重定向请求传递复杂数据</span>
            model.addAttribute(<span style=color:#e6db74>&#34;account&#34;</span>, Account(username, password, age))
            <span style=color:#960050;background-color:#1e0010>可简化为</span>
            model.addAttribute(Account(username, password, age))     <span style=color:#960050;background-color:#1e0010>根据对象类型推断</span> Key
        }
        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;a&#34;</span>
    }

    <span style=color:#960050;background-color:#1e0010>进一步简化：根据请求路径推断视图（</span>a<span style=color:#960050;background-color:#1e0010>），根据对象类型推断</span> Key<span style=color:#960050;background-color:#1e0010>（</span>account<span style=color:#960050;background-color:#1e0010>）</span>
    <span style=color:#a6e22e>@RequestMapping</span>(method = arrayOf(RequestMethod.GET))
    <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>a</span>(<span style=color:#a6e22e>@RequestParam</span>(defaultValue = <span style=color:#e6db74>&#34;张三&#34;</span>) username: String,
          <span style=color:#a6e22e>@RequestParam</span>(defaultValue = <span style=color:#e6db74>&#34;123456&#34;</span>) password: String,
          <span style=color:#a6e22e>@RequestParam</span>(defaultValue = <span style=color:#e6db74>&#34;20&#34;</span>) age: Int): Account {
        <span style=color:#66d9ef>return</span> Account(username, password, age)
    }

    <span style=color:#960050;background-color:#1e0010>路径变量：</span><span style=color:#ae81ff>127.0</span>.<span style=color:#ae81ff>0.1</span>:<span style=color:#ae81ff>8080</span>/a/<span style=color:#960050;background-color:#1e0010>张三</span>/<span style=color:#ae81ff>123456</span>/<span style=color:#ae81ff>20</span>
    <span style=color:#a6e22e>@RequestMapping</span>(path = arrayOf(<span style=color:#e6db74>&#34;/{username}/{password}/{age}&#34;</span>), method = arrayOf(RequestMethod.GET))
    <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>b</span>(<span style=color:#a6e22e>@PathVariable</span> username: String,
          <span style=color:#a6e22e>@PathVariable</span> password: String,
          <span style=color:#a6e22e>@PathVariable</span> age: Int,
          model: Model): String {
        <span style=color:#66d9ef>if</span> (!model.containsAttribute(<span style=color:#e6db74>&#34;account&#34;</span>)) {
            model.addAttribute(Account(username, password, age))
        }
        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;a&#34;</span>
    }

    <span style=color:#960050;background-color:#1e0010>表单参数</span>
    <span style=color:#a6e22e>@RequestMapping</span>(path = arrayOf(<span style=color:#e6db74>&#34;/form&#34;</span>), method = arrayOf(RequestMethod.POST))
    <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>c</span>(<span style=color:#a6e22e>@Valid</span> account: Account, errors: Errors, model: Model): String {     <span style=color:#960050;background-color:#1e0010>校验属性</span>
        <span style=color:#66d9ef>if</span> (errors.hasErrors()) {     <span style=color:#960050;background-color:#1e0010>检查校验是否出错</span>
            <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;redirect:/&#34;</span>     <span style=color:#960050;background-color:#1e0010>重定向（</span>redirect:<span style=color:#960050;background-color:#1e0010>），请求转发（</span>forward:<span style=color:#960050;background-color:#1e0010>）</span>
        }
        model.addAttribute(<span style=color:#e6db74>&#34;username&#34;</span>, account.username)     <span style=color:#960050;background-color:#1e0010>跨重定向请求传递简单数据</span>
        model.addAttribute(<span style=color:#e6db74>&#34;password&#34;</span>, account.password)
        model.addAttribute(<span style=color:#e6db74>&#34;age&#34;</span>, account.age)

        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;redirect:/a/{username}/{password}/{age}&#34;</span>     <span style=color:#960050;background-color:#1e0010>通过路径变量的形式传递数据：</span><span style=color:#ae81ff>127.0</span>.<span style=color:#ae81ff>0.1</span>:<span style=color:#ae81ff>8080</span>/a/<span style=color:#960050;background-color:#1e0010>张三</span>/<span style=color:#ae81ff>123456</span>/<span style=color:#ae81ff>20</span>
        <span style=color:#960050;background-color:#1e0010>或者</span>
        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;redirect:/a&#34;</span>     <span style=color:#960050;background-color:#1e0010>通过查询参数的形式传递数据：</span><span style=color:#ae81ff>127.0</span>.<span style=color:#ae81ff>0.1</span>:<span style=color:#ae81ff>8080</span>/a?username=<span style=color:#960050;background-color:#1e0010>张三</span>&amp;password=<span style=color:#ae81ff>123456</span>&amp;age=<span style=color:#ae81ff>20</span>
    }

    <span style=color:#960050;background-color:#1e0010>跨重定向请求传递复杂数据：</span>
    <span style=color:#a6e22e>@RequestMapping</span>(path = arrayOf(<span style=color:#e6db74>&#34;/form&#34;</span>), method = arrayOf(RequestMethod.POST))
    <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>c</span>(<span style=color:#a6e22e>@Valid</span> account: Account, errors: Errors, model: RedirectAttributes): String {
        <span style=color:#66d9ef>if</span> (errors.hasErrors()) {
            <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;redirect:/&#34;</span>
        }
        model.addFlashAttribute(account)     <span style=color:#960050;background-color:#1e0010>跨重定向请求传递复杂数据</span>
        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;redirect:/a&#34;</span>     <span style=color:#960050;background-color:#1e0010>通过</span> flash <span style=color:#960050;background-color:#1e0010>属性传递复杂数据</span>
    }

    <span style=color:#960050;background-color:#1e0010>文件上传</span>
    <span style=color:#a6e22e>@RequestMapping</span>(path = arrayOf(<span style=color:#e6db74>&#34;/upload&#34;</span>), method = arrayOf(RequestMethod.POST))     <span style=color:#960050;background-color:#1e0010>可简化为</span> <span style=color:#a6e22e>@PostMapping</span>
    <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>d</span>(<span style=color:#a6e22e>@RequestPart</span> myPic: MultipartFile): String {
        myPic.transferTo(File(<span style=color:#e6db74>&#34;D:/TEMP2/</span><span style=color:#e6db74>${myPic.originalFilename}</span><span style=color:#e6db74>&#34;</span>))
        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;redirect:/&#34;</span>
    }

    <span style=color:#960050;background-color:#1e0010>异常处理（作用于单个控制器）</span>
    <span style=color:#a6e22e>@ExceptionHandler</span>(Throwable<span style=color:#f92672>::</span><span style=color:#66d9ef>class</span>)
    <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>handleError</span>(): String {
        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;error&#34;</span>
    }
}
</code></pre></div><h4 id=bcontroller>BController</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#66d9ef>package</span> controller

<span style=color:#66d9ef>import</span> entity.Account
<span style=color:#66d9ef>import</span> org.springframework.http.HttpStatus
<span style=color:#66d9ef>import</span> org.springframework.http.MediaType
<span style=color:#66d9ef>import</span> org.springframework.validation.Errors
<span style=color:#66d9ef>import</span> org.springframework.web.bind.annotation.*
<span style=color:#66d9ef>import</span> javax.validation.Valid

<span style=color:#a6e22e>@RestController</span>     <span style=color:#960050;background-color:#1e0010>转换响应体</span>(<span style=color:#960050;background-color:#1e0010>类级别</span>)(ResponseBody + Controller)
<span style=color:#a6e22e>@RequestMapping</span>(<span style=color:#e6db74>&#34;/b&#34;</span>)
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BController</span> {     REST API
    <span style=color:#75715e>//@ResponseBody     转换响应体(方法级别)
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>@RequestMapping</span>(path = arrayOf(<span style=color:#e6db74>&#34;/jsonOut&#34;</span>), method = arrayOf(RequestMethod.GET), produces = arrayOf(MediaType.APPLICATION_JSON_UTF8_VALUE))     <span style=color:#960050;background-color:#1e0010>限制</span> Accept <span style=color:#960050;background-color:#1e0010>头部信息</span>
    <span style=color:#a6e22e>@ResponseStatus</span>(HttpStatus.OK)     <span style=color:#960050;background-color:#1e0010>指定</span> HTTP <span style=color:#960050;background-color:#1e0010>状态码</span>
    <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>a</span>(): Account {
        <span style=color:#66d9ef>return</span> Account(<span style=color:#e6db74>&#34;张三&#34;</span>, <span style=color:#e6db74>&#34;123456&#34;</span>, <span style=color:#ae81ff>20</span>)
    }

    <span style=color:#a6e22e>@RequestMapping</span>(path = arrayOf(<span style=color:#e6db74>&#34;/jsonInOut&#34;</span>), method = arrayOf(RequestMethod.POST), consumes = arrayOf(MediaType.APPLICATION_JSON_UTF8_VALUE))     <span style=color:#960050;background-color:#1e0010>限制</span> Content-Type <span style=color:#960050;background-color:#1e0010>头部信息</span>
    <span style=color:#a6e22e>@ResponseStatus</span>(HttpStatus.CREATED)
    <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>b</span>(<span style=color:#a6e22e>@RequestBody</span> <span style=color:#a6e22e>@Valid</span> account: Account, errors: Errors): Account {     <span style=color:#960050;background-color:#1e0010>转换请求体</span>
        <span style=color:#66d9ef>if</span> (errors.hasErrors()) {
            <span style=color:#66d9ef>throw</span> AccountNotFoundException(<span style=color:#ae81ff>9527</span>)
        }
        <span style=color:#66d9ef>return</span> account.apply { <span style=color:#66d9ef>this</span>.username = <span style=color:#e6db74>&#34;李四&#34;</span> }
    }

    <span style=color:#a6e22e>@ExceptionHandler</span>(AccountNotFoundException<span style=color:#f92672>::</span><span style=color:#66d9ef>class</span>)
    <span style=color:#a6e22e>@ResponseStatus</span>(HttpStatus.NOT_FOUND)
    <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>handleError</span>(e: AccountNotFoundException): Error {
        <span style=color:#66d9ef>return</span> Error(<span style=color:#ae81ff>4</span>, <span style=color:#e6db74>&#34;账户 </span><span style=color:#e6db74>${e.accountId}</span><span style=color:#e6db74> 未找到&#34;</span>)
    }
}

<span style=color:#66d9ef>data</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AccountNotFoundException</span>(
        <span style=color:#66d9ef>val</span> accountId: Int
) : RuntimeException()

<span style=color:#66d9ef>data</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Error</span>(
        <span style=color:#66d9ef>val</span> code: Int,
        <span style=color:#66d9ef>val</span> message: String
)
</code></pre></div><h4 id=ccontroller>CController</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#66d9ef>package</span> controller

<span style=color:#66d9ef>import</span> entity.Account
<span style=color:#66d9ef>import</span> org.springframework.format.annotation.DateTimeFormat
<span style=color:#66d9ef>import</span> org.springframework.web.bind.annotation.*
<span style=color:#66d9ef>import</span> java.util.*

<span style=color:#a6e22e>@RestController</span>
<span style=color:#a6e22e>@RequestMapping</span>(<span style=color:#e6db74>&#34;/c&#34;</span>)
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CController</span> {
    http:<span style=color:#75715e>//localhost:8080/c/base.do?age=123
</span><span style=color:#75715e></span>    Int <span style=color:#960050;background-color:#1e0010>：</span>Kotlin <span style=color:#960050;background-color:#1e0010>编译为原始类型，参数必选</span>
    Int?<span style=color:#960050;background-color:#1e0010>：</span>Kotlin <span style=color:#960050;background-color:#1e0010>编译为包装类型，参数可选</span>
    <span style=color:#a6e22e>@GetMapping</span>(<span style=color:#e6db74>&#34;/base.do&#34;</span>)
    <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>base</span>(age: Int?) = age.toString()

    Array
    http:<span style=color:#75715e>//localhost:8080/c/array.do?names=Tom&amp;names=Lucy&amp;names=Jim
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>@GetMapping</span>(<span style=color:#e6db74>&#34;/array.do&#34;</span>)
    <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>array</span>(names: Array&lt;String&gt;) = Arrays.toString(names)

    Date
    http:<span style=color:#75715e>//localhost:8080/c/date.do?date=2017-07-15
</span><span style=color:#75715e></span>    <span style=color:#960050;background-color:#1e0010>默认时间格式为</span> DateFormat.SHORT<span style=color:#960050;background-color:#1e0010>：</span><span style=color:#ae81ff>15</span>/<span style=color:#ae81ff>07</span>/<span style=color:#ae81ff>17</span> <span style=color:#ae81ff>14</span>:<span style=color:#ae81ff>30</span>
    <span style=color:#a6e22e>@GetMapping</span>(<span style=color:#e6db74>&#34;/date.do&#34;</span>)
    <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>date</span>(<span style=color:#a6e22e>@DateTimeFormat</span>(iso = DateTimeFormat.ISO.DATE) date: Date) = date

    Object
    http:<span style=color:#75715e>//localhost:8080/c/object.do
</span><span style=color:#75715e></span>    <span style=color:#75715e>/*
</span><span style=color:#75715e>    {
</span><span style=color:#75715e>        &#34;username&#34;: &#34;张三&#34;,
</span><span style=color:#75715e>        &#34;password&#34;: &#34;123456&#34;,
</span><span style=color:#75715e>        &#34;age&#34;: 20
</span><span style=color:#75715e>    }
</span><span style=color:#75715e>    */</span>
    <span style=color:#a6e22e>@PostMapping</span>(<span style=color:#e6db74>&#34;/object.do&#34;</span>)
    <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>`object`</span>(<span style=color:#a6e22e>@RequestBody</span> account: Account) = account

    List,Set
    http:<span style=color:#75715e>//localhost:8080/c/list.do
</span><span style=color:#75715e></span>    <span style=color:#75715e>/*
</span><span style=color:#75715e>    [
</span><span style=color:#75715e>        {
</span><span style=color:#75715e>            &#34;username&#34;: &#34;张三&#34;,
</span><span style=color:#75715e>            &#34;password&#34;: &#34;123456&#34;,
</span><span style=color:#75715e>            &#34;age&#34;: 20
</span><span style=color:#75715e>        },
</span><span style=color:#75715e>        {
</span><span style=color:#75715e>            &#34;username&#34;: &#34;张三&#34;,
</span><span style=color:#75715e>            &#34;password&#34;: &#34;123456&#34;,
</span><span style=color:#75715e>            &#34;age&#34;: 20
</span><span style=color:#75715e>        }
</span><span style=color:#75715e>    ]
</span><span style=color:#75715e>    */</span>
    <span style=color:#a6e22e>@PostMapping</span>(<span style=color:#e6db74>&#34;/list.do&#34;</span>)
    <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>list</span>(<span style=color:#a6e22e>@RequestBody</span> accounts: List&lt;Account&gt;) = accounts

    Map
    http:<span style=color:#75715e>//localhost:8080/c/map.do
</span><span style=color:#75715e></span>    <span style=color:#75715e>/*
</span><span style=color:#75715e>    {
</span><span style=color:#75715e>        &#34;a&#34;: {
</span><span style=color:#75715e>            &#34;username&#34;: &#34;张三&#34;,
</span><span style=color:#75715e>            &#34;password&#34;: &#34;123456&#34;,
</span><span style=color:#75715e>            &#34;age&#34;: 20
</span><span style=color:#75715e>        },
</span><span style=color:#75715e>        &#34;b&#34;: {
</span><span style=color:#75715e>            &#34;username&#34;: &#34;张三&#34;,
</span><span style=color:#75715e>            &#34;password&#34;: &#34;123456&#34;,
</span><span style=color:#75715e>            &#34;age&#34;: 20
</span><span style=color:#75715e>        }
</span><span style=color:#75715e>    }
</span><span style=color:#75715e>    */</span>
    <span style=color:#a6e22e>@PostMapping</span>(<span style=color:#e6db74>&#34;/map.do&#34;</span>)
    <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>@RequestBody</span> accounts: Map&lt;String, Account&gt;) = accounts
}
</code></pre></div><h4 id=apperrorhandler>AppErrorHandler</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#66d9ef>package</span> controller

<span style=color:#66d9ef>import</span> org.springframework.web.bind.annotation.ControllerAdvice
<span style=color:#66d9ef>import</span> org.springframework.web.bind.annotation.ExceptionHandler

<span style=color:#a6e22e>@ControllerAdvice</span>     <span style=color:#960050;background-color:#1e0010>控制器通知</span>
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AppErrorHandler</span> {
    <span style=color:#a6e22e>@ExceptionHandler</span>(Throwable<span style=color:#f92672>::</span><span style=color:#66d9ef>class</span>)     <span style=color:#960050;background-color:#1e0010>异常处理（作用于所有控制器）</span>
    <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>handleError</span>(): String {
        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;error&#34;</span>
    }
}
</code></pre></div><h2 id=html>HTML</h2><h3 id=ahtml>a.html</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>&lt;<span style=color:#f92672>html</span> <span style=color:#a6e22e>xmlns:th</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;http://www.thymeleaf.org&#34;</span>&gt;     Thymeleaf 命名空间
&lt;<span style=color:#f92672>head</span>&gt;
    &lt;<span style=color:#f92672>meta</span> <span style=color:#a6e22e>charset</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;UTF-8&#34;</span>&gt;
    &lt;<span style=color:#f92672>title</span>&gt;Title&lt;/<span style=color:#f92672>title</span>&gt;
&lt;/<span style=color:#f92672>head</span>&gt;
&lt;<span style=color:#f92672>body</span>&gt;
&lt;<span style=color:#f92672>p</span> <span style=color:#a6e22e>th:text</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;${account}&#34;</span>&gt;&lt;/<span style=color:#f92672>p</span>&gt;
&lt;/<span style=color:#f92672>body</span>&gt;
&lt;/<span style=color:#f92672>html</span>&gt;

变量表达式：${ }，基于 SpEL 表达式。
选择表达式：*{ }，基于选中对象。
路径表达式：@{ }。
对象表达式：#{ }。
</code></pre></div><h3 id=bhtml>b.html</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>&lt;<span style=color:#f92672>html</span>&gt;
&lt;<span style=color:#f92672>head</span>&gt;
    &lt;<span style=color:#f92672>meta</span> <span style=color:#a6e22e>charset</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;UTF-8&#34;</span>&gt;
    &lt;<span style=color:#f92672>title</span>&gt;Title&lt;/<span style=color:#f92672>title</span>&gt;
&lt;/<span style=color:#f92672>head</span>&gt;
&lt;<span style=color:#f92672>body</span>&gt;
&lt;<span style=color:#f92672>form</span> <span style=color:#a6e22e>action</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/a/form&#34;</span> <span style=color:#a6e22e>method</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;post&#34;</span>&gt;
    &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;username&#34;</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span>&gt;&lt;<span style=color:#f92672>br</span>&gt;
    &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;password&#34;</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span>&gt;&lt;<span style=color:#f92672>br</span>&gt;
    &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;age&#34;</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;number&#34;</span>&gt;&lt;<span style=color:#f92672>br</span>&gt;
    &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;submit&#34;</span>&gt;&lt;<span style=color:#f92672>br</span>&gt;
&lt;/<span style=color:#f92672>form</span>&gt;
&lt;/<span style=color:#f92672>body</span>&gt;
&lt;/<span style=color:#f92672>html</span>&gt;
</code></pre></div><h3 id=chtml>c.html</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>&lt;<span style=color:#f92672>html</span>&gt;
&lt;<span style=color:#f92672>head</span>&gt;
    &lt;<span style=color:#f92672>meta</span> <span style=color:#a6e22e>charset</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;UTF-8&#34;</span>&gt;
    &lt;<span style=color:#f92672>title</span>&gt;Title&lt;/<span style=color:#f92672>title</span>&gt;
&lt;/<span style=color:#f92672>head</span>&gt;
&lt;<span style=color:#f92672>body</span>&gt;
&lt;<span style=color:#f92672>form</span> <span style=color:#a6e22e>action</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/a/upload&#34;</span> <span style=color:#a6e22e>method</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;post&#34;</span> <span style=color:#a6e22e>enctype</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;multipart/form-data&#34;</span>&gt;     以 multipart 格式提交表单
    &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;myPic&#34;</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;file&#34;</span>&gt;&lt;<span style=color:#f92672>br</span>&gt;
    &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;submit&#34;</span>&gt;&lt;<span style=color:#f92672>br</span>&gt;
&lt;/<span style=color:#f92672>form</span>&gt;
&lt;/<span style=color:#f92672>body</span>&gt;
&lt;/<span style=color:#f92672>html</span>&gt;
</code></pre></div></div><div class=sharing style=text-align:center><br><p>捐赠支持</p><p>如果我的文章对你有所帮助，欢迎通过支付宝的扫一扫，轻松的向我发起捐助。</p><p>对于你的支持，我会心怀感激且倍感荣幸地接受，并继续努力。</p><img src=https://ww4.sinaimg.cn/large/a15b4afegw1fbn096ql6dj20dw0dwwe9.jpg alt title data-action=zoom width=40%><p></p><br>&copy; 2015-2020 XhstormR</div></div></div></div><div id=backtop><a href=# title>TOP</a></div><nav id=TableOfContents><ul><li><a href=#concept>Concept</a></li><li><a href=#configuration>Configuration</a><ul><li><a href=#buildgradlekts>build.gradle.kts</a></li></ul></li><li><a href=#code>Code</a><ul><li><a href=#appconfig>AppConfig</a></li><li><a href=#webconfig>WebConfig</a></li><li><a href=#rootconfig>RootConfig</a></li><li><a href=#myinterceptor>MyInterceptor</a></li><li><a href=#mydateformatter>MyDateFormatter</a></li><li><a href=#mystringtodateconverter>MyStringToDateConverter</a></li><li><a href=#entity>entity</a></li><li><a href=#controller>controller</a></li></ul></li><li><a href=#html>HTML</a><ul><li><a href=#ahtml>a.html</a></li><li><a href=#bhtml>b.html</a></li><li><a href=#chtml>c.html</a></li></ul></li></ul></nav><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/languages/yaml.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/languages/kotlin.min.js></script><script>hljs.initHighlightingOnLoad()</script><script src=https://blog.xhstormr.tk/js/zoom.min.js></script><script>window.addEventListener("load",show),window.onscroll=show;function show(){document.documentElement.scrollTop+document.body.scrollTop>300?document.getElementById("backtop").style.display="block":document.getElementById("backtop").style.display="none"}</script><script type=text/javascript color=0,0,0 opacity=1 zindex=-2 count=49 src=https://cdnjs.cloudflare.com/ajax/libs/canvas-nest.js/2.0.4/canvas-nest.js></script></body></html>