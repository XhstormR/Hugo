<!doctype html><html lang=zh-cn manifest=https://blog.xhstormr.tk/offline.appcache><head><meta charset=utf-8><meta name=renderer content="webkit"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>Data Binding Framework &#183; XhstormR</title><link rel=alternate type=application/rss+xml title=XhstormR href><link rel=icon type=image/x-icon href=https://blog.xhstormr.tk/favicon.ico><link rel=stylesheet href=https://blog.xhstormr.tk/css/uno.min.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/monokai-sublime.min.css><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js></script><script src=https://blog.xhstormr.tk/js/main.min.js async defer></script></head><body><div id=scriptHeader><span class="mobile btn-mobile-menu"><i class="fa fa-bars btn-mobile-menu__icon"></i>
<i class="fa fa-times btn-mobile-close__icon hidden"></i></span><header class="panel-cover panel-cover--collapsed"><div class=panel-main><div class="panel-main__inner panel-inverted"><div class=panel-main__content><h1 class="panel-cover__title panel-title"><a href=https://blog.xhstormr.tk/ title="link to homepage for XhstormR">XhstormR</a></h1><hr class=panel-cover__divider><p class=panel-cover__description>On a dark desert highway, cool wind in my hair.</p><hr class="panel-cover__divider panel-cover__divider--secondary"><div class=navigation-wrapper><nav class="cover-navigation cover-navigation--primary"><ul class=navigation><li class=navigation__item><a href=https://blog.xhstormr.tk#blog title="link to XhstormR blog" class=blog-button>Blog</a></li></ul></nav></div></div></div><div class=panel-cover--overlay></div></div></header></div><div class=bodytop><div class=content-wrapper><div class=content-wrapper__inner><div class=post><h1>Data Binding Framework</h1><span class=post-date>2016-11-26</span><p>Updated on 2016-12-03</p><blockquote><p style=text-align:center><img data-src=/uploads/android-databinding.svg alt title="Data Binding" data-action=zoom width></p><script>[].forEach.call(document.querySelectorAll("img[data-src]"),function(a){a.setAttribute("src",a.getAttribute("data-src")),a.onload=function(){a.removeAttribute("data-src")}})</script><p>Model（数据），View（界面），Controller（业务逻辑）</p><p>MVC（Model - View - Controller）</p><p>MVP（Model - View - Presenter）</p><p>MVVM（Model - View - ViewModel）</p><p>Model（数据），View（界面），ViewModel（双向绑定）</p><p><a href=https://developer.android.com/topic/libraries/data-binding/index.html>https://developer.android.com/topic/libraries/data-binding/index.html</a></p></blockquote><h2 id=双向绑定>双向绑定</h2><ul><li>View Listeners：将 View 响应事件产生的数据设置到 Model 中。<ul><li>将 View 的事件映射到 Model 可以承载的数据格式。</li></ul></li><li>Data Bindings：在 Model 发生变化时通知 View 作出响应。<ul><li>将 Model 的数据映射到 View 的界面上。</li></ul></li></ul><h2 id=启用-data-binding>启用 Data Binding</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>build<span style=color:#f92672>.</span><span style=color:#a6e22e>gradle</span>
<span style=color:#960050;background-color:#1e0010>⇳</span>
android <span style=color:#f92672>{</span>
    dataBinding <span style=color:#f92672>{</span>
        enabled <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><h2 id=binding-data>Binding Data</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#a6e22e>@Override</span>
<span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onCreate</span><span style=color:#f92672>(</span>Bundle savedInstanceState<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>super</span><span style=color:#f92672>.</span><span style=color:#a6e22e>onCreate</span><span style=color:#f92672>(</span>savedInstanceState<span style=color:#f92672>);</span>
    ActivityMainBinding activityMainBinding <span style=color:#f92672>=</span> DataBindingUtil<span style=color:#f92672>.</span><span style=color:#a6e22e>setContentView</span><span style=color:#f92672>(</span><span style=color:#66d9ef>this</span><span style=color:#f92672>,</span> R<span style=color:#f92672>.</span><span style=color:#a6e22e>layout</span><span style=color:#f92672>.</span><span style=color:#a6e22e>activity_main</span><span style=color:#f92672>);</span>
    User user <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> User<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;A&#34;</span><span style=color:#f92672>,</span> 25<span style=color:#f92672>);</span>     Data Objects                         <span style=color:#960050;background-color:#1e0010>↳</span> activity_main<span style=color:#f92672>.</span><span style=color:#a6e22e>xml</span> <span style=color:#960050;background-color:#1e0010>➜</span> ActivityMainBinding<span style=color:#f92672>.</span><span style=color:#a6e22e>java</span>
    activityMainBinding<span style=color:#f92672>.</span><span style=color:#a6e22e>setUser</span><span style=color:#f92672>(</span>user<span style=color:#f92672>);</span>     Binding Data Objects
<span style=color:#f92672>}</span>
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#f92672>&lt;layout</span> <span style=color:#a6e22e>xmlns:android=</span><span style=color:#e6db74>&#34;http://schemas.android.com/apk/res/android&#34;</span><span style=color:#f92672>&gt;</span>     <span style=color:#f92672>&lt;layout&gt;</span> 节点

    <span style=color:#f92672>&lt;data&gt;</span>     <span style=color:#f92672>&lt;data&gt;</span> 节点（相当于 ViewModel，是 Model 和 View 之间的桥梁）
        <span style=color:#f92672>&lt;import</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;com.example.myapp.myapplication.User&#34;</span><span style=color:#f92672>/&gt;</span>
        <span style=color:#f92672>&lt;variable</span>
                <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;user&#34;</span>     <span style=color:#960050;background-color:#1e0010>user</span> <span style=color:#960050;background-color:#1e0010>初始为</span> <span style=color:#960050;background-color:#1e0010>null，所以各属性为各自的初始值，以防止因</span> <span style=color:#960050;background-color:#1e0010>NullPointerException</span> <span style=color:#960050;background-color:#1e0010>而</span> <span style=color:#960050;background-color:#1e0010>Crash</span>
                <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;User&#34;</span><span style=color:#f92672>/&gt;</span>
    <span style=color:#f92672>&lt;/data&gt;</span>

    <span style=color:#f92672>&lt;LinearLayout</span>     <span style=color:#960050;background-color:#1e0010>&lt;ViewGroup</span><span style=color:#f92672>&gt;</span> 节点
            android:layout_width=&#34;match_parent&#34;
            android:layout_height=&#34;match_parent&#34;
            android:orientation=&#34;vertical&#34;
            android:padding=&#34;16dp&#34;&gt;
        <span style=color:#f92672>&lt;TextView</span>
                <span style=color:#a6e22e>android:text=</span><span style=color:#e6db74>&#39;@{&#34;&#34;+user.name}&#39;</span>     <span style=color:#960050;background-color:#1e0010>@{表达式}</span>
                <span style=color:#a6e22e>android:layout_width=</span><span style=color:#e6db74>&#34;match_parent&#34;</span>
                <span style=color:#a6e22e>android:layout_height=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span>
                <span style=color:#a6e22e>android:id=</span><span style=color:#e6db74>&#34;@+id/textView1&#34;</span><span style=color:#f92672>/&gt;</span>
        <span style=color:#f92672>&lt;TextView</span>
                <span style=color:#a6e22e>android:text=</span><span style=color:#e6db74>&#34;@{``+user.age,default=35}&#34;</span>     <span style=color:#960050;background-color:#1e0010>设计阶段预览值（,</span><span style=color:#a6e22e>default=</span><span style=color:#e6db74>35）</span>
                <span style=color:#a6e22e>android:layout_width=</span><span style=color:#e6db74>&#34;match_parent&#34;</span>
                <span style=color:#a6e22e>android:layout_height=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span>
                <span style=color:#a6e22e>android:id=</span><span style=color:#e6db74>&#34;@+id/textView2&#34;</span><span style=color:#f92672>/&gt;</span>
    <span style=color:#f92672>&lt;/LinearLayout&gt;</span>

<span style=color:#f92672>&lt;/layout&gt;</span>
</code></pre></div><h2 id=data-objectsdata-bindings>Data Objects（Data Bindings）</h2><h3 id=可观测对象>可观测对象</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>User</span> <span style=color:#66d9ef>extends</span> BaseObservable <span style=color:#f92672>{</span>     继承已实现 Observable 接口的 BaseObservable
    <span style=color:#66d9ef>private</span> String name<span style=color:#f92672>;</span>
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> age<span style=color:#f92672>;</span>

    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>User</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> age<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     构造函数
        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> name<span style=color:#f92672>;</span>
        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>age</span> <span style=color:#f92672>=</span> age<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@Bindable</span>     绑定数据<span style=color:#960050;background-color:#1e0010>（</span>生成 BR<span style=color:#f92672>.</span><span style=color:#a6e22e>name</span><span style=color:#960050;background-color:#1e0010>）</span>
    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>return</span> name<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@Bindable</span>     绑定数据<span style=color:#960050;background-color:#1e0010>（</span>生成 BR<span style=color:#f92672>.</span><span style=color:#a6e22e>age</span><span style=color:#960050;background-color:#1e0010>）</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getAge</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>return</span> age<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setName</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> name<span style=color:#f92672>;</span>
        notifyPropertyChanged<span style=color:#f92672>(</span>BR<span style=color:#f92672>.</span><span style=color:#a6e22e>name</span><span style=color:#f92672>);</span>     通知数据改变
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setAge</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> age<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>age</span> <span style=color:#f92672>=</span> age<span style=color:#f92672>;</span>
        notifyPropertyChanged<span style=color:#f92672>(</span>BR<span style=color:#f92672>.</span><span style=color:#a6e22e>age</span><span style=color:#f92672>);</span>     通知数据改变
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

<span style=color:#f92672>-------------------------------------------------------</span>

user<span style=color:#f92672>.</span><span style=color:#a6e22e>setName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;B&#34;</span><span style=color:#f92672>);</span>
String s <span style=color:#f92672>=</span> user<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>();</span>
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#f92672>&lt;data&gt;</span>
    <span style=color:#f92672>&lt;import</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;com.example.myapp.myapplication.User&#34;</span><span style=color:#f92672>/&gt;</span>
    <span style=color:#f92672>&lt;variable</span>
            <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;user&#34;</span>
            <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;User&#34;</span><span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;/data&gt;</span>

----

android:text=&#39;@{&#34;&#34;+user.name}&#39;
android:text=&#39;@{&#34;&#34;+user.age}&#39;
</code></pre></div><h3 id=可观测字段>可观测字段</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>User</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>final</span> ObservableField<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> name <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ObservableField<span style=color:#f92672>&lt;&gt;();</span>     ObservableField<span style=color:#960050;background-color:#1e0010>（</span>可观测对象<span style=color:#960050;background-color:#1e0010>）</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>final</span> ObservableInt age <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ObservableInt<span style=color:#f92672>();</span>     ObservableInt<span style=color:#960050;background-color:#1e0010>（</span>可观测对象<span style=color:#960050;background-color:#1e0010>）</span>

    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>User</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> age<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     构造函数
        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>name</span><span style=color:#f92672>.</span><span style=color:#a6e22e>set</span><span style=color:#f92672>(</span>name<span style=color:#f92672>);</span>
        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>age</span><span style=color:#f92672>.</span><span style=color:#a6e22e>set</span><span style=color:#f92672>(</span>age<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

<span style=color:#f92672>-------------------------------------------------------</span>

user<span style=color:#f92672>.</span><span style=color:#a6e22e>name</span><span style=color:#f92672>.</span><span style=color:#a6e22e>set</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;B&#34;</span><span style=color:#f92672>);</span>
String s <span style=color:#f92672>=</span> user<span style=color:#f92672>.</span><span style=color:#a6e22e>name</span><span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>();</span>
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#f92672>&lt;data&gt;</span>
    <span style=color:#f92672>&lt;import</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;com.example.myapp.myapplication.User&#34;</span><span style=color:#f92672>/&gt;</span>
    <span style=color:#f92672>&lt;variable</span>
            <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;user&#34;</span>
            <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;User&#34;</span><span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;/data&gt;</span>

----

android:text=&#39;@{&#34;&#34;+user.name}&#39;
android:text=&#39;@{&#34;&#34;+user.age}&#39;
</code></pre></div><h3 id=可观测集合>可观测集合</h3><h4 id=observablearraymap>ObservableArrayMap</h4><p>索引为对象</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>ObservableArrayMap<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>,</span> Object<span style=color:#f92672>&gt;</span> user <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ObservableArrayMap<span style=color:#f92672>&lt;&gt;();</span>
user<span style=color:#f92672>.</span><span style=color:#a6e22e>put</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;name&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;A&#34;</span><span style=color:#f92672>);</span>
user<span style=color:#f92672>.</span><span style=color:#a6e22e>put</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;age&#34;</span><span style=color:#f92672>,</span> 25<span style=color:#f92672>);</span>

<span style=color:#f92672>-------------------------------------------------------</span>

user<span style=color:#f92672>.</span><span style=color:#a6e22e>put</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;name&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;B&#34;</span><span style=color:#f92672>);</span>
Object o <span style=color:#f92672>=</span> user<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;name&#34;</span><span style=color:#f92672>);</span>
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#f92672>&lt;data&gt;</span>
    <span style=color:#f92672>&lt;import</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;android.databinding.ObservableMap&#34;</span><span style=color:#f92672>/&gt;</span>
    <span style=color:#f92672>&lt;variable</span>
            <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;user&#34;</span>
            <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;ObservableMap&#34;</span><span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;/data&gt;</span>

----

android:text=&#39;@{&#34;&#34;+user[&#34;name&#34;]}&#39;
android:text=&#39;@{&#34;&#34;+user[&#34;age&#34;]}&#39;
</code></pre></div><h4 id=observablearraylist>ObservableArrayList</h4><p>索引为整数</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>ObservableArrayList<span style=color:#f92672>&lt;</span>Object<span style=color:#f92672>&gt;</span> user <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ObservableArrayList<span style=color:#f92672>&lt;&gt;();</span>
user<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;A&#34;</span><span style=color:#f92672>);</span>
user<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>25<span style=color:#f92672>);</span>

<span style=color:#f92672>-------------------------------------------------------</span>

user<span style=color:#f92672>.</span><span style=color:#a6e22e>set</span><span style=color:#f92672>(</span>0<span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;B&#34;</span><span style=color:#f92672>);</span>
Object o <span style=color:#f92672>=</span> user<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>0<span style=color:#f92672>);</span>
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#f92672>&lt;data&gt;</span>
    <span style=color:#f92672>&lt;import</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;android.databinding.ObservableList&#34;</span><span style=color:#f92672>/&gt;</span>
    <span style=color:#f92672>&lt;variable</span>
            <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;user&#34;</span>
            <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;ObservableList&#34;</span><span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;/data&gt;</span>

----

android:text=&#39;@{&#34;&#34;+user[0]}&#39;
android:text=&#39;@{&#34;&#34;+user[1]}&#39;
</code></pre></div><h2 id=event-handlingview-listeners>Event Handling（View Listeners）</h2><h3 id=method-references>Method References</h3><p>数据绑定时就评估表达式，方法签名需相同。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>a</span><span style=color:#f92672>(</span>View view<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     对应接口 OnClickListener 中的 onClick 方法
        Log<span style=color:#f92672>.</span><span style=color:#a6e22e>w</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Tag&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;单击_&#34;</span> <span style=color:#f92672>+</span> view<span style=color:#f92672>.</span><span style=color:#a6e22e>getResources</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getResourceEntryName</span><span style=color:#f92672>(</span>view<span style=color:#f92672>.</span><span style=color:#a6e22e>getId</span><span style=color:#f92672>()));</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>b</span><span style=color:#f92672>(</span>View view<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     对应接口 OnLongClickListener 中的 onLongClick 方法
        Log<span style=color:#f92672>.</span><span style=color:#a6e22e>w</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Tag&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;长按_&#34;</span> <span style=color:#f92672>+</span> view<span style=color:#f92672>.</span><span style=color:#a6e22e>getResources</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getResourceEntryName</span><span style=color:#f92672>(</span>view<span style=color:#f92672>.</span><span style=color:#a6e22e>getId</span><span style=color:#f92672>()));</span>
        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>c</span><span style=color:#f92672>(</span>CharSequence s<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> i1<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> i2<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> i3<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     对应接口 TextWatcher 中的 onTextChanged 方法
        Log<span style=color:#f92672>.</span><span style=color:#a6e22e>w</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Tag&#34;</span><span style=color:#f92672>,</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>());</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#f92672>&lt;data&gt;</span>
    <span style=color:#f92672>&lt;import</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;com.example.myapp.myapplication.A&#34;</span><span style=color:#f92672>/&gt;</span>
    <span style=color:#f92672>&lt;variable</span>
            <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;a&#34;</span>
            <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;A&#34;</span><span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;/data&gt;</span>

----

<span style=color:#f92672>&lt;EditText</span>
        <span style=color:#a6e22e>android:onClick=</span><span style=color:#e6db74>&#34;@{a.a}&#34;</span>     <span style=color:#960050;background-color:#1e0010>传入对应方法即可，也可表达为</span> <span style=color:#960050;background-color:#1e0010>&#34;@{a::a}&#34;</span>
        <span style=color:#a6e22e>android:onLongClick=</span><span style=color:#e6db74>&#34;@{a.b}&#34;</span>
        <span style=color:#a6e22e>android:onTextChanged=</span><span style=color:#e6db74>&#34;@{a.c}&#34;</span>
        <span style=color:#a6e22e>android:layout_width=</span><span style=color:#e6db74>&#34;match_parent&#34;</span>
        <span style=color:#a6e22e>android:layout_height=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span>
        <span style=color:#a6e22e>android:id=</span><span style=color:#e6db74>&#34;@+id/editText&#34;</span><span style=color:#f92672>/&gt;</span>
</code></pre></div><h3 id=listener-bindings>Listener Bindings</h3><p>事件发生时才评估表达式，只需返回值相同。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>a</span><span style=color:#f92672>(</span>User user<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     onClick 返回 <span style=color:#66d9ef>void</span>
        Log<span style=color:#f92672>.</span><span style=color:#a6e22e>w</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Tag&#34;</span><span style=color:#f92672>,</span> String<span style=color:#f92672>.</span><span style=color:#a6e22e>format</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;单击_%s_%s&#34;</span><span style=color:#f92672>,</span> user<span style=color:#f92672>.</span><span style=color:#a6e22e>name</span><span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(),</span> user<span style=color:#f92672>.</span><span style=color:#a6e22e>age</span><span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>()));</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>b</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>     onLongClick 返回 <span style=color:#66d9ef>boolean</span>
        Log<span style=color:#f92672>.</span><span style=color:#a6e22e>w</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Tag&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;长按&#34;</span><span style=color:#f92672>);</span>
        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>c</span><span style=color:#f92672>(</span>User user<span style=color:#f92672>,</span> CharSequence s<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     onTextChanged 返回 <span style=color:#66d9ef>void</span>
        Log<span style=color:#f92672>.</span><span style=color:#a6e22e>w</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Tag&#34;</span><span style=color:#f92672>,</span> String<span style=color:#f92672>.</span><span style=color:#a6e22e>format</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;%s_%s_%s&#34;</span><span style=color:#f92672>,</span> s<span style=color:#f92672>,</span> user<span style=color:#f92672>.</span><span style=color:#a6e22e>name</span><span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(),</span> user<span style=color:#f92672>.</span><span style=color:#a6e22e>age</span><span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>()));</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#f92672>&lt;data&gt;</span>
    <span style=color:#f92672>&lt;import</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;com.example.myapp.myapplication.A&#34;</span><span style=color:#f92672>/&gt;</span>
    <span style=color:#f92672>&lt;import</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;com.example.myapp.myapplication.User&#34;</span><span style=color:#f92672>/&gt;</span>
    <span style=color:#f92672>&lt;variable</span>
            <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;a&#34;</span>
            <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;A&#34;</span><span style=color:#f92672>/&gt;</span>
    <span style=color:#f92672>&lt;variable</span>
            <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;user&#34;</span>
            <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;User&#34;</span><span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;/data&gt;</span>

----

<span style=color:#f92672>&lt;EditText</span>     <span style=color:#960050;background-color:#1e0010>Listener</span> <span style=color:#960050;background-color:#1e0010>Bindings</span> <span style=color:#960050;background-color:#1e0010>本质是回调方法，使用</span> <span style=color:#960050;background-color:#1e0010>Lambda</span> <span style=color:#960050;background-color:#1e0010>表达式传递参数，若无需自动生成的监听器提供的参数，则可省略参数列表</span>
        <span style=color:#a6e22e>android:onClick=</span><span style=color:#e6db74>&#34;@{()-&gt;a.a(user)}&#34;</span>
        <span style=color:#a6e22e>android:onLongClick=</span><span style=color:#e6db74>&#34;@{()-&gt;a.b()}&#34;</span>
        <span style=color:#a6e22e>android:onTextChanged=</span><span style=color:#e6db74>&#34;@{(s,i1,i2,i3)-&gt;a.c(user,s)}&#34;</span>     <span style=color:#960050;background-color:#1e0010>未省略参数列表</span>
        <span style=color:#a6e22e>android:layout_width=</span><span style=color:#e6db74>&#34;match_parent&#34;</span>
        <span style=color:#a6e22e>android:layout_height=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span>
        <span style=color:#a6e22e>android:id=</span><span style=color:#e6db74>&#34;@+id/editText&#34;</span><span style=color:#f92672>/&gt;</span>
</code></pre></div><h3 id=heading>@=</h3><p>仅支持 text、checked、year、mouth、hour、rating、progress 等属性。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#f92672>&lt;data&gt;</span>
    <span style=color:#f92672>&lt;variable</span>
            <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;s&#34;</span>
            <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;String&#34;</span><span style=color:#f92672>/&gt;</span>     lang 包下的类自动导入
    <span style=color:#f92672>&lt;variable</span>
            <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;b&#34;</span>
            <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;Boolean&#34;</span><span style=color:#f92672>/&gt;</span>     lang 包下的类自动导入
<span style=color:#f92672>&lt;/data&gt;</span>

----

<span style=color:#f92672>&lt;TextView</span>
        <span style=color:#a6e22e>android:text=</span><span style=color:#e6db74>&#34;@{s}&#34;</span>     <span style=color:#960050;background-color:#1e0010>自动同步</span>
        <span style=color:#a6e22e>android:layout_width=</span><span style=color:#e6db74>&#34;match_parent&#34;</span>
        <span style=color:#a6e22e>android:layout_height=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span><span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;TextView</span>
        <span style=color:#a6e22e>android:text=</span><span style=color:#e6db74>&#34;@{``+b}&#34;</span>     <span style=color:#960050;background-color:#1e0010>自动同步</span>
        <span style=color:#a6e22e>android:layout_width=</span><span style=color:#e6db74>&#34;match_parent&#34;</span>
        <span style=color:#a6e22e>android:layout_height=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span><span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;EditText</span>
        <span style=color:#a6e22e>android:text=</span><span style=color:#e6db74>&#34;@={s}&#34;</span>     <span style=color:#960050;background-color:#1e0010>自动更新</span>
        <span style=color:#a6e22e>android:layout_width=</span><span style=color:#e6db74>&#34;match_parent&#34;</span>
        <span style=color:#a6e22e>android:layout_height=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span><span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;CheckBox</span>
        <span style=color:#a6e22e>android:checked=</span><span style=color:#e6db74>&#34;@={b}&#34;</span>     <span style=color:#960050;background-color:#1e0010>自动更新</span>
        <span style=color:#a6e22e>android:layout_width=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span>
        <span style=color:#a6e22e>android:layout_height=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span><span style=color:#f92672>/&gt;</span>
</code></pre></div><h3 id=onpropertychangedcallback>OnPropertyChangedCallback</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>Observable<span style=color:#f92672>.</span><span style=color:#a6e22e>OnPropertyChangedCallback</span> propertyChangedCallback <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Observable<span style=color:#f92672>.</span><span style=color:#a6e22e>OnPropertyChangedCallback</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>     抽象类
    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onPropertyChanged</span><span style=color:#f92672>(</span>Observable sender<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> propertyId<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     属性改变时调用
        Log<span style=color:#f92672>.</span><span style=color:#a6e22e>w</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Tag&#34;</span><span style=color:#f92672>,</span> propertyId <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_&#34;</span> <span style=color:#f92672>+</span> sender<span style=color:#f92672>.</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>());</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>};</span>

user<span style=color:#f92672>.</span><span style=color:#a6e22e>name</span><span style=color:#f92672>.</span><span style=color:#a6e22e>addOnPropertyChangedCallback</span><span style=color:#f92672>(</span>propertyChangedCallback<span style=color:#f92672>);</span>     添加回调
user<span style=color:#f92672>.</span><span style=color:#a6e22e>name</span><span style=color:#f92672>.</span><span style=color:#a6e22e>removeOnPropertyChangedCallback</span><span style=color:#f92672>(</span>propertyChangedCallback<span style=color:#f92672>);</span>     移除回调
</code></pre></div><h2 id=注解>注解</h2><h3 id=bindingadapter>BindingAdapter</h3><p>将 XML 中定义的属性值与对应的实现方法绑定在一起。</p><h4 id=绑定自定义属性>绑定自定义属性</h4><p><strong>添加</strong> 新的 XML 属性及其实现。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#a6e22e>@BindingAdapter</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;abc&#34;</span><span style=color:#f92672>)</span>     注解<span style=color:#960050;background-color:#1e0010>（</span>该方法与自定义属性 app<span style=color:#f92672>:</span>abc 关联<span style=color:#960050;background-color:#1e0010>）</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>a</span><span style=color:#f92672>(</span>TextView view<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> height<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     为控件设置高度<span style=color:#960050;background-color:#1e0010>（</span>该方法可以写在任意位置<span style=color:#960050;background-color:#1e0010>）</span>
    ViewGroup<span style=color:#f92672>.</span><span style=color:#a6e22e>LayoutParams</span> layoutParams <span style=color:#f92672>=</span> view<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayoutParams</span><span style=color:#f92672>();</span>
    layoutParams<span style=color:#f92672>.</span><span style=color:#a6e22e>height</span> <span style=color:#f92672>=</span> height<span style=color:#f92672>;</span>
    view<span style=color:#f92672>.</span><span style=color:#a6e22e>setLayoutParams</span><span style=color:#f92672>(</span>layoutParams<span style=color:#f92672>);</span>
<span style=color:#f92672>}</span>

<span style=color:#f92672>-------------------------------------------------------</span>

<span style=color:#a6e22e>@BindingAdapter</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;abc&#34;</span><span style=color:#f92672>)</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>a</span><span style=color:#f92672>(</span>TextView view<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> oldHeight<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> newHeight<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     另外也可获取旧值<span style=color:#960050;background-color:#1e0010>（</span>View<span style=color:#960050;background-color:#1e0010>，</span>oldValue<span style=color:#960050;background-color:#1e0010>，</span>newValue<span style=color:#960050;background-color:#1e0010>）（</span>oldValue 最初为对应初始值<span style=color:#960050;background-color:#1e0010>，</span>以防止 NullPointerException<span style=color:#960050;background-color:#1e0010>）</span>
    Log<span style=color:#f92672>.</span><span style=color:#a6e22e>w</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Tag&#34;</span><span style=color:#f92672>,</span> String<span style=color:#f92672>.</span><span style=color:#a6e22e>format</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;旧值:%d,新值:%d&#34;</span><span style=color:#f92672>,</span> oldHeight<span style=color:#f92672>,</span> newHeight<span style=color:#f92672>));</span>
<span style=color:#f92672>}</span>
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#f92672>&lt;data&gt;</span>
    <span style=color:#f92672>&lt;variable</span>
            <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;height&#34;</span>
            <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;Integer&#34;</span><span style=color:#f92672>/&gt;</span>     lang 包下的类自动导入
<span style=color:#f92672>&lt;/data&gt;</span>

----

<span style=color:#f92672>&lt;TextView</span>
        <span style=color:#a6e22e>app:abc=</span><span style=color:#e6db74>&#34;@{height}&#34;</span>     <span style=color:#960050;background-color:#1e0010>使用自定义属性，传入</span> <span style=color:#960050;background-color:#1e0010>int，控件高度</span>
        <span style=color:#a6e22e>android:text=</span><span style=color:#e6db74>&#39;@{``+user.name}&#39;</span>
        <span style=color:#a6e22e>android:layout_width=</span><span style=color:#e6db74>&#34;match_parent&#34;</span>
        <span style=color:#a6e22e>android:layout_height=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span>
        <span style=color:#a6e22e>android:id=</span><span style=color:#e6db74>&#34;@+id/textView1&#34;</span><span style=color:#f92672>/&gt;</span>
</code></pre></div><h4 id=绑定系统属性>绑定系统属性</h4><p>对原有 XML 属性进行 <strong>重写</strong>。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#a6e22e>@BindingAdapter</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;android:src&#34;</span><span style=color:#f92672>)</span>     注解<span style=color:#960050;background-color:#1e0010>（</span>该方法与系统属性 android<span style=color:#f92672>:</span>src 关联<span style=color:#960050;background-color:#1e0010>）</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>b</span><span style=color:#f92672>(</span>ImageView view<span style=color:#f92672>,</span> String url<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     为 ImageView 加载图片<span style=color:#960050;background-color:#1e0010>（</span>该方法可以写在任意位置<span style=color:#960050;background-color:#1e0010>）</span>
    Single
            <span style=color:#f92672>.</span><span style=color:#a6e22e>just</span><span style=color:#f92672>(</span>url<span style=color:#f92672>)</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>s <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>{</span>
                Bitmap bitmap <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
                <span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>BufferedInputStream bufferedInputStream <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> BufferedInputStream<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> URL<span style=color:#f92672>(</span>s<span style=color:#f92672>).</span><span style=color:#a6e22e>openStream</span><span style=color:#f92672>()))</span> <span style=color:#f92672>{</span>
                    bitmap <span style=color:#f92672>=</span> BitmapFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>decodeStream</span><span style=color:#f92672>(</span>bufferedInputStream<span style=color:#f92672>);</span>
                <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>IOException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
                    e<span style=color:#f92672>.</span><span style=color:#a6e22e>printStackTrace</span><span style=color:#f92672>();</span>
                <span style=color:#f92672>}</span>
                <span style=color:#66d9ef>return</span> bitmap<span style=color:#f92672>;</span>
            <span style=color:#f92672>})</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>observeOn</span><span style=color:#f92672>(</span>AndroidSchedulers<span style=color:#f92672>.</span><span style=color:#a6e22e>mainThread</span><span style=color:#f92672>())</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribeOn</span><span style=color:#f92672>(</span>Schedulers<span style=color:#f92672>.</span><span style=color:#a6e22e>io</span><span style=color:#f92672>())</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>view<span style=color:#f92672>::</span>setImageBitmap<span style=color:#f92672>);</span>
<span style=color:#f92672>}</span>
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#f92672>&lt;data&gt;</span>
    <span style=color:#f92672>&lt;variable</span>
            <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;url&#34;</span>
            <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;String&#34;</span><span style=color:#f92672>/&gt;</span>     lang 包下的类自动导入
<span style=color:#f92672>&lt;/data&gt;</span>

----

<span style=color:#f92672>&lt;ImageView</span>
        <span style=color:#a6e22e>android:src=</span><span style=color:#e6db74>&#34;@{url}&#34;</span>     <span style=color:#960050;background-color:#1e0010>@{}</span> <span style=color:#960050;background-color:#1e0010>表达式中传入</span> <span style=color:#960050;background-color:#1e0010>String</span>
        <span style=color:#a6e22e>android:layout_width=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span>
        <span style=color:#a6e22e>android:layout_height=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span><span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;ImageView</span>
        <span style=color:#a6e22e>android:src=</span><span style=color:#e6db74>&#34;@mipmap/ic_launcher&#34;</span>     <span style=color:#960050;background-color:#1e0010>普通表达式不受影响</span>
        <span style=color:#a6e22e>android:layout_width=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span>
        <span style=color:#a6e22e>android:layout_height=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span><span style=color:#f92672>/&gt;</span>
</code></pre></div><h4 id=组合>组合</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>注解<span style=color:#960050;background-color:#1e0010>（</span>同时关联自定义属性 i1<span style=color:#960050;background-color:#1e0010>，</span>i2<span style=color:#960050;background-color:#1e0010>，</span><span style=color:#66d9ef>false</span> 表示控件使用二者其一便可匹配该方法<span style=color:#960050;background-color:#1e0010>，</span>缺失的属性用其初始值替代<span style=color:#960050;background-color:#1e0010>，</span>默认为 <span style=color:#66d9ef>true</span><span style=color:#960050;background-color:#1e0010>）</span>
例<span style=color:#960050;background-color:#1e0010>：</span>
若控件只使用了 i1<span style=color:#960050;background-color:#1e0010>，</span>则 pic 为 0<span style=color:#960050;background-color:#1e0010>；</span>
若控件只使用了 i2<span style=color:#960050;background-color:#1e0010>，</span>则 url 为 <span style=color:#66d9ef>null</span><span style=color:#960050;background-color:#1e0010>。</span>

<span style=color:#a6e22e>@BindingAdapter</span><span style=color:#f92672>(</span>value <span style=color:#f92672>=</span> <span style=color:#f92672>{</span><span style=color:#e6db74>&#34;i1&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;i2&#34;</span><span style=color:#f92672>},</span> requireAll <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>)</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>a</span><span style=color:#f92672>(</span>ImageView view<span style=color:#f92672>,</span> String url<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> pic<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     图片加载完成之前显示占位图<span style=color:#960050;background-color:#1e0010>（</span>该方法可以写在任意位置<span style=color:#960050;background-color:#1e0010>）</span>
    Single
            <span style=color:#f92672>.</span><span style=color:#a6e22e>just</span><span style=color:#f92672>(</span>url<span style=color:#f92672>)</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>s <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>{</span>
                Bitmap bitmap <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
                <span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>BufferedInputStream bufferedInputStream <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> BufferedInputStream<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> URL<span style=color:#f92672>(</span>url<span style=color:#f92672>).</span><span style=color:#a6e22e>openStream</span><span style=color:#f92672>()))</span> <span style=color:#f92672>{</span>
                    bitmap <span style=color:#f92672>=</span> BitmapFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>decodeStream</span><span style=color:#f92672>(</span>bufferedInputStream<span style=color:#f92672>);</span>
                <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>IOException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
                    e<span style=color:#f92672>.</span><span style=color:#a6e22e>printStackTrace</span><span style=color:#f92672>();</span>
                <span style=color:#f92672>}</span>
                <span style=color:#66d9ef>return</span> bitmap<span style=color:#f92672>;</span>
            <span style=color:#f92672>})</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>doOnSubscribe</span><span style=color:#f92672>(()</span> <span style=color:#f92672>-&gt;</span> view<span style=color:#f92672>.</span><span style=color:#a6e22e>setImageResource</span><span style=color:#f92672>(</span>pic<span style=color:#f92672>))</span>     设置 resId 占位图<span style=color:#960050;background-color:#1e0010>（</span>可在非 UI 线程<span style=color:#960050;background-color:#1e0010>）</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>observeOn</span><span style=color:#f92672>(</span>AndroidSchedulers<span style=color:#f92672>.</span><span style=color:#a6e22e>mainThread</span><span style=color:#f92672>())</span>     切换至 UI <span style=color:#a6e22e>线程</span> <span style=color:#f92672>(</span>2<span style=color:#f92672>)</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribeOn</span><span style=color:#f92672>(</span>Schedulers<span style=color:#f92672>.</span><span style=color:#a6e22e>io</span><span style=color:#f92672>())</span>     指定最开始在IO线程中运行 <span style=color:#f92672>(</span>1<span style=color:#f92672>)</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>subscribe</span><span style=color:#f92672>(</span>view<span style=color:#f92672>::</span>setImageBitmap<span style=color:#f92672>);</span>     设置 Bitmap<span style=color:#960050;background-color:#1e0010>（</span>必须在 UI 线程<span style=color:#960050;background-color:#1e0010>）</span>
<span style=color:#f92672>}</span>
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#f92672>&lt;data&gt;</span>
    <span style=color:#f92672>&lt;import</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;com.example.myapp.myapplication.R&#34;</span><span style=color:#f92672>/&gt;</span>     导入资源类 R
    <span style=color:#f92672>&lt;variable</span>
            <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;url&#34;</span>
            <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;String&#34;</span><span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;/data&gt;</span>

----

<span style=color:#f92672>&lt;ImageView</span>
        <span style=color:#a6e22e>app:i1=</span><span style=color:#e6db74>&#34;@{url}&#34;</span>     <span style=color:#960050;background-color:#1e0010>使用自定义属性，传入</span> <span style=color:#960050;background-color:#1e0010>String，图片链接</span>
        <span style=color:#a6e22e>app:i2=</span><span style=color:#e6db74>&#34;@{R.mipmap.ic_launcher}&#34;</span>     <span style=color:#960050;background-color:#1e0010>使用自定义属性，传入</span> <span style=color:#960050;background-color:#1e0010>int，占位图</span>
        <span style=color:#a6e22e>android:layout_width=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span>
        <span style=color:#a6e22e>android:layout_height=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span><span style=color:#f92672>/&gt;</span>
</code></pre></div><h3 id=bindingconversion>BindingConversion</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#a6e22e>@BindingConversion</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> ColorDrawable <span style=color:#a6e22e>a</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> color<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>     接收 <span style=color:#66d9ef>int</span><span style=color:#960050;background-color:#1e0010>，</span>转换为 ColorDrawable 对象<span style=color:#960050;background-color:#1e0010>（</span>该方法可以写在任意位置<span style=color:#960050;background-color:#1e0010>）</span>
    Log<span style=color:#f92672>.</span><span style=color:#a6e22e>w</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Tag&#34;</span><span style=color:#f92672>,</span> String<span style=color:#f92672>.</span><span style=color:#a6e22e>format</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;方法被调用，color = %d&#34;</span><span style=color:#f92672>,</span> color<span style=color:#f92672>));</span>
    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> ColorDrawable<span style=color:#f92672>(</span>color<span style=color:#f92672>);</span>
<span style=color:#f92672>}</span>
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#f92672>&lt;EditText</span>
        <span style=color:#a6e22e>android:background=</span><span style=color:#e6db74>&#34;@{@color/colorAccent}&#34;</span>     <span style=color:#960050;background-color:#1e0010>@{}</span> <span style=color:#960050;background-color:#1e0010>表达式中传入</span> <span style=color:#960050;background-color:#1e0010>int，background</span> <span style=color:#960050;background-color:#1e0010>属性接收</span> <span style=color:#960050;background-color:#1e0010>ColorDrawable</span> <span style=color:#960050;background-color:#1e0010>对象</span>
        <span style=color:#a6e22e>android:layout_width=</span><span style=color:#e6db74>&#34;match_parent&#34;</span>
        <span style=color:#a6e22e>android:layout_height=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span><span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;EditText</span>
        <span style=color:#a6e22e>android:background=</span><span style=color:#e6db74>&#34;@color/colorAccent&#34;</span>     <span style=color:#960050;background-color:#1e0010>普通表达式不受影响</span>
        <span style=color:#a6e22e>android:layout_width=</span><span style=color:#e6db74>&#34;match_parent&#34;</span>
        <span style=color:#a6e22e>android:layout_height=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span><span style=color:#f92672>/&gt;</span>
</code></pre></div><h2 id=code>Code</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>使用静态方法
<span style=color:#f92672>-------------------------------------------------------</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> String <span style=color:#a6e22e>a</span><span style=color:#f92672>(</span>String s<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;你好:&#34;</span> <span style=color:#f92672>+</span> s<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#f92672>&lt;data&gt;</span>
    <span style=color:#f92672>&lt;import</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;com.example.myapp.myapplication.A&#34;</span><span style=color:#f92672>/&gt;</span>
    <span style=color:#f92672>&lt;import</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;com.example.myapp.myapplication.User&#34;</span><span style=color:#f92672>/&gt;</span>
    <span style=color:#f92672>&lt;variable</span>
            <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;user&#34;</span>
            <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;User&#34;</span><span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;/data&gt;</span>

----

android:text=&#34;@{A.a(user.name)}&#34;
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml>自定义 Binding 类名及生成位置
（默认为 activity_main.xml ➜ com.example.myapp.myapplication.databinding.ActivityMainBinding.java）
-------------------------------------------------------
<span style=color:#f92672>&lt;data</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;ABC&#34;</span><span style=color:#f92672>&gt;</span>     com.example.myapp.myapplication.databinding.ABC
    ...
<span style=color:#f92672>&lt;/data&gt;</span>

<span style=color:#f92672>&lt;data</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;.ABC&#34;</span><span style=color:#f92672>&gt;</span>     com.example.myapp.myapplication.ABC
    ...
<span style=color:#f92672>&lt;/data&gt;</span>

<span style=color:#f92672>&lt;data</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;com.example.ABC&#34;</span><span style=color:#f92672>&gt;</span>     com.example.ABC
    ...
<span style=color:#f92672>&lt;/data&gt;</span>
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>运算符
<span style=color:#960050;background-color:#1e0010>（</span>只有 <span style=color:#66d9ef>this</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#66d9ef>super</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#66d9ef>new</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#f92672>&lt;&gt;</span>泛型不支持<span style=color:#960050;background-color:#1e0010>）</span>
<span style=color:#f92672>-------------------------------------------------------</span>
android:text<span style=color:#f92672>=</span><span style=color:#960050;background-color:#1e0010>&#39;@</span><span style=color:#f92672>{</span>user<span style=color:#f92672>.</span><span style=color:#a6e22e>name</span> <span style=color:#f92672>??</span> <span style=color:#e6db74>&#34;无名氏&#34;</span><span style=color:#f92672>}</span><span style=color:#960050;background-color:#1e0010>&#39;</span>     <span style=color:#e6db74>&#34;A&#34;</span> <span style=color:#f92672>??</span> <span style=color:#e6db74>&#34;B&#34;</span>     选取第一个非空值作为结果
等同于
android:text<span style=color:#f92672>=</span><span style=color:#960050;background-color:#1e0010>&#39;@</span><span style=color:#f92672>{</span>user<span style=color:#f92672>.</span><span style=color:#a6e22e>name</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>?</span> user<span style=color:#f92672>.</span><span style=color:#a6e22e>name</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;无名氏&#34;</span><span style=color:#f92672>}</span><span style=color:#960050;background-color:#1e0010>&#39;</span>     <span style=color:#e6db74>&#34;A&#34;</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;A&#34;</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;B&#34;</span>

android:text<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;@{``+user.age}&#34;</span>     <span style=color:#e6db74>&#34;``&#34;</span>
等同于
android:text<span style=color:#f92672>=</span><span style=color:#960050;background-color:#1e0010>&#39;@</span><span style=color:#f92672>{</span><span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>+</span>user<span style=color:#f92672>.</span><span style=color:#a6e22e>age</span><span style=color:#f92672>}</span><span style=color:#960050;background-color:#1e0010>&#39;</span>     <span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#e6db74>&#34;&#34;</span><span style=color:#960050;background-color:#1e0010>&#39;</span>
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml>使用 ID
-------------------------------------------------------

<span style=color:#f92672>&lt;TextView</span>
        <span style=color:#a6e22e>android:id=</span><span style=color:#e6db74>&#34;@+id/textView&#34;</span>
        <span style=color:#a6e22e>android:layout_width=</span><span style=color:#e6db74>&#34;match_parent&#34;</span>
        <span style=color:#a6e22e>android:layout_height=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span><span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;EditText</span>
        <span style=color:#a6e22e>android:onTextChanged=</span><span style=color:#e6db74>&#34;@{(s,i1,i2,i3)-&gt;textView.setText(s)}&#34;</span>     <span style=color:#960050;background-color:#1e0010>textView</span> <span style=color:#960050;background-color:#1e0010>同步显示输入</span>
        <span style=color:#a6e22e>android:layout_width=</span><span style=color:#e6db74>&#34;match_parent&#34;</span>
        <span style=color:#a6e22e>android:layout_height=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span><span style=color:#f92672>/&gt;</span>

-------------------------------------------------------

<span style=color:#f92672>&lt;data&gt;</span>
    <span style=color:#f92672>&lt;variable</span>
            <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;b&#34;</span>
            <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;Boolean&#34;</span><span style=color:#f92672>/&gt;</span>     Boolean 初始值为 false
<span style=color:#f92672>&lt;/data&gt;</span>

----

<span style=color:#f92672>&lt;TextView</span>
        <span style=color:#a6e22e>android:id=</span><span style=color:#e6db74>&#34;@+id/textView&#34;</span>
        <span style=color:#a6e22e>android:layout_width=</span><span style=color:#e6db74>&#34;match_parent&#34;</span>
        <span style=color:#a6e22e>android:layout_height=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span><span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;EditText</span>
        <span style=color:#a6e22e>android:id=</span><span style=color:#e6db74>&#34;@+id/editText&#34;</span>
        <span style=color:#a6e22e>android:layout_width=</span><span style=color:#e6db74>&#34;match_parent&#34;</span>
        <span style=color:#a6e22e>android:layout_height=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span><span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;Button</span>
        <span style=color:#a6e22e>android:enabled=</span><span style=color:#e6db74>&#34;@{b}&#34;</span>     <span style=color:#960050;background-color:#1e0010>自动同步</span>
        <span style=color:#a6e22e>android:onClick=</span><span style=color:#e6db74>&#34;@{()-&gt;textView.setText(editText.getText())}&#34;</span>     <span style=color:#960050;background-color:#1e0010>使用</span> <span style=color:#960050;background-color:#1e0010>ID，直接在布局中处理逻辑</span>
        <span style=color:#a6e22e>android:layout_width=</span><span style=color:#e6db74>&#34;match_parent&#34;</span>
        <span style=color:#a6e22e>android:layout_height=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span>
        <span style=color:#a6e22e>android:text=</span><span style=color:#e6db74>&#34;New Button&#34;</span><span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;CheckBox</span>
        <span style=color:#a6e22e>android:checked=</span><span style=color:#e6db74>&#34;@={b}&#34;</span>     <span style=color:#960050;background-color:#1e0010>自动更新（勾选启用按钮）</span>
        <span style=color:#a6e22e>android:layout_width=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span>
        <span style=color:#a6e22e>android:layout_height=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span><span style=color:#f92672>/&gt;</span>

-------------------------------------------------------

<span style=color:#f92672>&lt;data&gt;</span>
    <span style=color:#f92672>&lt;import</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;android.view.View&#34;</span><span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;/data&gt;</span>

----

<span style=color:#f92672>&lt;CheckBox</span>
        <span style=color:#a6e22e>android:id=</span><span style=color:#e6db74>&#34;@+id/checkBox&#34;</span>     <span style=color:#960050;background-color:#1e0010>勾选显示图片并启用按钮</span>
        <span style=color:#a6e22e>android:layout_width=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span>
        <span style=color:#a6e22e>android:layout_height=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span><span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;ImageView</span>
        <span style=color:#a6e22e>android:visibility=</span><span style=color:#e6db74>&#34;@{checkBox.checked?View.VISIBLE:View.GONE}&#34;</span>     <span style=color:#960050;background-color:#1e0010>显示或隐藏（CheckBox</span> <span style=color:#960050;background-color:#1e0010>隐式自动更新）</span>
        <span style=color:#a6e22e>android:src=</span><span style=color:#e6db74>&#34;@mipmap/ic_launcher&#34;</span>
        <span style=color:#a6e22e>android:layout_width=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span>
        <span style=color:#a6e22e>android:layout_height=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span><span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;Button</span>
        <span style=color:#a6e22e>android:enabled=</span><span style=color:#e6db74>&#34;@{checkBox.checked}&#34;</span>     <span style=color:#960050;background-color:#1e0010>启用或禁用（CheckBox</span> <span style=color:#960050;background-color:#1e0010>隐式自动更新）</span>
        <span style=color:#a6e22e>android:text=</span><span style=color:#e6db74>&#34;New Button&#34;</span>
        <span style=color:#a6e22e>android:layout_width=</span><span style=color:#e6db74>&#34;match_parent&#34;</span>
        <span style=color:#a6e22e>android:layout_height=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span><span style=color:#f92672>/&gt;</span>
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml>所有 EditText 的字段不为空才启用按钮
-------------------------------------------------------

public class Presenter {
    public static boolean a(String s1, String s2) {
        if (s1 == null || s2 == null) {
            return false;
        }
        return !s1.equals(&#34;&#34;) <span style=color:#960050;background-color:#1e0010>&amp;&amp;</span> !s2.equals(&#34;&#34;);     所有 EditText 的字段不为空才启用按钮
    }
}

-------------------------------------------------------

<span style=color:#f92672>&lt;data&gt;</span>
    <span style=color:#f92672>&lt;import</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;com.example.myapp.myapplication.Presenter&#34;</span><span style=color:#f92672>/&gt;</span>
    <span style=color:#f92672>&lt;variable</span>
            <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;s1&#34;</span>
            <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;String&#34;</span><span style=color:#f92672>/&gt;</span>
    <span style=color:#f92672>&lt;variable</span>
            <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;s2&#34;</span>
            <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;String&#34;</span><span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;/data&gt;</span>

----

<span style=color:#f92672>&lt;EditText</span>
        <span style=color:#a6e22e>android:text=</span><span style=color:#e6db74>&#34;@={s1}&#34;</span>     <span style=color:#960050;background-color:#1e0010>自动更新</span>
        <span style=color:#a6e22e>android:layout_width=</span><span style=color:#e6db74>&#34;match_parent&#34;</span>
        <span style=color:#a6e22e>android:layout_height=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span><span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;EditText</span>
        <span style=color:#a6e22e>android:text=</span><span style=color:#e6db74>&#34;@={s2}&#34;</span>     <span style=color:#960050;background-color:#1e0010>自动更新</span>
        <span style=color:#a6e22e>android:layout_width=</span><span style=color:#e6db74>&#34;match_parent&#34;</span>
        <span style=color:#a6e22e>android:layout_height=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span><span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;Button</span>
        <span style=color:#a6e22e>android:enabled=</span><span style=color:#e6db74>&#39;@{Presenter.a(s1,s2)}&#39;</span>     <span style=color:#960050;background-color:#1e0010>所有</span> <span style=color:#960050;background-color:#1e0010>EditText</span> <span style=color:#960050;background-color:#1e0010>的字段不为空才启用按钮</span>
        <span style=color:#a6e22e>android:layout_width=</span><span style=color:#e6db74>&#34;match_parent&#34;</span>
        <span style=color:#a6e22e>android:layout_height=</span><span style=color:#e6db74>&#34;wrap_content&#34;</span>
        <span style=color:#a6e22e>android:text=</span><span style=color:#e6db74>&#34;New Button&#34;</span><span style=color:#f92672>/&gt;</span>
</code></pre></div></div><div class=sharing style=text-align:center><br><p>捐赠支持</p><p>如果我的文章对你有所帮助，欢迎通过支付宝的扫一扫，轻松的向我发起捐助。</p><p>对于你的支持，我会心怀感激且倍感荣幸地接受，并继续努力。</p><img src=https://ww4.sinaimg.cn/large/a15b4afegw1fbn096ql6dj20dw0dwwe9.jpg alt title data-action=zoom width=40%><p></p><br>&copy; 2015-2020 XhstormR</div></div></div></div><div id=backtop><a href=# title>TOP</a></div><nav id=TableOfContents><ul><li><a href=#双向绑定>双向绑定</a></li><li><a href=#启用-data-binding>启用 Data Binding</a></li><li><a href=#binding-data>Binding Data</a></li><li><a href=#data-objectsdata-bindings>Data Objects（Data Bindings）</a><ul><li><a href=#可观测对象>可观测对象</a></li><li><a href=#可观测字段>可观测字段</a></li><li><a href=#可观测集合>可观测集合</a></li></ul></li><li><a href=#event-handlingview-listeners>Event Handling（View Listeners）</a><ul><li><a href=#method-references>Method References</a></li><li><a href=#listener-bindings>Listener Bindings</a></li><li><a href=#heading>@=</a></li><li><a href=#onpropertychangedcallback>OnPropertyChangedCallback</a></li></ul></li><li><a href=#注解>注解</a><ul><li><a href=#bindingadapter>BindingAdapter</a></li><li><a href=#bindingconversion>BindingConversion</a></li></ul></li><li><a href=#code>Code</a></li></ul></nav><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/languages/yaml.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/languages/kotlin.min.js></script><script>hljs.initHighlightingOnLoad()</script><script src=https://blog.xhstormr.tk/js/zoom.min.js></script><script>window.addEventListener("load",show),window.onscroll=show;function show(){document.documentElement.scrollTop+document.body.scrollTop>300?document.getElementById("backtop").style.display="block":document.getElementById("backtop").style.display="none"}</script><script type=text/javascript color=0,0,0 opacity=1 zindex=-2 count=49 src=https://cdnjs.cloudflare.com/ajax/libs/canvas-nest.js/2.0.4/canvas-nest.js></script></body></html>